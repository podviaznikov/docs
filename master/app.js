!function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments),this._initialize(this.props),this.handleActions({switchState:this.switchState,extendState:this.extendState,tocEntrySelected:this.focusNode,focusNode:this.focusNode})}var r=t("./components/ContainerRenderer"),s=t("./DocumentationTOCProvider"),o=t("../ui/Component"),a=t("./components/CoverComponent"),h=t("../ui/TOC"),c=t("../ui/SplitPane"),u=t("../ui/ScrollPane"),l=t("./DocumentationRouter");i.Prototype=function(){this._initialize=function(t){var e=t.configurator;this.config=i["static"].config,this.router=new l(this),this.router.on("route:changed",this._onRouteChanged,this),this.tocProvider=new s(this.props.doc,this.config),this.componentRegistry=e.getComponentRegistry(),this.iconProvider=e.getIconProvider(),this.labelProvider=e.getLabelProvider()},this.getChildContext=function(){return{doc:this.getDocument(),config:this.config,tocProvider:this.tocProvider,componentRegistry:this.componentRegistry,iconProvider:this.iconProvider,labelProvider:this.labelProvider}},this.getDocument=function(){return this.props.doc},this.shouldRerender=function(){return!1},this.navigate=function(t,e){this.extendState(t),this.router.writeRoute(t,e)},this._onRouteChanged=function(t){this.navigate(t,{replace:!0})},this.dispose=function(){this.router.dispose()},this.focusNode=function(t){this.navigate({nodeId:t})},this.switchState=function(t){this.navigate(t)},this.jumpToNode=function(t){this.tocProvider.emit("entry:selected",t)},this.didMount=function(){var t=this.router.readRoute();this.navigate(t,{replace:!0}),this._updateScrollPosition()},this.didUpdate=function(){this._updateScrollPosition()},this.render=function(t){return t("div").addClass("sc-documentation-reader sc-controller").append(t(c,{splitType:"vertical",sizeA:"270px"}).append(this._renderContextSection(t),this._renderMainSection(t)).ref("splitPane"))},this._renderContextSection=function(t){var e=t("div").addClass("se-context-section").ref("contextSection").append(t(h));return e},this._renderMainSection=function(t){var e=this.config,n=this.props.doc,i=n.get("meta");return t("div").ref("main").addClass("se-main-section").append(t(u,{tocProvider:this.tocProvider}).ref("contentPanel").append(t(a,{node:i}).ref("cover"),t(r,{containerId:e.containerId}).ref("containerRenderer")))},this._updateScrollPosition=function(){this.refs.contentPanel&&this.state.nodeId&&this.refs.contentPanel.scrollTo(this.state.nodeId)}},o.extend(i),i["static"].config={containerId:"body",skipAbstractClasses:!1,skipPrivateMethods:!0},e.exports=i},{"../ui/Component":277,"../ui/ScrollPane":288,"../ui/SplitPane":290,"../ui/TOC":291,"./DocumentationRouter":3,"./DocumentationTOCProvider":4,"./components/ContainerRenderer":8,"./components/CoverComponent":9}],2:[function(t,e,n){"use strict";e.exports={name:"documentation-reader",configure:function(e){e.addComponent("namespace",t("./components/NamespaceComponent")),e.addComponent("function",t("./components/FunctionComponent")),e.addComponent("class",t("./components/SubstanceClassComponent")),e.addComponent("ctor",t("./components/ConstructorComponent")),e.addComponent("method",t("./components/MethodComponent")),e.addComponent("module",t("./components/ModuleComponent")),e.addComponent("property",t("./components/PropertyComponent")),e.addComponent("event",t("./components/EventComponent")),e.addLabel("inherited-from","Inherited from"),e.addLabel("example","Example"),e.addLabel("parameters","Parameters"),e.addLabel("abstract-class","Abstract Class"),e.addLabel("component","Component"),e.addLabel("abstract-component","Abstract Component"),e.addLabel("ctor","Constructor"),e.addLabel("function","Function"),e.addLabel("functions","Functions"),e.addLabel("method","Method"),e.addLabel("module","Module"),e.addLabel("event","Event"),e.addLabel("defined-in","defined in"),e.addLabel("returns","Returns"),e.addLabel("extends","inherits from"),e.addLabel("inner-classes","Inner Classes"),e.addLabel("class-properties","Class properties"),e.addLabel("class-methods","Class methods"),e.addLabel("classes","Classes"),e.addLabel("methods","Methods"),e.addLabel("properties","Properties"),e.addLabel("instance-methods","Methods"),e.addLabel("instance-properties","Properties"),e.addLabel("instance-events","Events"),e.addLabel("inherited-instance-methods","Inherited Methods"),e.addLabel("inherited-instance-properties","Inherited Properties"),e.addLabel("inherited-class-properties","Inherited Class properties"),e.addLabel("inherited-class-methods","Inherited Class methods"),e.addLabel("props","Props"),e.addLabel("state","State")}}},{"./components/ConstructorComponent":7,"./components/EventComponent":11,"./components/FunctionComponent":13,"./components/MethodComponent":17,"./components/ModuleComponent":18,"./components/NamespaceComponent":19,"./components/PropertyComponent":21,"./components/SubstanceClassComponent":24}],3:[function(t,e,n){"use strict";function i(t){i["super"].call(this),this.controller=t}var r=t("../ui/Router");i.Prototype=function(){this.parseRoute=function(t){return t?{nodeId:t}:this.controller.getInitialState()},this.stringifyRoute=function(){return this.controller.state.nodeId}},r.extend(i),e.exports=i},{"../ui/Router":286}],4:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../ui/TOCProvider"),s=t("lodash/forEach");i.Prototype=function(){this.computeEntries=function(){var t=this.getDocument(),e=this.config,n=[],i=t.get("body").nodes;return i.forEach(function(i){var r=t.get(i);n.push({id:i,name:r.name,level:1,node:r}),s(r.getMemberCategories(),function(t){var i=r.getCategoryMembers(t,e);i.forEach(function(t){n.push({id:t.id,name:t.name,level:2,node:t})})})}),n}},r.extend(i),i["static"].tocTypes=["namespace","class","function","module"],e.exports=i},{"../ui/TOCProvider":292,"lodash/forEach":236}],5:[function(t,e,n){"use strict";var i=t("./model/Documentation"),r=t("../ui/Component"),s=t("./DocumentationReader"),o=t("./model/importDocumentation"),a=t("../util/request"),h=t("../util/Configurator"),c=new h(t("./DocumentationReaderConfig")),u=function(t){a("GET","./documentation.json",null,function(e,n){e&&(console.error(e),t(e));var i=o(n);window.doc=i,t(null,i)})};window.onload=function(){var t=new i;window.doc=t,u(function(t,e){r.mount(s,{doc:e,configurator:c},"body")})}},{"../ui/Component":277,"../util/Configurator":297,"../util/request":308,"./DocumentationReader":1,"./DocumentationReaderConfig":2,"./model/Documentation":27,"./model/importDocumentation":39}],6:[function(t,e,n){"use strict";function i(){r.apply(this,arguments)}var r=t("./MemberContainerComponent"),s=t("./HeadingComponent"),o=t("./ExampleComponent"),a=t("./MemberIndexComponent");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("div").addClass("sc-class").attr("data-id",this.props.node.id);return n.append(t(s,{node:e})),n.append(t("div").addClass("se-description").html(e.description)),n.append(this.renderUsage(t)),e.members&&e.members.length>0&&(n.append(t(a,{node:e})),n.append(this._renderMembers(t))),n},this.renderUsage=function(t){var e=this.props.node,n=t("div").addClass("se-usage");return e.example&&n.append(t(o,{node:e})),n}},r.extend(i),e.exports=i},{"./ExampleComponent":12,"./HeadingComponent":14,"./MemberContainerComponent":15,"./MemberIndexComponent":16}],7:[function(t,e,n){"use strict";function i(){r.apply(this,arguments)}var r=t("./MethodComponent");r.extend(i),e.exports=i},{"./MethodComponent":17}],8:[function(t,e,n){"use strict";function i(){s.apply(this,arguments),this.doc=this.context.doc,this.componentRegistry=this.context.componentRegistry}var r=t("lodash/each"),s=t("../../ui/Component");i.Prototype=function(){this.render=function(t){var e=this.doc.get(this.props.containerId),n=t("div").addClass("sc-container-renderer ").attr({spellCheck:!1,"data-id":e.id,contenteditable:!1});return r(e.nodes,function(e){n.append(this._renderNode(t,e))}.bind(this)),n},this._renderNode=function(t,e){var n=this.doc.get(e),i=this.componentRegistry.get(n.type);return i?t(i,{doc:this.doc,node:n}):(console.error("Could not resolve a component for type: "+n.type),t("div"))}},s.extend(i),e.exports=i},{"../../ui/Component":277,"lodash/each":230}],9:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../ui/Component");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("div").addClass("sc-cover").attr("data-id",e.id);return n.append(t("div").addClass("se-title").append("Substance"),t("div").addClass("se-description").html(e.description)),n}},r.extend(i),e.exports=i},{"../../ui/Component":277}],10:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../ui/Component");i.Prototype=function(){this.render=function(t){var e,n=this.props.node;return e=n?t("a").addClass("sc-cross-link").attr({href:"#"+n.id,"data-type":"cross-link","data-node-id":n.id}):t("span"),this.props.children.length>0&&e.append(this.props.children),e}},r.extend(i),e.exports=i},{"../../ui/Component":277}],11:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../ui/Component"),s=t("./ExampleComponent"),o=t("./ParamsComponent"),a=t("./SourceLinkComponent");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("div").addClass("sc-method").attr("data-id",e.id);return n.append(t("div").addClass("sc-signature").append(t("a").attr({href:"#"}).addClass("se-declaration").on("click",this.onClick).append(t("span").addClass("se-name").append(e.name)),t("div").addClass("se-source").append(t("strong").append(this.getLabel("event")),t("span").append(" defined in "),t(a,{node:e})))),n.append(t("div").addClass("se-description").html(e.description)),(e.params.length>0||e.returns)&&n.append(t(o,{params:e.params,returns:e.returns})),e.example&&n.append(t(s,{node:e})),n},this.onClick=function(t){t.preventDefault(),t.stopPropagation(),this.send("focusNode",this.props.node.id)}},r.extend(i),e.exports=i},{"../../ui/Component":277,"./ExampleComponent":12,"./ParamsComponent":20,"./SourceLinkComponent":23}],12:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../ui/Component");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("div").addClass("sc-example").append(t("div").addClass("se-heading").append(this.getLabel("example"))),i=t("div").addClass("se-body");return i.append(t("div").addClass("se-description").html(e.example)),n.append(i),n}},r.extend(i),e.exports=i},{"../../ui/Component":277}],13:[function(t,e,n){"use strict";function i(){s.apply(this,arguments)}var r=t("../../util/pluck"),s=t("../../ui/Component"),o=t("./HeadingComponent"),a=t("./ParamsComponent"),h=t("./ExampleComponent");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("div").addClass("sc-function").attr("data-id",e.id),i=r(e.params,"name").join(", "),s=[e.name,"(",i,")"];return n.append(t(o,{node:e,name:s})),n.append(t("div").addClass("se-description").html(e.description)),(e.params.length>0||e.returns)&&n.append(t(a,{params:e.params,returns:e.returns})),e.example&&n.append(t(h,{node:e})),n}},s.extend(i),e.exports=i},{"../../ui/Component":277,"../../util/pluck":307,"./ExampleComponent":12,"./HeadingComponent":14,"./ParamsComponent":20}],14:[function(t,e,n){"use strict";function i(){r.apply(this,arguments)}var r=t("../../ui/Component"),s=t("./SourceLinkComponent"),o=t("./CrossLinkComponent");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=e.getDocument(),i=e.name,r=e.type,a=e.getSpecificType(),h=t("div").addClass("sc-doc-heading"),c=t("a").attr({href:"#"}).addClass("se-header").on("click",this.onClick),u=e.getParent(),l="";u&&(l=u.id.replace("/"," / "),l+="namespace"===u.type?" / ":" . "),c.append(t("span").addClass("se-namespace").append(l)),c.append(t("span").addClass("se-name").append(this.props.name||i));var f=t("div").addClass("se-details").addClass(r),d=t("strong").addClass("se-type");if(d.append(this.getLabel(a)),f.append(d),f.append(t("span").addClass("se-source").append(t("span").append(" "+this.getLabel("defined-in")+" "),t(s,{node:e}))),"class"===e.type&&e.superClass){var p=n.get(e.superClass);f.append(t("span").addClass("se-extends").append(t("span").append(" "+this.getLabel("extends")+" "),t(o,{node:p})))}return h.append(c,f),h},this.onClick=function(t){t.preventDefault(),t.stopPropagation(),this.send("focusNode",this.props.node.id)}},r.extend(i),e.exports=i},{"../../ui/Component":277,"./CrossLinkComponent":10,"./SourceLinkComponent":23}],15:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("lodash/each"),s=t("../../ui/Component"),o=t("../../ui/UnsupportedNodeComponent");i.Prototype=function(){this._renderMembers=function(t){var e=this.props.node,n=t("div");return r(e.getMemberCategories(),function(e){var i=this._getCategoryMembers(e);i.length>0&&n.append(this._renderMemberCategory(t,e,i))}.bind(this)),n.children},this._renderMemberCategory=function(t,e,n){var i=t("div").addClass("se-member-category"),s=t("div").addClass("se-members");return r(n,function(e){s.append(this._renderMember(t,e))}.bind(this)),i.append(s),i},this._renderMember=function(t,e){var n=this.props.node,i=n.getDocument(),r=this.context.componentRegistry,s=r.get(e.type);return s||(console.error("Could not resolve a component for type: "+n.type),s=o),t(s,{doc:i,node:e,parentNode:n})},this._getCategoryMembers=function(t){var e=this.context.config,n=this.props.node;return n.getCategoryMembers(t,e)}},s.extend(i),e.exports=i},{"../../ui/Component":277,"../../ui/UnsupportedNodeComponent":293,"lodash/each":230}],16:[function(t,e,n){"use strict";function i(){o.apply(this,arguments)}var r=t("lodash/each"),s=t("lodash/sortBy"),o=t("./MemberContainerComponent"),a=t("./CrossLinkComponent");i.Prototype=function(){var t=i["super"].prototype;this.render=function(t){var e=t("div").addClass("sc-member-index");return e.append(this._renderMembers(t)),e},this._renderMembers=function(e){var n=t._renderMembers.call(this,e),i=this.props.node;return"class"===i.type&&i.superClass&&(n=n.concat(this._renderInheritedMembers(e))),n},this._renderInheritedMembers=function(e){var n=[],i=this.context.config,o=this.props.node,a=o.getMemberCategories(),h=o.getInheritedMembers(i);return r(h,function(i,r){i=s(i,"id");var o=a[r],h=t._renderMemberCategory.call(this,e,o,i);h.insertAt(0,e("span").addClass("se-label").append(this.getLabel("inherited-"+o.name))),n.push(h)}.bind(this)),n},this._renderMemberCategory=function(e,n){var i=t._renderMemberCategory.apply(this,arguments);return i.insertAt(0,e("span").addClass("se-label").append(this.getLabel(n.name))),i},this._renderMember=function(t,e){return t(a,{node:e}).append(e.name," ")},this.getMemberCategories=function(){return this.props.node.getMemberCategories()}},o.extend(i),e.exports=i},{"./CrossLinkComponent":10,"./MemberContainerComponent":15,"lodash/each":230,"lodash/sortBy":265}],17:[function(t,e,n){"use strict";function i(){r.apply(this,arguments)}var r=t("../../ui/Component"),s=t("./SignatureComponent"),o=t("./ExampleComponent"),a=t("./ParamsComponent");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("div").addClass("sc-method").attr("data-id",e.id);return n.append(t(s,{node:e})),n.append(t("div").addClass("se-description").html(e.description)),(e.params.length>0||e.returns)&&n.append(t(a,{params:e.params,returns:e.returns})),e.example&&n.append(t(o,{node:e})),n}},r.extend(i),e.exports=i},{"../../ui/Component":277,"./ExampleComponent":12,"./ParamsComponent":20,"./SignatureComponent":22}],18:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./MemberContainerComponent"),s=t("./HeadingComponent"),o=t("./ExampleComponent"),a=t("./MemberIndexComponent");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("div").addClass("sc-module").attr("data-id",e.id);return n.append(t(s,{node:e})),n.append(t("div").addClass("se-description").html(e.description)),e.example&&n.append(t(o,{node:e})),e.members&&e.members.length>0&&(n.append(t(a,{node:e})),n.append(this._renderMembers(t))),n}},r.extend(i),e.exports=i},{"./ExampleComponent":12,"./HeadingComponent":14,"./MemberContainerComponent":15,"./MemberIndexComponent":16}],19:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./MemberContainerComponent"),s=t("./MemberIndexComponent");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("div").addClass("sc-namespace").attr("data-id",e.id);return n.append(t("a").addClass("se-name").html(e.id).on("click",this.onClick).attr({href:"#"})),n.append(t("div").addClass("se-description").html(e.description)),e.members.length>0&&(n.append(t(s,{node:e})),n.append(this._renderMembers(t))),n},this.onClick=function(t){t.preventDefault(),t.stopPropagation(),this.send("focusNode",this.props.node.id)}},r.extend(i),e.exports=i},{"./MemberContainerComponent":15,"./MemberIndexComponent":16}],20:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../ui/Component"),s=t("./CrossLinkComponent");i.Prototype=function(){this.render=function(t){var e=this.context.doc,n=t("div").addClass("sc-params"),i=this.props.params,r=this.props.returns;if(i.length>0){n.append(t("div").addClass("se-label").append(this.getLabel(this.props.label||"parameters")));var o=t("table").addClass("se-params-table");i.forEach(function(n){var i;n.type&&(i=e.get(n.type)),o.append(t("tr").addClass("se-param").append(t("td").addClass("se-param-name").append(n.name),t("td").addClass("se-param-type").append(t(s,{node:i}).append(n.shortType)),t("td").addClass("se-param-description").html(n.description)))}),n.append(o)}if(r){var a;r.type&&(a=e.get(r.type)),n.append(t("div").addClass("se-returns se-label").append(this.getLabel("returns"))),n.append(t("table").addClass("se-params-table").append(t("tr").addClass("se-param").append(t("td").addClass("se-param-type").append(t(s,{node:a}).append(r.type)),t("td").addClass("se-param-description").html(r.description))))}return n}},r.extend(i),e.exports=i},{"../../ui/Component":277,"./CrossLinkComponent":10}],21:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../ui/Component"),s=t("./ExampleComponent"),o=t("./SourceLinkComponent"),a=t("../model/Documentation");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("div").addClass("sc-property").attr("data-id",e.id),i=a.getNodeInfo(e),r=e.isPrivate?"private ":"";return n.append(t("div").addClass("se-declaration").append(t("span").addClass("se-visibility").append(r)).append(t("span").addClass("se-storage").append(i.storage)).append(t("span").addClass("se-name").append(e.name))),n.append(t("div").addClass("se-source").append(t("strong").append("Property"),t("span").append(" defined in "),t(o,{node:e}))),n.append(t("div").addClass("se-description").html(e.description)),e.example&&n.append(t(s,{node:e})),n}},r.extend(i),e.exports=i},{"../../ui/Component":277,"../model/Documentation":27,"./ExampleComponent":12,"./SourceLinkComponent":23}],22:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../util/pluck"),s=t("../../ui/Component"),o=t("../model/Documentation"),a=t("./SourceLinkComponent");i.Prototype=function(){this.render=function(t){var e=t("div").addClass("sc-signature"),n=this.props.node,i=n.params,s=o.getNodeInfo(n),h=n.isPrivate?"private ":"",c=r(i,"name").join(", ");return e.append(t("a").addClass("se-declaration").attr({href:"#"}).on("click",this.onClick).append(t("span").addClass("se-visibility").append(h)).append(t("span").addClass("se-storage").append(s.storage)).append(t("span").addClass("se-name").append(n.name)).append("(").append(t("span").addClass("se-arguments").append(c)).append(")"),t("div").addClass("se-source").append(t("strong").append(s.typeDescr),t("span").append(" defined in "),t(a,{node:n}))),e},this.onClick=function(t){t.preventDefault(),t.stopPropagation(),this.send("focusNode",this.props.node.id)}},s.extend(i),e.exports=i},{"../../ui/Component":277,"../../util/pluck":307,"../model/Documentation":27,"./SourceLinkComponent":23}],23:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../ui/Component");i.Prototype=function(){this.render=function(t){var e=this.props.node,n=t("a").addClass("sc-source-link").attr({href:"#",target:"_blank","data-source-file":e.sourceFile,"data-source-line":e.sourceLine}).append(e.sourceFile+"#"+e.sourceLine);return n.attr("href",this.getGithubUrl()),n},this.getGithubUrl=function(){var t=this.props.node,e=t.getDocument().get("meta"),n=e.repository+"/blob/"+e.sha+"/"+t.sourceFile+"#L"+t.sourceLine;return n}},r.extend(i),e.exports=i},{"../../ui/Component":277}],24:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./ClassComponent"),s=t("./ParamsComponent"),o=t("./ExampleComponent");i.Prototype=function(){this.renderUsage=function(t){var e=this.props.node,n=t("div").addClass("se-usage");if("component"===e.getSpecificType()){var i=this.collectTagsByType("prop"),r=this.collectTagsByType("state");i.length>0&&n.append(t(s,{label:"props",params:i})),r.length>0&&n.append(t(s,{label:"state",params:r}))}return e.example&&n.append(t(o,{node:e})),n},this.collectTagsByType=function(t){var e=[];return this.props.node.tags.forEach(function(n){n.type===t&&e.push(n.value)}),e}},r.extend(i),e.exports=i},{"./ClassComponent":6,"./ExampleComponent":12,"./ParamsComponent":20}],25:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./DocumentedNode"),s=t("./MemberContainerMixin"),o={ctor:{name:"ctor",path:["class","ctor"]},"instance-methods":{name:"instance-methods",path:["instance","method"]},"instance-properties":{name:"instance-properties",path:["instance","property"]},"instance-events":{name:"instance-events",path:["instance","event"]},"class-methods":{name:"class-methods",path:["class","method"]},"class-properties":{name:"class-properties",path:["class","property"]},"inner-classes":{name:"inner-classes",path:["class","class"]}};i.Prototype=function(){this.getSpecificType=function(){return this.isAbstract?"abstract-class":"class"},this.getMemberCategories=function(){return o};var t=["instance-methods","instance-properties"];this.getInheritedMembers=function(e){var n={},i=this.getDocument(),r=this.superClass?i.get(this.superClass):null;return r&&(n=r.getInheritedMembers(e),t.forEach(function(t){var i=r.getCategoryMembers(o[t],e);i.length>0&&(n[t]=n[t]||{},i.forEach(function(e){n[t][e.id]=e}))})),n}},r.extend(i,s),i["static"].name="class",i["static"].defineSchema({parent:"id",name:"string",members:{type:["array","id"],"default":[]},isAbstract:{type:"boolean","default":!1},isStatic:{type:"boolean","default":!1},superClass:{type:"id",optional:!0}}),i["static"].isBlock=!0,e.exports=i},{"./DocumentedNode":28,"./MemberContainerMixin":31}],26:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./DocumentedNode");r.extend(i),i["static"].name="ctor",i["static"].defineSchema({parent:"id",name:"string",params:{type:["array","object"],"default":[]},isPrivate:{type:"boolean","default":!1}}),e.exports=i},{"./DocumentedNode":28}],27:[function(t,e,n){"use strict";function i(){r.call(this,o),this.addIndex("members",new a(this)),this.create({type:"container",id:"body",nodes:[]})}var r=t("../../model/Document"),s=t("../../model/DocumentSchema"),o=new s("substance-documentation","0.1.0"),a=t("./MemberIndex");o.addNodes([t("./MetaNode"),t("./NamespaceNode"),t("./ModuleNode"),t("./FunctionNode"),t("./SubstanceClassNode"),t("./ConstructorNode"),t("./MethodNode"),t("./PropertyNode"),t("./EventNode")]),o.getDefaultTextType=function(){return null},r.extend(i),i.schema=o,i.getNodeInfo=function(t){var e,n={isClassMember:!1,isModuleMember:!1,isConstructor:!1,storage:"",typeDescr:""},i=t.hasParent();return i&&(e=t.getParent(),n.isClassMember="class"===e.type,n.isModuleMember="module"===e.type),"ctor"===t.type&&(n.isConstructor=!0),n.isConstructor?n.storage="new ":n.isClassMember&&!t.isStatic?n.storage="this.":n.isModuleMember&&(n.storage=e.name+"."),n.isConstructor?n.typeDescr="Constructor":(n.isClassMember||n.isModuleMember)&&(t.isStatic?n.typeDescr="Static Method":n.typeDescr="Method"),n},e.exports=i},{"../../model/Document":50,"../../model/DocumentSchema":55,"./ConstructorNode":26,"./EventNode":29,"./FunctionNode":30,"./MemberIndex":32,"./MetaNode":33,"./MethodNode":34,"./ModuleNode":35,"./NamespaceNode":36,"./PropertyNode":37,"./SubstanceClassNode":38}],28:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../model/DocumentNode");i.Prototype=function(){this.getSpecificType=function(){return this.type}},r.extend(i),i["static"].name="source-code",i["static"].defineSchema({description:{type:"string",optional:!0},example:{type:"string",optional:!0},sourceFile:"string",sourceLine:"number",isPrivate:{type:"boolean","default":!1},tags:{type:["array","object"],"default":[]}}),i["static"].isBlock=!0,e.exports=i},{"../../model/DocumentNode":53}],29:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./DocumentedNode");r.extend(i),i["static"].name="event",i["static"].defineSchema({parent:"id",name:"string",params:{type:["array","object"],"default":[]}}),i["static"].isBlock=!0,e.exports=i},{"./DocumentedNode":28}],30:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./DocumentedNode");r.extend(i),i["static"].name="function",i["static"].defineSchema({parent:"id",name:"string",params:{type:["array","object"],"default":[]},returns:{type:"object",optional:!0}}),i["static"].isBlock=!0,e.exports=i},{"./DocumentedNode":28}],31:[function(t,e,n){"use strict";var i=t("lodash/filter"),r=t("lodash/each"),s={getMembers:function(t){t=t||{};var e=[];return r(this.getMemberCategories(),function(n){var i=this.getCategoryMembers(n,t);e=e.concat(i)}.bind(this)),e},getCategoryMembers:function(t,e){var n=this.getDocument(),r=n.getIndex("members"),s=r.get([this.id].concat(t.path));return s=i(s,function(t){return!(t.isPrivate&&e.skipPrivateMethods||"class"===t.type&&t.isAbstract&&e.skipAbstractClasses)})}};e.exports=s},{"lodash/each":230,"lodash/filter":233}],32:[function(t,e,n){"use strict";function i(t){r.apply(this,arguments),this.doc=t,this.index=new s}var r=t("../../model/data/NodeIndex"),s=t("../../util/TreeIndex");i.Prototype=function(){this.select=function(t){return t.hasParent()},this._getPath=function(t,e){var n=this.doc;e=e||t.parent;var i=t.type,r=n.get(e);return r?"class"===r.type?t.isStatic||"ctor"===i?[e,"class",i,t.name]:[e,"instance",i,t.name]:[e,i,t.name]:(console.error("Could not retrieve parent node of member."),[e,i,t.name])},this.create=function(t){this.index.set(this._getPath(t),t)},this["delete"]=function(t){this.index["delete"](this._getPath(t))},this.update=function(t,e,n,i){this.select(t)&&"parent"===e[1]&&(this.index["delete"](this._getPath(t,i)),this.index.set(this._getPath(t,n),t))},this.clone=function(){return new i(this.doc)}},r.extend(i),e.exports=i},{"../../model/data/NodeIndex":72,"../../util/TreeIndex":300}],33:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../model/DocumentNode");r.extend(i),i["static"].name="meta",i["static"].defineSchema({description:"string",repository:"string",sha:"string"}),e.exports=i},{"../../model/DocumentNode":53}],34:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./DocumentedNode");r.extend(i),i["static"].name="method",i["static"].defineSchema({parent:"id",name:"string",params:{type:["array","object"],"default":[]},returns:{type:"object",optional:!0},isStatic:{type:"boolean","default":!1},isPrivate:{type:"boolean","default":!1}}),e.exports=i},{"./DocumentedNode":28}],35:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./DocumentedNode"),s=t("./MemberContainerMixin"),o={classes:{name:"classes",path:["class"]},methods:{name:"methods",path:["method"]},properties:{name:"properties",path:["property"]}};i.Prototype=function(){this.getMemberCategories=function(){return o}},r.extend(i,s),i["static"].name="module",i["static"].defineSchema({parent:"id",name:"string",members:{type:["array","property"],"default":[]}}),i["static"].isBlock=!0,e.exports=i},{"./DocumentedNode":28,"./MemberContainerMixin":31}],36:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("../../model/DocumentNode"),s=t("./MemberContainerMixin"),o={modules:{name:"modules",path:["module"]},classes:{name:"classes",path:["class"]},functions:{name:"functions",path:["function"]}};i.Prototype=function(){this.getMemberCategories=function(){return o}},r.extend(i,s),i["static"].name="namespace",i["static"].defineSchema({parent:{type:"id",optional:!0},name:"string",description:{type:"string",optional:!0},example:{type:"string",optional:!0},tags:{type:["array","object"],"default":[]},members:{type:["array","id"],"default":[]}}),i["static"].isBlock=!0,e.exports=i},{"../../model/DocumentNode":53,"./MemberContainerMixin":31}],37:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./DocumentedNode");r.extend(i),i["static"].name="property",i["static"].defineSchema({parent:"id",name:"string",dataType:{type:"string",optional:!0},isStatic:{type:"boolean","default":!1}}),e.exports=i},{"./DocumentedNode":28}],38:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./ClassNode"),s=t("lodash/find");i.Prototype=function(){this.getSpecificType=function(){var t=!1;return this.tags.length>0&&(t=Boolean(s(this.tags,"type","component"))),t?this.isAbstract?"abstract-component":"component":r.prototype.getSpecificType.call(this)}},r.extend(i),e.exports=i},{"./ClassNode":25,"lodash/find":234}],39:[function(t,e,n){"use strict";function i(t){var e=new r;return e["import"](function(e){var n=e.get("body");s(t,function(t){e.create(t),"namespace"===t.type&&n.show(t.id)})}),e}var r=t("./Documentation"),s=t("lodash/each");e.exports=i},{"./Documentation":27,"lodash/each":230}],40:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./Coordinate");i.Prototype=function(){this.isAnchor=function(){return!0}},r.extend(i),e.exports=i},{"./Coordinate":48}],41:[function(t,e,n){"use strict";function i(t){this.doc=t,this.byPath=new s.Arrays,this.byId={}}var r=t("lodash/filter"),s=t("../util/TreeIndex"),o=t("./DocumentIndex");i.Prototype=function(){this.select=function(t){return t._isContainerAnnotation},this.reset=function(t){this.byPath.clear(),this.byId={},this._initialize(t)},this.get=function(t,e){var n=this.byPath.getAll(t);return e?r(n,function(t){return t.containerId===e}):n.slice(0)},this.create=function(t){var e=t.getStartAnchor(),n=t.getEndAnchor();this.byPath.add(e.path,e),this.byPath.add(n.path,n),this.byId[t.id]=t},this["delete"]=function(t){var e=t.getStartAnchor(),n=t.getEndAnchor();this.byPath.remove(e.path,e),this.byPath.remove(n.path,n),delete this.byId[t.id]},this.update=function(t,e,n,i){if(this.select(t)){var r=null;if("startPath"===e[1])r=t.getStartAnchor();else{if("endPath"!==e[1])return;r=t.getEndAnchor()}this.byPath.remove(i,r),this.byPath.add(r.path,r)}}},o.extend(i),e.exports=i},{"../util/TreeIndex":300,"./DocumentIndex":52,"lodash/filter":233}],42:[function(t,e,n){"use strict";function i(){this.byPath=new h,this.byType=new h;
}var r=t("lodash/isString"),s=t("lodash/isNumber"),o=t("lodash/map"),a=t("lodash/filter"),h=t("../util/TreeIndex"),c=t("./DocumentIndex");i.Prototype=function(){this.property="path",this.select=function(t){return Boolean(t._isPropertyAnnotation)},this.reset=function(t){this.byPath.clear(),this.byType.clear(),this._initialize(t)},this.get=function(t,e,n,h){var u;return u=r(t)||1===t.length?this.byPath.getAll(t)||{}:this.byPath.get(t),u=o(u),s(e)&&(u=a(u,i.filterByRange(e,n))),h&&(u=a(u,c.filterByType(h))),u},this.create=function(t){this.byType.set([t.type,t.id],t),this.byPath.set(t.path.concat([t.id]),t)},this["delete"]=function(t){this.byType["delete"]([t.type,t.id]),this.byPath["delete"](t.path.concat([t.id]))},this.update=function(t,e,n,i){this.select(t)&&e[1]===this.property&&(this["delete"]({id:t.id,type:t.type,path:i}),this.create(t))}},c.extend(i),i.filterByRange=function(t,e){return function(n){var i=n.startOffset,r=n.endOffset,o=r>=t;return s(e)&&(o=o&&e>=i),o}},e.exports=i},{"../util/TreeIndex":300,"./DocumentIndex":52,"lodash/filter":233,"lodash/isNumber":250,"lodash/isString":253,"lodash/map":259}],43:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments),this.document.isTransactionDocument||this.document.on("document:changed",this._onChange,this)}var r=t("lodash/extend"),s=t("lodash/isNumber"),o=t("lodash/isString"),a=t("./DocumentNode"),h=t("./ParentNodeMixin"),c=t("./ContainerAddress");i.Prototype=function(){this._isContainer=!0,r(this,h),this.dispose=function(){this.document.off(this)},this.getPosition=function(t){if(this.document.isTransactionDocument)return this.nodes.indexOf(t);var e=this._getCachedPositions(),n=e[t];return void 0===n&&(n=-1),n},this.getNodes=function(){var t=this.getDocument(),e=[];return this.nodes.forEach(function(n){var i=t.get(n);i?e.push(i):console.error("Node does not exist: ",n)}),e},this.getNodeAt=function(t){return this.getDocument().get(this.nodes[t])},this.show=function(t,e){var n=this.getDocument(),i=arguments[0];o(i)||i._isNode&&(t=i.id),s(e)||(e=this.nodes.length),n.update(this.getContentPath(),{insert:{offset:e,value:t}})},this.hide=function(t){var e=this.getDocument(),n=this.nodes.indexOf(t);n>=0&&e.update(this.getContentPath(),{"delete":{offset:n}})},this.getAddress=function(t){if(!t._isCoordinate)throw new Error("Illegal argument: Container.getAddress(coor) expects a Coordinate instance.");var e,n=t.path[0],i=this.getPosition(n);return e=t.isNodeCoordinate()?t.offset>0?Number.MAX_VALUE:0:t.offset,new c(i,e)},this.getChildrenProperty=function(){return"nodes"},this.getLength=function(){return this.nodes.length},this._onChange=function(t){t.isUpdated(this.getContentPath())&&(this.positions=null)},this._getCachedPositions=function(){if(!this.positions){var t={};this.nodes.forEach(function(e,n){t[e]=n}),this.positions=t}return this.positions},this.getContentPath=function(){return[this.id,"nodes"]}},a.extend(i),i["static"].name="container",i["static"].defineSchema({nodes:{type:["id"],"default":[]}}),Object.defineProperty(i.prototype,"length",{get:function(){return console.warn("DEPRECATED: want to get rid of unnecessary properties. Use this.getLength() instead."),this.nodes.length}}),e.exports=i},{"./ContainerAddress":44,"./DocumentNode":53,"./ParentNodeMixin":59,"lodash/extend":232,"lodash/isNumber":250,"lodash/isString":253}],44:[function(t,e,n){"use strict";function i(t,e){this.pos=t,this.offset=e}var r=t("../util/oo");i.Prototype=function(){this.isBefore=function(t,e){return e=Boolean(e),this.pos<t.pos?!0:this.pos>t.pos?!1:this.offset<t.offset?!0:this.offset>t.offset?!1:!e},this.isAfter=function(t,e){return t.isBefore(this,e)},this.isEqual=function(t){return this.pos===t.pos&&this.offset===t.offset},this.toString=function(){return[this.pos,".",this.offset].join("")}},r.initClass(i),e.exports=i},{"../util/oo":305}],45:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("lodash/isEqual"),s=t("lodash/last"),o=t("lodash/each"),a=t("../util/EventEmitter"),h=t("./DocumentNode"),c=t("./Selection"),u=t("./Anchor"),l=t("./documentHelpers");i.Prototype=function(){this._isAnnotation=!0,this._isContainerAnnotation=!0,this.getText=function(){var t=this.getDocument();return t?l.getTextForSelection(t,this.getSelection()):(console.warn("Trying to use a ContainerAnnotation which is not attached to the document."),"")},this.getSelection=function(){var t=this.getDocument();return t?t.createSelection({type:"container",containerId:this.containerId,startPath:this.startPath,startOffset:this.startOffset,endPath:this.endPath,endOffset:this.endOffset}):(console.warn("Trying to use a ContainerAnnotation which is not attached to the document."),c.nullSelection())},this.setHighlighted=function(t,e){this.highlighted!==t&&(this.highlighted=t,this.highlightedScope=e,this.emit("highlighted",t,e),o(this.fragments,function(n){n.emit("highlighted",t,e)}))},this.updateRange=function(t,e){if(!e.isContainerSelection())throw new Error("Cannot change to ContainerAnnotation.");r(this.startPath,e.start.path)||t.set([this.id,"startPath"],e.start.path),this.startOffset!==e.start.offset&&t.set([this.id,"startOffset"],e.start.offset),r(this.endPath,e.end.path)||t.set([this.id,"endPath"],e.end.path),this.endOffset!==e.end.offset&&t.set([this.id,"endOffset"],e.end.offset)},this.getFragments=function(){var t=[],e=this.getDocument(),n=e.get(this.containerId),r=n.getPathRange(this.startPath,this.endPath);if(1===r.length)t.push(new i.Fragment(this,r[0],"property"));else if(r.length>1){t.push(new i.Fragment(this,r[0],"start")),t.push(new i.Fragment(this,s(r),"end"));for(var o=1;o<r.length-1;o++)t.push(new i.Fragment(this,r[o],"inner"))}return t},this.getStartAnchor=function(){return this._startAnchor||(this._startAnchor=new i.Anchor(this,"isStart")),this._startAnchor},this.getEndAnchor=function(){return this._endAnchor||(this._endAnchor=new i.Anchor(this)),this._endAnchor}},h.extend(i),i["static"].name="container-annotation",i["static"].defineSchema({containerId:"string",startPath:["string"],startOffset:"number",endPath:["string"],endOffset:"number"}),i["static"].isContainerAnnotation=!0,i.Anchor=function(t,e){a.call(this),this.type="container-annotation-anchor",this.anno=t,this.node=t,this.id=t.id,this.containerId=t.containerId,this.isStart=Boolean(e),Object.freeze(this)},i.Anchor.Prototype=function(){this.getTypeNames=function(){return[this.type]},this.getPath=function(){return this.isStart?this.node.startPath:this.node.endPath},this.getOffset=function(){return this.isStart?this.node.startOffset:this.node.endOffset}},u.extend(i.Anchor,a.prototype),Object.defineProperties(i.Anchor.prototype,{path:{get:function(){return this.getPath()}},offset:{get:function(){return this.getOffset()}}}),i.Fragment=function(t,e,n){a.call(this),this.type="container-annotation-fragment",this.anno=t,this.id=t.id,this.path=e,this.mode=n},i.Fragment.Prototype=function(){this.getTypeNames=function(){return[this.type]},this.getStartOffset=function(){return"start"===this.mode||"property"===this.mode?this.anno.startOffset:0},this.getEndOffset=function(){var t=this.anno.getDocument(),e=t.get(this.path),n=e.length;return"end"===this.mode||"property"===this.mode?this.anno.endOffset:n}},a.extend(i.Fragment),i.Fragment["static"].fragmentation=Number.MAX_VALUE,Object.defineProperties(i.Fragment.prototype,{startOffset:{get:function(){return this.getStartOffset()},set:function(){throw new Error("ContainerAnnotation.Fragment.startOffset is read-only.")}},endOffset:{get:function(){return this.getEndOffset()},set:function(){throw new Error("ContainerAnnotation.Fragment.endOffset is read-only.")}},highlighted:{get:function(){return this.anno.highlighted},set:function(){throw new Error("ContainerAnnotation.Fragment.highlighted is read-only.")}}}),e.exports=i},{"../util/EventEmitter":298,"./Anchor":40,"./DocumentNode":53,"./Selection":64,"./documentHelpers":79,"lodash/each":230,"lodash/isEqual":247,"lodash/last":258}],46:[function(t,e,n){"use strict";function i(){this.byId=new a}var r=t("lodash/isString"),s=t("lodash/map"),o=t("lodash/filter"),a=t("../util/TreeIndex"),h=t("./DocumentIndex");i.Prototype=function(){this.select=function(t){return Boolean(t._isContainerAnnotation)},this.reset=function(t){this.byId.clear(),this._initialize(t)},this.get=function(t,e){var n=s(this.byId.get(t));return r(e)&&(n=o(n,h.filterByType)),n},this.create=function(t){this.byId.set([t.containerId,t.id],t)},this["delete"]=function(t){this.byId["delete"]([t.containerId,t.id])},this.update=function(t,e,n,i){}},h.extend(i),e.exports=i},{"../util/TreeIndex":300,"./DocumentIndex":52,"lodash/filter":233,"lodash/isString":253,"lodash/map":259}],47:[function(t,e,n){"use strict";function i(t,e,n,i,s,a,u){if(o.call(this),this.containerId=t,this.startPath=e,this.startOffset=n,this.endPath=i,this.endOffset=s,this.reverse=Boolean(a),this.surfaceId=u,!(this.containerId&&this.startPath&&r(this.startOffset)&&this.endPath&&r(this.endOffset)))throw new Error("Invalid arguments: `containerId`, `startPath`, `startOffset`, `endPath`, and `endOffset` are mandatory");this._internal.start=new h(this,"startPath","startOffset"),this._internal.end=new h(this,"endPath","endOffset"),this._internal.range=new c(this)}var r=t("lodash/isNumber"),s=t("./Coordinate"),o=t("./Selection"),a=t("./PropertySelection"),h=a.CoordinateAdapter,c=a.RangeAdapter;i.Prototype=function(){function t(t,e,n){var r=new i(t.containerId,e.path,e.offset,n.path,n.offset,!1,t.surfaceId),s=t._internal.doc;return s&&r.attach(s),r}this.toJSON=function(){return{type:"container",containerId:this.containerId,startPath:this.startPath,startOffset:this.startOffset,endPath:this.endPath,endOffset:this.endOffset,reverse:this.reverse,surfaceId:this.surfaceId}},this._isContainerSelection=!0,this.isContainerSelection=function(){return!0},this.getType=function(){return"container"},this.isNull=function(){return!1},this.isCollapsed=function(){return this.start.equals(this.end)},this.isReverse=function(){return this.reverse},this.equals=function(t){return o.prototype.equals.call(this,t)&&this.containerId===t.containerId&&this.start.equals(t.start)&&this.end.equals(t.end)},this.toString=function(){return"ContainerSelection("+JSON.stringify(this.startPath)+":"+this.startOffset+" -> "+JSON.stringify(this.endPath)+":"+this.endOffset+(this.reverse?", reverse":"")+")"},this.getContainer=function(){return this._internal.container||(this._internal.container=this.getDocument().get(this.containerId)),this._internal.container},this.isInsideOf=function(t,e){if(t.isNull())return!1;e=Boolean(e);var n=this._range(this),i=this._range(t);return i.start.isBefore(n.start,e)&&n.end.isBefore(i.end,e)},this.contains=function(t,e){if(t.isNull())return!1;e=Boolean(e);var n=this._range(this),i=this._range(t);return n.start.isBefore(i.start,e)&&i.end.isBefore(n.end,e)},this.containsNodeFragment=function(t,e){var n=this.getContainer(),i=new s([t],0),r=n.getAddress(i),o=this._range(this),a=o.start.isBefore(r,e);return a&&(r.offset=1,a=o.end.isAfter(r,e)),a},this.overlaps=function(t){var e=this._range(this),n=this._range(t);return!(e.end.isBefore(n.start,!1)||n.end.isBefore(e.start,!1))},this.isLeftAlignedWith=function(t){var e=this._range(this),n=this._range(t);return e.start.isEqual(n.start)},this.isRightAlignedWith=function(t){var e=this._range(this),n=this._range(t);return e.end.isEqual(n.end)},this.containsNode=function(t){var e=this.getContainer(),n=e.getPosition(this.startPath[0]),i=e.getPosition(this.endPath[0]),r=e.getPosition(t);return!(n>r||r>i||n===r&&1===this.startPath.length&&this.startOffset>0||i===r&&1===this.endPath.length&&this.endOffset<1)},this.collapse=function(e){var n;return n="left"===e?this.start:this.end,t(this,n,n)},this.expand=function(e){var n,i,r=this._range(this),o=this._range(e);return n=r.start.isEqual(o.start)?new s(this.start.path,Math.min(this.start.offset,e.start.offset)):r.start.isAfter(o.start)?new s(e.start.path,e.start.offset):this.start,i=r.end.isEqual(o.end)?new s(this.end.path,Math.max(this.end.offset,e.end.offset)):r.end.isBefore(o.end,!1)?new s(e.end.path,e.end.offset):this.end,t(this,n,i)},this.truncateWith=function(e){if(e.isInsideOf(this,"strict"))throw new Error("Can not truncate with a contained selections");if(!this.overlaps(e))return this;var n,i,r=this._range(this),s=this._range(e);if(s.start.isBefore(r.start,"strict")&&s.end.isBefore(r.end,"strict"))n=e.end,i=this.end;else if(r.start.isBefore(s.start,"strict")&&r.end.isBefore(s.end,"strict"))n=this.start,i=e.start;else if(r.start.isEqual(s.start)){if(!s.end.isBefore(r.end,"strict"))return o.nullSelection;n=e.end,i=this.end}else{if(!r.end.isEqual(s.end)){if(this.isInsideOf(e))return o.nullSelection;throw new Error("Could not determine coordinates for truncate. Check input")}if(!r.start.isBefore(s.start,"strict"))return o.nullSelection;n=this.start,i=e.start}return t(this,n,i)},this.getFragments=function(){if(this._internal.fragments)return this._internal.fragments;var t,e,n,i,r,s,a,h=[],c=this.getDocument(),u=this.getContainer(),l=u.getPosition(this.startPath[0]),f=u.getPosition(this.endPath[0]);if(l!==f){if(t=this.start,r=t.path,s=t.offset,n=r[0],e=c.get(n),!e)throw new Error("Node does not exist:"+n);t.isPropertyCoordinate()?(a=c.get(r),i=new o.Fragment(r,s,a.length,0===s),h.push(i)):t.isNodeCoordinate()&&0===s&&h.push(new o.NodeFragment(e.id));for(var d=l+1;f>d;d++)e=u.getChildAt(d),e.isText()?(r=[e.id,"content"],a=c.get(r),h.push(new o.Fragment(r,0,a.length,!0))):h.push(new o.NodeFragment(u.nodes[d]));if(t=this.end,r=t.path,s=t.offset,n=r[0],e=c.get(n),!e)throw new Error("Node does not exist:"+n);t.isPropertyCoordinate()?(a=c.get(r),i=new o.Fragment(r,0,s,s===a.length),h.push(i)):t.isNodeCoordinate()&&s>0&&h.push(new o.NodeFragment(e.id))}else{r=this.start.path,n=r[0],e=c.get(n);var p=this.start.isNodeCoordinate(),g=this.end.isNodeCoordinate();e.isText()?p&&g&&this.startOffset<this.endOffset?h.push(new o.NodeFragment(n)):!p&&g&&this.endOffset>0?(a=c.get(this.startPath),h.push(new o.Fragment(r,this.startOffset,a.length,0===this.startOffset))):p&&!g&&0===this.startOffset?(a=c.get(this.endPath),h.push(new o.Fragment(r,0,this.endOffset,this.endOffset===a.length))):p||g||(a=c.get(this.startPath),h.push(new o.Fragment(r,this.startOffset,this.endOffset,0===this.startOffset&&this.endOffset===a.length))):h.push(new o.NodeFragment(n))}return this._internal.fragments=h,h},this.splitIntoPropertySelections=function(){var t=[],e=this.getFragments();return e.forEach(function(e){e instanceof o.Fragment&&t.push(new a(e.path,e.startOffset,e.endOffset,!1,this.containerId,this.surfaceId))}.bind(this)),t},this._clone=function(){return new i(this.containerId,this.startPath,this.startOffset,this.endPath,this.endOffset,this.reverse,this.surfaceId)},this._range=function(t){if(t._internal.addressRange)return t._internal.addressRange;var e,n=this.getContainer(),i=n.getAddress(t.start);e=t.isCollapsed()?i:n.getAddress(t.end);var r={start:i,end:e};return t._isContainerSelection&&(t._internal.addressRange=r),r}},o.extend(i),Object.defineProperties(i.prototype,{path:{get:function(){throw new Error("ContainerSelection has no path property. Use startPath and endPath instead")},set:function(){throw new Error("ContainerSelection has no path property. Use startPath and endPath instead.")}},start:{get:function(){return this._internal.start},set:function(){throw new Error("ContainerSelection.prototype.start is read-only.")}},end:{get:function(){return this._internal.end},set:function(){throw new Error("ContainerSelection.prototype.end is read-only.")}},range:{get:function(){return this._internal.range},set:function(){throw new Error("ContainerSelection.prototype.range is read-only.")}}}),i.fromJSON=function(t){var e=t.containerId,n=t.startPath,r=t.endPath||t.startPath,s=t.startOffset,o=t.endOffset,a=Boolean(t.reverse),h=t.surfaceId,c=new i(e,n,s,r,o,a,h);return c},e.exports=i},{"./Coordinate":48,"./PropertySelection":62,"./Selection":64,"lodash/isNumber":250}],48:[function(t,e,n){"use strict";function i(t,e,n){if(this.path=t,this.offset=e,this.after=n,!r(t))throw new Error("Invalid arguments: path should be an array.");if(!s(e)||0>e)throw new Error("Invalid arguments: offset must be a positive number.");Object.isFrozen(t)||Object.freeze(t)}var r=t("lodash/isArray"),s=t("lodash/isNumber"),o=t("lodash/isEqual"),a=t("../util/oo");i.Prototype=function(){this._isCoordinate=!0,this.equals=function(t){return t===this||o(t.path,this.path)&&t.offset===this.offset},this.withCharPos=function(t){return new i(this.path,t)},this.getNodeId=function(){return this.path[0]},this.getPath=function(){return this.path},this.getOffset=function(){return this.offset},this.toJSON=function(){return{path:this.path,offset:this.offset,after:this.after}},this.toString=function(){return"("+this.path.join(".")+", "+this.offset+")"},this.isPropertyCoordinate=function(){return this.path.length>1},this.isNodeCoordinate=function(){return 1===this.path.length}},a.initClass(i),e.exports=i},{"../util/oo":305,"lodash/isArray":242,"lodash/isEqual":247,"lodash/isNumber":250}],49:[function(t,e,n){"use strict";function i(t,e,n){o.call(this),this.customType=t,this.data=e,this.surfaceId=n}var r=t("lodash/cloneDeep"),s=t("lodash/isEqual"),o=t("./Selection");i.Prototype=function(){this.toString=function(){return"custom("+this.customType+", "+JSON.stringify(this.data)+")"},this.isCustomSelection=function(){return!0},this.getType=function(){return"custom"},this.getCustomType=function(){return this.customType},this.toJSON=function(){return{type:"custom",customType:this.customType,data:r(this.data),surfaceId:this.surfaceId}},this.equals=function(t){return o.prototype.equals.call(this,t)&&t.isCustomSelection()&&s(this.data,t.data)}},o.extend(i),i.fromJSON=function(t){return new i(t.customType,t.data||{},t.surfaceId)},e.exports=i},{"./Selection":64,"lodash/cloneDeep":229,"lodash/isEqual":247}],50:[function(t,e,n){"use strict";function i(t){if(i["super"].apply(this),this.__id__=O++,!t)throw new Error("A document needs a schema for reflection.");this.schema=t,this.nodeFactory=new y(this),this.data=new v(t,{nodeFactory:this.nodeFactory}),this.addIndex("type",l.create({property:"type"})),this.addIndex("annotations",new f),this.addIndex("container-annotations",new d),this.addIndex("container-annotation-anchors",new p),this.eventProxies={path:new m(this)},this.on("document:changed",this._updateEventProxies,this)}var r=t("lodash/isEqual"),s=t("lodash/isObject"),o=t("lodash/isArray"),a=t("lodash/isString"),h=t("lodash/each"),c=t("../util/uuid"),u=t("../util/EventEmitter"),l=t("./DocumentIndex"),f=t("./AnnotationIndex"),d=t("./ContainerAnnotationIndex"),p=t("./AnchorIndex"),g=t("./DocumentChange"),m=t("./PathEventProxy"),v=t("./data/IncrementalData"),y=t("./DocumentNodeFactory"),_=t("./Selection"),w=t("./Coordinate"),b=t("./Range"),C=t("./documentHelpers"),x=t("./JSONConverter"),E=new x,O=0;i.Prototype=function(){function e(){var e,i,h,c,u,l=t("./PropertySelection"),f=t("./ContainerSelection"),d=t("./NodeSelection"),p=this;if(1===arguments.length&&null===arguments[0])return _.nullSelection;if(arguments[0]instanceof w)return e=arguments[0],e.isNodeCoordinate()?d._createFromCoordinate(e):new l(e.path,e.offset,e.offset);if(arguments[0]instanceof b){i=arguments[0];var g=r(i.start.path,i.end.path);return g?i.start.isNodeCoordinate()?d._createFromRange(i):new l(i.start.path,i.start.offset,i.end.offset,i.reverse,i.containerId):new f(i.containerId,i.start.path,i.start.offset,i.end.path,i.end.offset,i.reverse)}return 1===arguments.length&&s(arguments[0])?n(p,arguments[0]):2===arguments.length&&o(arguments[0])?(h=arguments[0],c=arguments[1],new l(h,c,c)):3===arguments.length&&o(arguments[0])?(h=arguments[0],c=arguments[1],u=arguments[2],new l(h,c,u,c>u)):5===arguments.length&&a(arguments[0])?n(p,{type:"container",containerId:arguments[0],startPath:arguments[1],startOffset:arguments[2],endPath:arguments[3],endOffset:arguments[4]}):(console.error("Illegal arguments for Selection.create().",arguments),_.nullSelection)}function n(e,n){var r,s=t("./PropertySelection"),o=t("./ContainerSelection"),a=t("./NodeSelection"),h=t("./CustomSelection");if("property"===n.type)return null!==n.endOffset&&void 0!==n.endOffset||(n.endOffset=n.startOffset),n.hasOwnProperty("reverse")||(n.startOffset>n.endOffset?(r=n.startOffset,n.startOffset=n.endOffset,n.endOffset=r,n.reverse=!0):n.reverse=!1),new s(n.path,n.startOffset,n.endOffset,n.reverse,n.containerId,n.surfaceId);if("container"===n.type){var c=e.get(n.containerId,"strict"),u=new w(n.startPath,n.startOffset),l=new w(n.endPath,n.endOffset),f=c.getAddress(u),d=c.getAddress(l),p=n.reverse;if(!f)throw new Error("Invalid arguments for ContainerSelection: ",u.toString());if(!d)throw new Error("Invalid arguments for ContainerSelection: ",l.toString());return n.hasOwnProperty("reverse")||(p=d.isBefore(f,"strict"),p&&(r=u,u=l,l=r)),i(e,u,!0),i(e,l,!1),new o(c.id,u.path,u.offset,l.path,l.offset,p,n.surfaceId)}if("node"===n.type)return a.fromJSON(n);if("custom"===n.type)return h.fromJSON(n);throw new Error("Illegal selection type",n)}function i(t,e,n){if(!e.isNodeCoordinate()){var i=e.getNodeId(),r=t.get(i);r.isText()||(console.warn("Selecting a non-textish node partially is not supported. Select the full node."),e.path=[i],e.offset=n?0:1)}}this._isDocument=!0,this.addIndex=function(t,e){return this.data.addIndex(t,e)},this.getIndex=function(t){return this.data.getIndex(t)},this.getNodes=function(){return this.data.nodes},this.getSchema=function(){return this.schema},this.contains=function(t){this.data.contains(t)},this.get=function(t,e){return this.data.get(t,e)},this.getNodes=function(){return this.data.getNodes()},this["import"]=function(t){try{this.data._stopIndexing(),t(this),this.data._startIndexing()}finally{this.data.queue=[],this.data._startIndexing()}},this.create=function(t){t.id||(t.id=c(t.type));var e=this._create(t),n=new g([e],{},{});return n._extractInformation(this),this._notifyChangeListeners(n),this.data.get(t.id)},this["delete"]=function(t){var e=this.get(t),n=this._delete(t),i=new g([n],{},{});return i._extractInformation(this),this._notifyChangeListeners(i),e},this.set=function(t,e){var n=this.get(t),i=this._set(t,e),r=new g([i],{},{});return r._extractInformation(this),this._notifyChangeListeners(r),n},this.update=function(t,e){var n=this._update(t,e),i=new g([n],{},{});return i._extractInformation(this),this._notifyChangeListeners(i),n},this.addIndex=function(t,e){return this.data.addIndex(t,e)},this.getIndex=function(t){return this.data.getIndex(t)},this.createSelection=function(){var t=e.apply(this,arguments);return t.isNull()||t.attach(this),t},this.getEventProxy=function(t){return this.eventProxies[t]},this.newInstance=function(){var t=this.constructor;return new t(this.schema)},this.fromSnapshot=function(t){var e=this.newInstance();return e.loadSeed(t),e},this.getDocumentMeta=function(){return this.get("document")},this._apply=function(t){h(t.ops,function(t){this.data.apply(t),this.emit("operation:applied",t)}.bind(this)),t._extractInformation(this)},this._notifyChangeListeners=function(t,e){e=e||{},this.emit("document:changed",t,e,this)},this._updateEventProxies=function(t,e){h(this.eventProxies,function(n){n.onDocumentChanged(t,e,this)}.bind(this))},this.loadSeed=function(t){h(this.data.nodes,function(t){this["delete"](t.id)}.bind(this)),h(t.nodes,function(t){this.create(t)}.bind(this))},this.toJSON=function(){return E.exportDocument(this)},this.getTextForSelection=function(t){return console.warn("DEPRECATED: use docHelpers.getTextForSelection() instead."),C.getTextForSelection(this,t)},this.setText=function(t,e,n){var i,r=this.getIndex("annotations").get(t);for(i=0;i<r.length;i++)this["delete"](r[i].id);for(this.set(t,e),i=0;i<n.length;i++)this.create(n[i])},this._create=function(t){var e=this.data.create(t);return e},this._delete=function(t){var e=this.data["delete"](t);return e},this._update=function(t,e){var n=this.data.update(t,e);return n},this._set=function(t,e){var n=this.data.set(t,e);return n}},u.extend(i),e.exports=i},{"../util/EventEmitter":298,"../util/uuid":310,"./AnchorIndex":41,"./AnnotationIndex":42,"./ContainerAnnotationIndex":46,"./ContainerSelection":47,"./Coordinate":48,"./CustomSelection":49,"./DocumentChange":51,"./DocumentIndex":52,"./DocumentNodeFactory":54,"./JSONConverter":57,"./NodeSelection":58,"./PathEventProxy":60,"./PropertySelection":62,"./Range":63,"./Selection":64,"./data/IncrementalData":69,"./documentHelpers":79,"lodash/each":230,"lodash/isArray":242,"lodash/isEqual":247,"lodash/isObject":251,"lodash/isString":253}],51:[function(t,e,n){"use strict";function i(t,e,n){if(1===arguments.length&&c(arguments[0])){var i=arguments[0];this.sha=i.sha,this.timestamp=i.timestamp,this.before=i.before,this.ops=i.ops,this.info=i.info,this.after=i.after}else{if(3!==arguments.length)throw new Error("Illegal arguments.");this.sha=m(),this.info={},this.timestamp=Date.now(),this.ops=t.slice(0),this.before=e,this.after=n}this.updated=null,this.created=null,this.deleted=null}function r(t,e){for(var n=0;n<t.ops.length;n++)for(var i=t.ops[n],r=0;r<e.ops.length;r++){var s=e.ops[r];y.transform(i,s,{inplace:!0})}t.before&&o(t.before.selection,e),t.after&&o(t.after.selection,e),e.before&&o(e.before.selection,t),e.after&&o(e.after.selection,t)}function s(t,e){u(t)||(t=[t]),u(e)||(e=[e]);for(var n=0;n<t.length;n++)for(var i=t[n],s=0;s<e.length;s++){var o=e[s];r(i,o)}}function o(t,e){if(!t||!t.isPropertySelection()&&!t.isContainerSelection())return!1;for(var n=e.ops,i=!1,r=t.isCollapsed(),s=0;s<n.length;s++){var o=n[s];i|=a(t.start,o),r?(t.isContainerSelection()&&(t.endPath=t.startPath),t.endOffset=t.startOffset):i|=a(t.end,o)}return i}function a(t,e){if(!h(e.path,t.path))return!1;var n=!1;if("update"===e.type&&"string"===e.propertyType){var i,r=e.diff;r.isInsert()&&r.pos<=t.offset?(i=t.offset+r.str.length,t.offset=i,n=!0):r.isDelete()&&r.pos<=t.offset&&(i=Math.max(r.pos,t.offset-r.str.length),t.offset=i,n=!0)}return n}var h=t("lodash/isEqual"),c=t("lodash/isObject"),u=t("lodash/isArray"),l=t("lodash/map"),f=t("lodash/forEach"),d=t("lodash/clone"),p=t("lodash/cloneDeep"),g=t("../util/oo"),m=t("../util/uuid"),v=t("./data/OperationSerializer"),y=t("./data/ObjectOperation"),_=t("./Selection");i.Prototype=function(){this._extractInformation=function(t){function e(e){var n,i,a=e.val;switch(e.type){case"create":case"delete":a.hasOwnProperty("startOffset")&&(n=a.path||a.startPath,s[n]=!0),a.hasOwnProperty("endPath")&&(n=a.endPath,s[n]=!0);break;case"update":case"set":a=t.get(e.path[0]),a&&(i=e.path[1],a.isPropertyAnnotation()?"path"!==i&&"startOffset"!==i&&"endOffset"!==i||r[a.path[0]]||(s[a.path]=!0):a.isContainerAnnotation()&&("startPath"!==i&&"startOffset"!==i&&"endPath"!==i&&"endOffset"!==i||o.push(a)));break;default:throw new Error("Illegal state")}}for(var n=this.ops,i={},r={},s={},o=[],a=0;a<n.length;a++){var h=n[a];"create"===h.type&&(i[h.val.id]=h.val,delete r[h.val.id]),"delete"===h.type&&(delete i[h.val.id],r[h.val.id]=h.val),"set"!==h.type&&"update"!==h.type||(s[h.path]=!0),e(h)}o.forEach(function(e){for(var n=t.get(e.containerId,"strict"),i=n.getPosition(e.startPath[0]),o=n.getPosition(e.endPath[0]),a=i;o>=a;a++){var h,c=n.getChildAt(a);h=c.isText()?[c.id,"content"]:[c.id],r[c.id]||(s[h]=!0)}}),Object.keys(r).length>0&&f(s,function(t,e){var n=e.split(",")[0];r[n]&&delete s[e]}),this.created=i,this.deleted=r,this.updated=s},this.invert=function(){var t=this.toJSON();t.ops=[];var e=t.before;t.before=t.after,t.after=e;for(var n=i.fromJSON(t),r=[],s=this.ops.length-1;s>=0;s--)r.push(this.ops[s].invert());return n.ops=r,n},this.isAffected=function(t){return this.updated[t]},this.isUpdated=this.isAffected,this.serialize=function(){var t=new v,e=this.toJSON();return e.ops=this.ops.map(function(e){return t.serialize(e)}),JSON.stringify(e)},this.clone=function(){return i.fromJSON(this.toJSON())},this.toJSON=function(){var t={sha:this.sha,before:d(this.before),ops:l(this.ops,function(t){return t.toJSON()}),info:this.info,after:d(this.after)};t.after.selection=void 0,t.before.selection=void 0;var e=this.before.selection;return e&&e._isSelection&&(t.before.selection=e.toJSON()),e=this.after.selection,e&&e._isSelection&&(t.after.selection=e.toJSON()),t}},g.initClass(i),i.deserialize=function(t){var e=new v,n=JSON.parse(t);return n.ops=n.ops.map(function(t){return e.deserialize(t)}),n.before.selection&&(n.before.selection=_.fromJSON(n.before.selection)),n.after.selection&&(n.after.selection=_.fromJSON(n.after.selection)),new i(n)},i.fromJSON=function(t){var e=p(t);return e.ops=t.ops.map(function(t){return y.fromJSON(t)}),e.before.selection=_.fromJSON(t.before.selection),e.after.selection=_.fromJSON(t.after.selection),new i(e)},i.transformInplace=function(t,e){s(t,e)},i.transformSelection=function(t,e){var n=t.clone(),i=o(n,e);return i?n:t},e.exports=i},{"../util/oo":305,"../util/uuid":310,"./Selection":64,"./data/ObjectOperation":74,"./data/OperationSerializer":76,"lodash/clone":228,"lodash/cloneDeep":229,"lodash/forEach":236,"lodash/isArray":242,"lodash/isEqual":247,"lodash/isObject":251,"lodash/map":259}],52:[function(t,e,n){"use strict";function i(){}var r=t("./data/NodeIndex");r.extend(i),i.filterByType=r.filterByType,e.exports=r},{"./data/NodeIndex":72}],53:[function(t,e,n){"use strict";function i(t,e){if(s.call(this,e),!t)throw new Error("Document instance is mandatory.");this.document=t}var r=t("lodash/each"),s=t("./data/Node");i.Prototype=function(){function t(t){return/([a-zA-Z_0-9]+):changed/.exec(t)}this._isDocumentNode=!0;var e=i["super"].prototype;this.getDocument=function(){return this.document},this.hasParent=function(){return Boolean(this.parent)},this.getParent=function(){return this.document.get(this.parent)},this.hasChildren=function(){return!1},this.getChildIndex=function(t){return-1},this.getChildAt=function(t){return null},this.getChildCount=function(){return 0},this.getRoot=function(){for(var t=this;t.hasParent();)t=t.getParent();return t},this.getAddressablePropertyNames=function(){var t=this.constructor["static"].addressablePropertyNames;return t||[]},this.hasAddressableProperties=function(){return this.getAddressablePropertyNames().length>0},this.getPropertyNameAt=function(t){var e=this.constructor["static"].addressablePropertyNames||[];return e[t]},this.setHighlighted=function(t,e){this.highlighted!==t&&(this.highlightedScope=e,this.highlighted=t,this.emit("highlighted",t))},this.on=function(n,i,r){var s=t(n);if(s){var o=s[1];if(this.constructor["static"].schema[o]){var a=this.getDocument();a.getEventProxy("path").on([this.id,o],i,r)}}e.on.apply(this,arguments)},this.off=function(n,i,r){var s=this.getDocument(),o=!1;if(i?o=t(i):s.getEventProxy("path").off(n),o){var a=o[1];s.getEventProxy("path").off(n,[this.id,a],r)}e.off.apply(this,arguments)},this.connect=function(t,e){console.warn("DEPRECATED: use Node.on() instead"),r(e,function(e,n){this.on(n,e,t)}.bind(this))},this.disconnect=function(t){console.warn("DEPRECATED: use Node.off() instead"),this.off(t)},this._onPropertyChange=function(t){var e=[t+":changed"].concat(Array.prototype.slice.call(arguments,1));this.emit.apply(this,e)},this.isBlock=function(){return this.constructor["static"].isBlock},this.isText=function(){return this.constructor["static"].isText},this.isPropertyAnnotation=function(){return this.constructor["static"].isPropertyAnnotation},this.isInline=function(){return this.constructor["static"].isInline},this.isContainerAnnotation=function(){return this.constructor["static"].isContainerAnnotation}},s.extend(i),i["static"].name="node",i["static"].isBlock=!1,i["static"].isText=!1,i["static"].isPropertyAnnotation=!1,i["static"].isContainerAnnotation=!1,i["static"].isInline=!1,e.exports=i},{"./data/Node":70,"lodash/each":230}],54:[function(t,e,n){"use strict";function i(t){this.doc=t}var r=t("../util/oo");i.Prototype=function(){this.create=function(t,e){var n=this.doc.schema.getNodeClass(t);
if(!n)throw new Error("No node registered by that name: "+t);return new n(this.doc,e)}},r.initClass(i),e.exports=i},{"../util/oo":305}],55:[function(t,e,n){"use strict";function i(t,e){i["super"].call(this,t,e)}var r=t("./data/Schema"),s=t("./DocumentNode"),o=t("./Container"),a=t("./PropertyAnnotation"),h=t("./ContainerAnnotation");i.Prototype=function(){this.getDefaultTextType=function(){throw new Error("DocumentSchema.getDefaultTextType() is abstract and must be overridden.")},this.isAnnotationType=function(t){var e=this.getNodeClass(t);return e&&e.prototype._isPropertyAnnotation},this.getBuiltIns=function(){return[s,a,o,h]}},r.extend(i),e.exports=i},{"./Container":43,"./ContainerAnnotation":45,"./DocumentNode":53,"./PropertyAnnotation":61,"./data/Schema":77}],56:[function(t,e,n){"use strict";function i(){this._merge={},this._mergeComponents={},this._break={}}var r=t("../util/oo");i.Prototype=function(){this.defineMerge=function(t,e,n){return this._merge[t]||(this._merge[t]={}),this._merge[t][e]=n,this},this.canMerge=function(t,e){return this._merge[t]&&this._merge[t][e]},this.getMerger=function(t,e){return this._merge[t][e]},this.defineComponentMerge=function(t,e){this._mergeComponents[t]=e},this.canMergeComponents=function(t){return this._mergeComponents[t]},this.getComponentMerger=function(t){return this._mergeComponents[t]},this.defineBreak=function(t,e){return this._break[t]=e,this},this.canBreak=function(t){return this._break[t]},this.getBreaker=function(t){return this._break[t]}},r.initClass(i),e.exports=i},{"../util/oo":305}],57:[function(t,e,n){"use strict";function i(){}var r=t("lodash/isArray"),s=t("lodash/each"),o=t("../util/oo");i.Prototype=function(){this.importDocument=function(t,e){if(!e.schema||!r(e.nodes))throw new Error("Invalid JSON format.");var n=t.getSchema();if(n.name!==e.schema.name)throw new Error("Incompatible schema.");n.version!==e.schema.version&&console.error("Different schema version. Conversion might be problematic.");var i=e.nodes;return t["import"](function(t){s(i,function(e){t.get(e.id)&&t["delete"](e.id),t.create(e)})}),t},this.exportDocument=function(t){var e=t.getSchema(),n={schema:{name:e.name,version:e.version},nodes:[]};return s(t.getNodes(),function(t){t._isDocumentNode&&n.nodes.push(t.toJSON())}),n}},o.initClass(i),e.exports=i},{"../util/oo":305,"lodash/each":230,"lodash/isArray":242}],58:[function(t,e,n){"use strict";function i(t,e,n,i,o){if(s.call(this),!r(t))throw new Error("'containerId' is mandatory.");if(!r(e))throw new Error("'nodeId' is mandatory.");if(["full","before","after"].indexOf(n)<0)throw new Error("'mode' is mandatory.");this.containerId=t,this.nodeId=e,this.mode=n,this.reverse=Boolean(i),this.surfaceId=o}var r=t("lodash/isString"),s=t("./Selection"),o=t("./Coordinate");i.Prototype=function(){this._isNodeSelection=!0;var t=i["super"].prototype;this.equals=function(e){return t.call(this,e)&&this.nodeId===e.nodeId&&this.mode===e.mode},this.isNodeSelection=function(){return!0},this.getType=function(){return"node"},this.getNodeId=function(){return this.nodeId},this.isFull=function(){return"full"===this.mode},this.isBefore=function(){return"before"===this.mode},this.isAfter=function(){return"after"===this.mode},this.isCollapsed=function(){return"full"!==this.mode},this.toJSON=function(){return{containerId:this.containerId,nodeId:this.nodeId,mode:this.mode,reverse:this.reverse,surfaceId:this.surfaceId}},this.collapse=function(t){if("left"===t)return this.isBefore()?this:new i(this.containerId,this.nodeId,"before",this.reverse,this.surfaceId);if("right"===t)return this.isAfter()?this:new i(this.containerId,this.nodeId,"after",this.reverse,this.surfaceId);throw new Error("'direction' must be either 'left' or 'right'")},this._getCoordinate=function(){return"before"===this.mode?new o([this.nodeId],0):"after"===this.mode?new o([this.nodeId],1):void 0}},s.extend(i),i.fromJSON=function(t){return new i(t.containerId,t.nodeId,t.mode,t.reverse)},i._createFromRange=function(t){var e,n=t.containerId,r=t.start.getNodeId(),s=t.start.offset,o=t.end.offset,a=t.reverse;return e=s===o?0===s?"before":"after":"full",new i(n,r,e,a)},i._createFromCoordinate=function(t){var e=t.containerId,n=t.getNodeId(),r=0===t.offset?"before":"after";return new i(e,n,r,!1)},e.exports=i},{"./Coordinate":48,"./Selection":64,"lodash/isString":253}],59:[function(t,e,n){"use strict";var i={hasChildren:function(){return!0},getChildrenProperty:function(){throw new Error("ParentNodeMixin.getChildrenProperty is abstract and must be implemented in "+this.constructor.name+".")},getChildIndex:function(t){return this[this.getChildrenProperty()].indexOf(t.id)},getChildren:function(){var t=this.getDocument(),e=this[this.getChildrenProperty()];return e.map(function(e){return t.get(e)})},getChildAt:function(t){var e=this[this.getChildrenProperty()];if(0>t||t>=e.length)throw new Error("Array index out of bounds: "+t+", "+e.length);return this.getDocument().get(e[t])},getChildCount:function(){return this[this.getChildrenProperty()].length},getAddressablePropertyNames:function(){return[this.getChildrenProperty()]}};e.exports=i},{}],60:[function(t,e,n){"use strict";function i(t){this.listeners=new h.Arrays,this._list=[],this.doc=t}var r=t("lodash/forEach"),s=t("lodash/isEqual"),o=t("lodash/isArray"),a=t("../util/oo"),h=t("../util/TreeIndex");i.Prototype=function(){this.on=function(t,e,n){this._add(n,t,e)},this.off=function(t,e,n){this._remove(t,e,n)},this.connect=function(t,e,n){console.warn("DEPRECATED: use proxy.on(path, this.onPropertyChange, this) instead"),this.on(e,n,t)},this.disconnect=function(t){console.warn("DEPRECATED: use proxy.off(this) instead"),this.off(t)},this.onDocumentChanged=function(t,e,n){if(0!==this._list.length){var i=this.listeners;r(t.updated,function(s,a){var h=i.get(a.split(","));o(h)&&(h=h.slice(0)),r(h,function(i){i.method.call(i.listener,t,e,n)})})}},this._add=function(t,e,n){if(!n)throw new Error("Invalid argument: expected function but got "+n);var i={listener:t,path:e,method:n};this.listeners.add(e,i),this._list.push(i)},this._remove=function(t,e,n){for(var i=0;i<this._list.length;i++){var r=this._list[i],o=(!e||s(r.path,e))&&(!t||r.listener===t)&&(!n||r.method!==n);if(o){var a=this._list[i];this._list.splice(i,1),this.listeners.remove(a.path,a)}}}},a.initClass(i),e.exports=i},{"../util/TreeIndex":300,"../util/oo":305,"lodash/forEach":236,"lodash/isArray":242,"lodash/isEqual":247}],61:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("lodash/isEqual"),s=t("./DocumentNode");i.Prototype=function(){this._isAnnotation=!0,this._isPropertyAnnotation=!0,this.getText=function(){var t=this.getDocument();if(!t)return console.warn("Trying to use an PropertyAnnotation which is not attached to the document."),"";var e=t.get(this.path);return e.substring(this.startOffset,this.endOffset)},this.canSplit=function(){return!0},this.isAnchor=function(){return!1},this.getSelection=function(){return this.getDocument().createSelection({type:"property",path:this.path,startOffset:this.startOffset,endOffset:this.endOffset})},this.updateRange=function(t,e){if(!e.isPropertySelection())throw new Error("Cannot change to ContainerAnnotation.");r(this.startPath,e.start.path)||t.set([this.id,"path"],e.start.path),this.startOffset!==e.start.offset&&t.set([this.id,"startOffset"],e.start.offset),this.endOffset!==e.end.offset&&t.set([this.id,"endOffset"],e.end.offset)}},s.extend(i),i["static"].name="annotation",i["static"].defineSchema({path:["string"],startOffset:"number",endOffset:"number"}),i["static"].isPropertyAnnotation=!0,Object.defineProperties(i.prototype,{startPath:{get:function(){return this.path}},endPath:{get:function(){return this.path}}}),e.exports=i},{"./DocumentNode":53,"lodash/isEqual":247}],62:[function(t,e,n){"use strict";function i(t,e,n,i,o,c){if(h.call(this),this.path=t,this.startOffset=e,this.endOffset=n,this.reverse=Boolean(i),this.containerId=o,this.surfaceId=c,!t||!a(e))throw new Error("Invalid arguments: `path` and `startOffset` are mandatory");this._internal.start=new r(this,"path","startOffset"),this._internal.end=new r(this,"path","endOffset"),this._internal.range=new s(this)}function r(t,e,n){this._sel=t,this._pathProp=e,this._offsetProp=n,Object.freeze(this)}function s(t){this._sel=t,this.start=t.start,this.end=t.end,Object.freeze(this)}var o=t("lodash/isEqual"),a=t("lodash/isNumber"),h=t("./Selection"),c=t("./Coordinate"),u=t("./Range");i.Prototype=function(){this.toJSON=function(){return{type:"property",path:this.path,startOffset:this.startOffset,endOffset:this.endOffset,reverse:this.reverse,containerId:this.containerId,surfaceId:this.surfaceId}},this.isPropertySelection=function(){return!0},this.getType=function(){return"property"},this.isNull=function(){return!1},this.isCollapsed=function(){return this.startOffset===this.endOffset},this.isReverse=function(){return this.reverse},this.equals=function(t){return h.prototype.equals.call(this,t)&&this.start.equals(t.start)&&this.end.equals(t.end)},this.toString=function(){return["PropertySelection(",JSON.stringify(this.path),", ",this.startOffset," -> ",this.endOffset,this.reverse?", reverse":"",")"].join("")},this.collapse=function(t){var e;return e="left"===t?this.startOffset:this.endOffset,this.createWithNewRange(e,e)},this.getRange=function(){return this.range},this.getPath=function(){return this.path},this.getNodeId=function(){return this.path[0]},this.getStartOffset=function(){return this.startOffset},this.getEndOffset=function(){return this.endOffset},this.isInsideOf=function(t,e){return t.isNull()?!1:t.isContainerSelection()?t.contains(this,e):e?o(this.path,t.path)&&this.startOffset>t.startOffset&&this.endOffset<t.endOffset:o(this.path,t.path)&&this.startOffset>=t.startOffset&&this.endOffset<=t.endOffset},this.contains=function(t,e){return t.isNull()?!1:t.isInsideOf(this,e)},this.overlaps=function(t,e){return t.isNull()?!1:t.isContainerSelection()?t.overlaps(this):o(this.path,t.path)?e?!(this.startOffset>=t.endOffset||this.endOffset<=t.startOffset):!(this.startOffset>t.endOffset||this.endOffset<t.startOffset):!1},this.isRightAlignedWith=function(t){return t.isNull()?!1:t.isContainerSelection()?t.isRightAlignedWith(this):o(this.path,t.path)&&this.endOffset===t.endOffset},this.isLeftAlignedWith=function(t){return t.isNull()?!1:t.isContainerSelection()?t.isLeftAlignedWith(this):o(this.path,t.path)&&this.startOffset===t.startOffset},this.expand=function(t){if(t.isNull())return this;if(t.isContainerSelection())return t.expand(this);if(!o(this.path,t.path))throw new Error("Can not expand PropertySelection to a different property.");var e=Math.min(this.startOffset,t.startOffset),n=Math.max(this.endOffset,t.endOffset);return this.createWithNewRange(e,n)},this.truncateWith=function(t){if(t.isNull())return this;if(t.isInsideOf(this,"strict"))throw new Error("Can not truncate with a contained selections");if(!this.overlaps(t))return this;var e,n;if(t.isPropertySelection())e=t.startOffset,n=t.endOffset;else{if(!t.isContainerSelection())return this;e=o(t.startPath,this.path)?t.startOffset:this.startOffset,n=o(t.endPath,this.path)?t.endOffset:this.endOffset}var i,r;if(this.startOffset>e&&this.endOffset>n)i=n,r=this.endOffset;else if(this.startOffset<e&&this.endOffset<n)i=this.startOffset,r=e;else if(this.startOffset===e){if(this.endOffset<=n)return h.nullSelection;i=n,r=this.endOffset}else{if(this.endOffset!==n){if(t.contains(this))return h.nullSelection;throw new Error("Illegal state.")}if(this.startOffset>=e)return h.nullSelection;i=this.startOffset,r=e}return this.createWithNewRange(i,r)},this.createWithNewRange=function(t,e){var n=new i(this.path,t,e,!1,this.containerId,this.surfaceId),r=this._internal.doc;return r&&n.attach(r),n},this.getFragments=function(){if(this._internal.fragments)return this._internal.fragments;var t;return t=this.isCollapsed()?[new h.Cursor(this.path,this.startOffset)]:[new h.Fragment(this.path,this.startOffset,this.endOffset)],this._internal.fragments=t,t},this._clone=function(){return new i(this.path,this.startOffset,this.endOffset,this.reverse,this.containerId,this.surfaceId)}},h.extend(i),Object.defineProperties(i.prototype,{start:{get:function(){return this._internal.start},set:function(){throw new Error("PropertySelection.prototype.start is read-only.")},enumerable:!1},end:{get:function(){return this._internal.end},set:function(){throw new Error("PropertySelection.prototype.end is read-only.")},enumerable:!1},range:{get:function(){return this._internal.range},set:function(){throw new Error("PropertySelection.prototype.range is read-only.")},enumerable:!1},startPath:{get:function(){return this.path},set:function(){throw new Error("immutable.")},enumerable:!1},endPath:{get:function(){return this.path},set:function(){throw new Error("immutable.")},enumerable:!1}}),i.fromJSON=function(t){var e=t.path,n=t.startOffset,r=t.hasOwnProperty("endOffset")?t.endOffset:t.startOffset,s=t.reverse,o=t.containerId,a=t.surfaceId;return new i(e,n,r,s,o,a)},c.extend(r),Object.defineProperties(r.prototype,{path:{get:function(){return this._sel[this._pathProp]},set:function(t){this._sel[this._pathProp]=t}},offset:{get:function(){return this._sel[this._offsetProp]},set:function(t){this._sel[this._offsetProp]=t}}}),i.CoordinateAdapter=r,u.extend(s),Object.defineProperties(s.prototype,{reverse:{get:function(){return this._sel.reverse},set:function(t){this._sel.reverse=t}},containerId:{get:function(){return this._sel.containerId},set:function(t){this._sel.containerId=t}},surfaceId:{get:function(){return this._sel.surfaceId},set:function(t){this._sel.surfaceId=t}}}),i.RangeAdapter=s,e.exports=i},{"./Coordinate":48,"./Range":63,"./Selection":64,"lodash/isEqual":247,"lodash/isNumber":250}],63:[function(t,e,n){"use strict";function i(t,e,n,i){this.start=t,this.end=e,this.reverse=Boolean(n),this.containerId=i}var r=t("../util/oo");i.Prototype=function(){this._isRange=!0,this.isCollapsed=function(){return this.start.equals(this.end)},this.equals=function(t){return this===t?!0:this.containerId===t.containerId&&this.start.equals(t.start)&&this.end.equals(t.end)},this.isReverse=function(){return this.reverse},this.toString=function(){var t=[this.start.toString(),"->",this.end.toString()];return this.isReverse()&&t.push("(reverse)"),t.join("")}},r.initClass(i),e.exports=i},{"../util/oo":305}],64:[function(t,e,n){"use strict";function i(){var t={};Object.defineProperty(this,"_internal",{enumerable:!1,value:t}),t.doc=null}var r=t("../util/oo"),s=t("../util/EventEmitter"),o=t("./Anchor");i.Prototype=function(){this._isSelection=!0,this.clone=function(){var t=this._clone();return this._internal.doc&&t.attach(this._internal.doc),t},this.getDocument=function(){var t=this._internal.doc;if(!t)throw new Error("Selection is not attached to a document.");return t},this.isAttached=function(){return Boolean(this._internal.doc)},this.attach=function(t){return this._internal.doc=t,this},this.isNull=function(){return!1},this.isPropertySelection=function(){return!1},this.isContainerSelection=function(){return!1},this.isNodeSelection=function(){return!1},this.isCustomSelection=function(){return!1},this.isCollapsed=function(){return!0},this.isReverse=function(){return!1},this.getType=function(){throw new Error("Selection.getType() is abstract.")},this.equals=function(t){return this===t?!0:t?this.isNull()!==t.isNull()?!1:this.getType()===t.getType():!1},this.toString=function(){return"null"},this.toJSON=function(){throw new Error("This method is abstract.")},this.getFragments=function(){return[]}},r.initClass(i),i.NullSelection=function(){i.call(this)},i.NullSelection.Prototype=function(){this.isNull=function(){return!0},this.getType=function(){return"null"},this.toJSON=function(){return null},this.clone=function(){return this}},i.extend(i.NullSelection),i.nullSelection=Object.freeze(new i.NullSelection),i.fromJSON=function(e){if(!e)return i.nullSelection;var n=e.type;switch(n){case"property":var r=t("./PropertySelection");return r.fromJSON(e);case"container":var s=t("./ContainerSelection");return s.fromJSON(e);case"node":var o=t("./NodeSelection");return o.fromJSON(e);case"custom":var a=t("./CustomSelection");return a.fromJSON(e);default:return i.nullSelection}},i.create=function(){throw new Error("Selection.create() has been removed as it is not possible to create selections consistently without looking into the document.")},i.Fragment=function(t,e,n,i){s.call(this),this.type="selection-fragment",this.path=t,this.startOffset=e,this.endOffset=n||e,this.full=Boolean(i)},i.Fragment.Prototype=function(){this.isAnchor=function(){return!1},this.isInline=function(){return!1},this.isPropertyFragment=function(){return!0},this.isNodeFragment=function(){return!1},this.isFull=function(){return this.full},this.isPartial=function(){return!this.full},this.getNodeId=function(){return this.path[0]}},s.extend(i.Fragment),i.NodeFragment=function(t){s.call(this),this.type="node-fragment",this.nodeId=t,this.path=[t]},i.NodeFragment.Prototype=function(){this.isAnchor=function(){return!1},this.isInline=function(){return!1},this.isPropertyFragment=function(){return!1},this.isNodeFragment=function(){return!0},this.isFull=function(){return!0},this.isPartial=function(){return!1},this.getNodeId=function(){return this.nodeId}},s.extend(i.NodeFragment),i.Cursor=function(t,e){o.call(this,t,e),this.type="cursor"},i.Cursor.Prototype=function(){this.isPropertyFragment=function(){return!1},this.isNodeFragment=function(){return!1}},o.extend(i.Cursor),e.exports=i},{"../util/EventEmitter":298,"../util/oo":305,"./Anchor":40,"./ContainerSelection":47,"./CustomSelection":49,"./NodeSelection":58,"./PropertySelection":62}],65:[function(t,e,n){"use strict";function i(t){if(u.call(this),!t||!t.type)throw new Error("Illegal argument: insufficient data.");if(this.type=t.type,this.type!==f){if(this.type!==p&&this.type!==d)throw new Error("Illegal type.");if(this.pos=t.pos,this.val=t.val,!a(this.pos)||this.pos<0)throw new Error("Illegal argument: expecting positive number as pos.")}}function r(t,e){t.pos===e.pos?e.pos+=1:t.pos<e.pos?e.pos+=1:t.pos+=1}function s(t,e){return t.pos===e.pos?(e.type=f,void(t.type=f)):void(t.pos<e.pos?e.pos-=1:t.pos-=1)}function o(t,e){if(t.type===d){var n=t;t=e,e=n}t.pos<=e.pos?e.pos+=1:t.pos-=1}var a=t("lodash/isNumber"),h=t("lodash/isEqual"),c=t("lodash/cloneDeep"),u=t("./Operation"),l=t("./Conflict"),f="NOP",d="delete",p="insert";i.fromJSON=function(t){return new i(t)},i.Prototype=function(){this._isArrayOperation=!0,this.apply=function(t){if(this.type===f)return t;if(this.type===p){if(t.length<this.pos)throw new Error("Provided array is too small.");return t.splice(this.pos,0,this.val),t}if(t.length<this.pos)throw new Error("Provided array is too small.");if(!h(t[this.pos],this.val))throw Error("Unexpected value at position "+this.pos+". Expected "+this.val+", found "+t[this.pos]);return t.splice(this.pos,1),t},this.clone=function(){var t={type:this.type,pos:this.pos,val:c(this.val)};return new i(t)},this.invert=function(){var t=this.toJSON();return this.type===f?t.type=f:this.type===p?t.type=d:t.type=p,new i(t)},this.hasConflict=function(t){return i.hasConflict(this,t)},this.toJSON=function(){var t={type:this.type};return this.type===f?t:(t.pos=this.pos,t.val=c(this.val),t)},this.isInsert=function(){return this.type===p},this.isDelete=function(){return this.type===d},this.getOffset=function(){return this.pos},this.getValue=function(){return this.val},this.isNOP=function(){return this.type===f},this.toString=function(){return["(",this.isInsert()?p:d,",",this.getOffset(),",'",this.getValue(),"')"].join("")}},u.extend(i);var g=function(t,e){return t.type===f||e.type===f?!1:t.type===p&&e.type===p?t.pos===e.pos:!1},m=function(t,e,n){if(n=n||{},n["no-conflict"]&&g(t,e))throw new l(t,e);return n.inplace||(t=t.clone(),e=e.clone()),t.type===f||e.type===f||(t.type===p&&e.type===p?r(t,e):t.type===d&&e.type===d?s(t,e):o(t,e)),[t,e]};i.transform=m,i.hasConflict=g,i.Insert=function(t,e){return new i({type:p,pos:t,val:e})},i.Delete=function(t,e){return new i({type:d,pos:t,val:e})},i.NOP=f,i.DELETE=d,i.INSERT=p,e.exports=i},{"./Conflict":66,"./Operation":75,"lodash/cloneDeep":229,"lodash/isEqual":247,"lodash/isNumber":250}],66:[function(t,e,n){"use strict";function i(t,e){Error.call(this,"Conflict: "+JSON.stringify(t)+" vs "+JSON.stringify(e)),this.a=t,this.b=e}i.prototype=Error.prototype,e.exports=i},{}],67:[function(t,e,n){"use strict";function i(t,e){h.call(this),e=e||{},this.schema=t,this.nodes=new c,this.indexes={},this.options=e||{},this.nodeFactory=e.nodeFactory||new u(t.nodeRegistry),this.__QUEUE_INDEXING__=!1,this.queue=[]}var r=t("lodash/isArray"),s=t("lodash/isString"),o=t("lodash/each"),a=t("lodash/cloneDeep"),h=t("../../util/EventEmitter"),c=t("./DataObject"),u=t("./NodeFactory");i.Prototype=function(){this.contains=function(t){return Boolean(this.nodes[t])},this.get=function(t,e){if(!t)throw new Error("Path or id required");var n=this.nodes.get(t);if(e&&void 0===n)throw s(t)?new Error("Could not find node with id '"+t+"'."):new Error("Property for path '"+t+"' us undefined.");return n},this.getNodes=function(){return this.nodes},this.create=function(t){var e=this.nodeFactory.create(t.type,t);if(!e)throw new Error("Illegal argument: could not create node for data:",t);if(this.contains(e.id))throw new Error("Node already exists: "+e.id);if(!e.id||!e.type)throw new Error("Node id and type are mandatory.");this.nodes[e.id]=e;var n={type:"create",node:e};return this.__QUEUE_INDEXING__?this.queue.push(n):this._updateIndexes(n),e},this["delete"]=function(t){var e=this.nodes[t];e.dispose(),delete this.nodes[t];var n={type:"delete",node:e};return this.__QUEUE_INDEXING__?this.queue.push(n):this._updateIndexes(n),e},this.set=function(t,e){var n=this.get(t[0]),i=this.nodes.get(t);this.nodes.set(t,e);var r={type:"set",node:n,path:t,newValue:e,oldValue:i};return this.__QUEUE_INDEXING__?this.queue.push(r):this._updateIndexes(r),i},this.update=function(t,e){var n,i=this.nodes.get(t);if(e.isOperation)n=e.apply(i);else{var o,a,h,c;if(s(i))if(e["delete"])o=e["delete"].start,a=e["delete"].end,n=i.split("").splice(o,a-o).join("");else{if(!e.insert)throw new Error("Diff is not supported:",JSON.stringify(e));h=e.insert.offset,c=e.insert.value,n=[i.substring(0,h),c,i.substring(h)].join("")}else{if(!r(i))throw new Error("Diff is not supported:",JSON.stringify(e));if(n=i.slice(0),e["delete"])h=e["delete"].offset,n.splice(h,1);else{if(!e.insert)throw new Error("Diff is not supported:",JSON.stringify(e));h=e.insert.offset,c=e.insert.value,n.splice(h,0,c)}}}this.nodes.set(t,n);var u=this.get(t[0]),l={type:"update",node:u,path:t,newValue:n,oldValue:i};return this.__QUEUE_INDEXING__?this.queue.push(l):this._updateIndexes(l),i},this.toJSON=function(){return{schema:[this.schema.id,this.schema.version],nodes:a(this.nodes)}},this.reset=function(){this.nodes.clear()},this.addIndex=function(t,e){return this.indexes[t]&&console.error("Index with name %s already exists.",t),e.reset(this),this.indexes[t]=e,e},this.getIndex=function(t){return this.indexes[t]},this._updateIndexes=function(t){t&&!this.__QUEUE_INDEXING__&&o(this.indexes,function(e){e.select(t.node)&&(e[t.type]||console.error("Contract: every NodeIndex must implement "+t.type),e[t.type](t.node,t.path,t.newValue,t.oldValue))})},this._stopIndexing=function(){this.__QUEUE_INDEXING__=!0},this._startIndexing=function(){for(this.__QUEUE_INDEXING__=!1;this.queue.length>0;){var t=this.queue.shift();this._updateIndexes(t)}}},h.extend(i),e.exports=i},{"../../util/EventEmitter":298,"./DataObject":68,"./NodeFactory":71,"lodash/cloneDeep":229,"lodash/each":230,"lodash/isArray":242,"lodash/isString":253}],68:[function(t,e,n){"use strict";function i(t){t&&(this.__root__=t)}var r=t("lodash/isString"),s=t("lodash/isArray"),o=t("lodash/get"),a=t("lodash/setWith"),h=t("lodash/unset"),c=t("../../util/oo");i.Prototype=function(){this._isDataObject=!0,this.getRoot=function(){return this.__root__?this.__root__:this},this.get=function(t){if(t){if(r(t))return this.getRoot()[t];if(arguments.length>1&&(t=Array.prototype.slice(arguments,0)),!s(t))throw new Error("Illegal argument for DataObject.get()");return o(this.getRoot(),t)}},this.set=function(t,e){if(!t)throw new Error("Illegal argument: DataObject.set(>path<, value) - path is mandatory.");r(t)?this.getRoot()[t]=e:a(this.getRoot(),t,e)},this["delete"]=function(t){if(r(t))delete this.getRoot()[t];else if(1===t.length)delete this.getRoot()[t[0]];else{var e=h(this.getRoot(),t);if(!e)throw new Error("Could not delete property at path"+t)}},this.clear=function(){var t=this.getRoot();for(var e in t)t.hasOwnProperty(e)&&delete t[e]}},c.initClass(i),e.exports=i},{"../../util/oo":305,"lodash/get":237,"lodash/isArray":242,"lodash/isString":253,"lodash/setWith":264,"lodash/unset":272}],69:[function(t,e,n){"use strict";function i(t,e){i["super"].call(this,t,e)}var r=t("lodash/isString"),s=t("lodash/isArray"),o=t("lodash/cloneDeep"),a=t("./Data"),h=t("./ObjectOperation"),c=t("./ArrayOperation"),u=t("./TextOperation");i.Prototype=function(){var t=i["super"].prototype;this.create=function(t){var e=h.Create([t.id],t);return this.apply(e),e},this["delete"]=function(t){var e=null,n=this.get(t);if(n){var i=n.toJSON();e=h.Delete([t],i),this.apply(e)}return e},this.update=function(t,e){var n=this._getDiffOp(t,e),i=h.Update(t,n);return this.apply(i),i},this.set=function(t,e){var n=this.get(t),i=h.Set(t,n,e);return this.apply(i),i},this.apply=function(e){if(e.type!==h.NOP){if(e.type===h.CREATE)t.create.call(this,o(e.val));else if(e.type===h.DELETE)t["delete"].call(this,e.val.id);else if(e.type===h.UPDATE){var n=this.get(e.path),i=e.diff;if("array"===e.propertyType)i._isArrayOperation||(i=c.fromJSON(i)),i.apply(n);else{if("string"!==e.propertyType)throw new Error("Unsupported type for operational update.");i._isTextOperation||(i=u.fromJSON(i));var r=i.apply(n);t.set.call(this,e.path,r)}}else{if(e.type!==h.SET)throw new Error("Illegal state.");t.set.call(this,e.path,e.val)}this.emit("operation:applied",e,this)}},this._getDiffOp=function(t,e){var n=null;if(e.isOperation)n=e;else{var i,o,a,h,l=this.get(t);if(null===l||void 0===l)throw new Error("Property has not been initialized: "+JSON.stringify(t));r(l)?e["delete"]?(i=e["delete"].start,o=e["delete"].end,n=u.Delete(i,l.substring(i,o))):e.insert&&(a=e.insert.offset,h=e.insert.value,n=u.Insert(a,h)):s(l)&&(e["delete"]?(a=e["delete"].offset,n=c.Delete(a,l[a])):e.insert&&(a=e.insert.offset,h=e.insert.value,n=c.Insert(a,h)))}if(!n)throw new Error("Unsupported diff: "+JSON.stringify(e));return n}},a.extend(i),e.exports=i},{"./ArrayOperation":65,"./Data":67,"./ObjectOperation":74,"./TextOperation":78,"lodash/cloneDeep":229,"lodash/isArray":242,"lodash/isString":253}],70:[function(t,e,n){"use strict";function i(t){y.call(this);var e=this.constructor;if(!e["static"].name)throw new Error('Every NodeClass must provide a static property "name".');m(e["static"].schema,function(e,n){var i=void 0!==t[n],r=e.hasOwnProperty("default"),s=e.optional;if(!s&&!r&&!i)throw new Error("Property "+n+" is mandatory for node type "+this.type);i?this[n]=c(e,t[n]):r&&(this[n]=g(c(e,e["default"])))}.bind(this))}function r(t,e){var n=s(e);if(t["static"].schema=a(t,n),t["static"].defaultProps=h(t),!t["static"].hasOwnProperty("addressablePropertyNames")){var i=[];m(t["static"].schema,function(t,e){"string"===t.type&&t.addressable===!0&&i.push(e)}),t["static"].addressablePropertyNames=i}}function s(t){var e={};return m(t,function(t,n){(f(t)||d(t))&&(t={type:t}),t=o(t),t.name=n,e[n]=t}),e}function o(t){var e=t;return d(t.type)&&"array"!==t[0]?t.type=["array",t.type[0]]:"text"===t.type&&(e={type:"string",addressable:!0,"default":""}),e}function a(t,e){for(var n=[e],i=t;i;){var r=Object.getPrototypeOf(i.prototype);if(!r)break;i=r.constructor,i&&i["static"]&&i["static"].schema&&n.unshift(i["static"].schema)}return n.unshift({}),v.apply(null,n)}function h(t){var e=t["static"].unfoldedSchema,n={};return m(e,function(t,e){t.hasOwnProperty("default")&&(n[e]=t["default"])}),n}function c(t,e){var n;if(n=d(t.type)?"array":t.type,null===e){if(t.notNull)throw new Error("Value for property "+t.name+" is null.");return e}if(void 0===e)throw new Error("Value for property "+t.name+" is undefined.");if("string"===n&&!f(e)||"boolean"===n&&!u(e)||"number"===n&&!l(e)||"array"===n&&!d(e)||"id"===n&&!f(e)||"object"===n&&!p(e))throw new Error("Illegal value type for property "+t.name+": expected "+n+", was "+typeof e);return e}var u=t("lodash/isBoolean"),l=t("lodash/isNumber"),f=t("lodash/isString"),d=t("lodash/isArray"),p=t("lodash/isObject"),g=t("lodash/cloneDeep"),m=t("lodash/each"),v=t("lodash/extend"),y=t("../../util/EventEmitter");i.Prototype=function(){this._isNode=!0,this.dispose=function(){},this.isInstanceOf=function(t){return i.isInstanceOf(this.constructor,t)},this.getTypeNames=function(){for(var t=[],e=this.constructor["static"];e&&"node"!==e.name;)t.push(e.name),e=Object.getPrototypeOf(e);return t},this.getPropertyType=function(t){var e=this.constructor["static"].schema;return e[t].type},this.toJSON=function(){var t={type:this.constructor["static"].name};return m(this.constructor["static"].schema,function(e,n){t[e.name]=this[n]}.bind(this)),t}},y.extend(i),i["static"].name="node",i["static"].defineSchema=function(t){var e=this.__class__;r(e,t)},i["static"].defineSchema({id:"string"}),Object.defineProperty(i.prototype,"type",{configurable:!1,get:function(){return this.constructor["static"].name},set:function(){throw new Error('Property "type" is read-only.')}}),i.isInstanceOf=function(t,e){for(var n=t["static"];n&&"node"!==n.name;){if(n&&n.name===e)return!0;n=Object.getPrototypeOf(n)}return!1},i["static"].isInstanceOf=i.isInstanceOf,e.exports=i},{"../../util/EventEmitter":298,"lodash/cloneDeep":229,"lodash/each":230,"lodash/extend":232,"lodash/isArray":242,"lodash/isBoolean":245,"lodash/isNumber":250,"lodash/isObject":251,"lodash/isString":253}],71:[function(t,e,n){"use strict";function i(t){this.nodeRegistry=t}var r=t("../../util/oo");i.Prototype=function(){this.create=function(t,e){var n=this.nodeRegistry.get(t);if(!n)throw new Error("No Node registered by that name: "+t);return new n(e)}},r.initClass(i),e.exports=i},{"../../util/oo":305}],72:[function(t,e,n){"use strict";function i(){this.index=new h}var r=t("../../util/oo"),s=t("lodash/isArray"),o=t("lodash/each"),a=t("lodash/extend"),h=t("../../util/TreeIndex");i.Prototype=function(){this.get=function(t){return this.index.get(t)||{}},this.getAll=function(t){return this.index.getAll(t)},this.property="id",this.select=function(t){return this.type?t.isInstanceOf(this.type):!0},this.create=function(t){var e=t[this.property];s(e)||(e=[e]),o(e,function(e){this.index.set([e,t.id],t)}.bind(this))},this["delete"]=function(t){var e=t[this.property];s(e)||(e=[e]),o(e,function(e){this.index["delete"]([e,t.id])}.bind(this))},this.update=function(t,e,n,i){if(this.select(t)&&e[1]===this.property){var r=i;s(r)||(r=[r]),o(r,function(e){this.index["delete"]([e,t.id])}.bind(this)),r=n,s(r)||(r=[r]),o(r,function(e){this.index.set([e,t.id],t)}.bind(this))}},this.set=function(t,e,n,i){this.update(t,e,n,i)},this.reset=function(t){this.index.clear(),this._initialize(t)},this.clone=function(){var t=this.constructor,e=new t;return e},this._initialize=function(t){o(t.getNodes(),function(t){this.select(t)&&this.create(t)}.bind(this))}},r.initClass(i),i.create=function(t){var e=a(new i,t);return e.clone=function(){return i.create(t)},e},i.filterByType=function(t){return function(e){return e.isInstanceOf(t)}},e.exports=i},{"../../util/TreeIndex":300,"../../util/oo":305,"lodash/each":230,"lodash/extend":232,"lodash/isArray":242}],73:[function(t,e,n){"use strict";function i(){r.call(this)}var r=t("../../util/Registry");i.Prototype=function(){this.register=function(t){var e=t["static"]&&t["static"].name;if("string"!=typeof e||""===e)throw new Error("Node names must be strings and must not be empty");
if(!t.prototype._isNode)throw new Error("Nodes must be subclasses of Substance.Data.Node");if(this.contains(e))throw new Error("Node class is already registered: "+e);this.add(e,t)}},r.extend(i),e.exports=i},{"../../util/Registry":299}],74:[function(t,e,n){"use strict";function i(t){if(h.call(this),!t)throw new Error("Data of ObjectOperation is missing.");if(!t.type)throw new Error("Invalid data: type is mandatory.");if(this.type=t.type,t.type!==f){if(this.path=t.path,!t.path)throw new Error("Invalid data: path is mandatory.");if(this.type===d||this.type===p){if(!t.val)throw new Error("Invalid data: value is missing.");this.val=t.val}else if(this.type===g){if(!t.diff)throw new Error("Invalid data: diff is mandatory for update operation.");if(this.diff=t.diff,t.diff._isTextOperation)this.propertyType="string";else{if(!t.diff._isArrayOperation)throw new Error("Invalid data: diff must be a TextOperation or an ArrayOperation.");this.propertyType="array"}}else{if(this.type!==m)throw new Error("Invalid type: "+t.type);this.val=t.val,this.original=t.original}}}var r=t("lodash/isString"),s=t("lodash/isEqual"),o=t("lodash/cloneDeep"),a=t("./DataObject"),h=t("./Operation"),c=t("./TextOperation"),u=t("./ArrayOperation"),l=t("./Conflict"),f="NOP",d="create",p="delete",g="update",m="set";i.fromJSON=function(t){if(t=o(t),"update"===t.type)switch(t.propertyType){case"string":t.diff=c.fromJSON(t.diff);break;case"array":t.diff=u.fromJSON(t.diff);break;default:throw new Error("Unsupported update diff:"+JSON.stringify(t.diff))}var e=new i(t);return e},i.Prototype=function(){this._isObjectOperation=!0,this.apply=function(t){if(this.type===f)return t;var e;if(e=t._isDataObject?t:new a(t),this.type===d)return e.set(this.path,o(this.val)),t;if(this.type===p)e["delete"](this.path,"strict");else if(this.type===g){var n,i=this.diff,r=e.get(this.path);n=i._isArrayOperation?i.apply(r):i.apply(r),e.set(this.path,n)}else e.set(this.path,o(this.val));return t},this.clone=function(){var t={type:this.type,path:this.path};return this.val&&(t.val=o(this.val)),this.diff&&(t.diff=this.diff.clone()),new i(t)},this.isNOP=function(){return this.type===f?!0:this.type===g?this.diff.isNOP():void 0},this.isCreate=function(){return this.type===d},this.isDelete=function(){return this.type===p},this.isUpdate=function(t){return t?this.type===g&&this.propertyType===t:this.type===g},this.isSet=function(){return this.type===m},this.invert=function(){if(this.type===f)return new i({type:f});var t=new i(this);if(this.type===d)t.type=p;else if(this.type===p)t.type=d;else if(this.type===g){var e;e=this.diff._isTextOperation?c.fromJSON(this.diff.toJSON()).invert():u.fromJSON(this.diff.toJSON()).invert(),t.diff=e}else t.val=this.original,t.original=this.val;return t},this.hasConflict=function(t){return i.hasConflict(this,t)},this.toJSON=function(){if(this.type===f)return{type:f};var t={type:this.type,path:this.path};return this.type===d||this.type===p?t.val=this.val:this.type===g?(this.diff._isArrayOperation?t.propertyType="array":t.propertyType="string",t.diff=this.diff.toJSON()):(t.val=this.val,t.original=this.original),t},this.getType=function(){return this.type},this.getPath=function(){return this.path},this.getValue=function(){return this.val},this.getOldValue=function(){return this.original},this.getValueOp=function(){return this.diff},this.toString=function(){switch(this.type){case d:return["(+,",JSON.stringify(this.path),JSON.stringify(this.val),")"].join("");case p:return["(-,",JSON.stringify(this.path),JSON.stringify(this.val),")"].join("");case g:return["(>>,",JSON.stringify(this.path),this.propertyType,this.diff.toString(),")"].join("");case m:return["(=,",JSON.stringify(this.path),this.val,this.original,")"].join("");case f:return"NOP";default:throw new Error("Invalid type")}}},h.extend(i);var v=function(t,e){return t.type===f||e.type===f?!1:s(t.path,e.path)},y=function(t,e){t.type=f,e.type=f},_=function(){throw new Error("Can not transform two concurring creates of the same property")},w=function(){throw new Error("Illegal state: can not create and delete a value at the same time.")},b=function(t,e,n){if(t.type!==p)return b(e,t,!0);var i;i="string"===e.propertyType?c.fromJSON(e.diff):u.fromJSON(e.diff),n?(t.val=i.apply(t.val),e.type=f):(t.type=f,e.type=d,e.val=i.apply(t.val))},C=function(){throw new Error("Can not transform a concurring create and update of the same property")},x=function(t,e){var n,i,r;"string"===e.propertyType?(n=c.fromJSON(t.diff),i=c.fromJSON(e.diff),r=c.transform(n,i,{inplace:!0})):(n=u.fromJSON(t.diff),i=u.fromJSON(e.diff),r=u.transform(n,i,{inplace:!0})),t.diff=r[0],e.diff=r[1]},E=function(){throw new Error("Illegal state: can not create and set a value at the same time.")},O=function(t,e,n){return t.type!==p?O(e,t,!0):void(n?(t.val=e.val,e.type=f):(t.type=f,e.type=d,e.original=void 0))},P=function(){throw new Error("Unresolvable conflict: update + set.")},N=function(t,e){t.type=f,e.original=t.val},S=0,I=1,A=2,T=4,M=8,D={};D[f]=S,D[d]=I,D[p]=A,D[g]=T,D[m]=M;var j=[];j[A|A]=y,j[A|I]=w,j[A|T]=b,j[I|I]=_,j[I|T]=C,j[T|T]=x,j[I|M]=E,j[A|M]=O,j[T|M]=P,j[M|M]=N;var L=function(t,e,n){if(n=n||{},n["no-conflict"]&&v(t,e))throw new l(t,e);if(n.inplace||(t=t.clone(),e=e.clone()),t.isNOP()||e.isNOP())return[t,e];var i=s(t.path,e.path);return i&&j[D[t.type]|D[e.type]](t,e),[t,e]};i.transform=L,i.hasConflict=v,i.Create=function(t,e){var n;return n=r(t)?[t]:t,new i({type:d,path:n,val:e})},i.Delete=function(t,e){var n;return n=r(t)?[t]:t,new i({type:p,path:n,val:e})},i.Update=function(t,e){return new i({type:g,path:t,diff:e})},i.Set=function(t,e,n){return new i({type:m,path:t,val:o(n),original:o(e)})},i.NOP=f,i.CREATE=d,i.DELETE=p,i.UPDATE=g,i.SET=m,e.exports=i},{"./ArrayOperation":65,"./Conflict":66,"./DataObject":68,"./Operation":75,"./TextOperation":78,"lodash/cloneDeep":229,"lodash/isEqual":247,"lodash/isString":253}],75:[function(t,e,n){"use strict";function i(){}var r=t("../../util/oo");i.Prototype=function(){this.isOperation=!0},r.initClass(i),e.exports=i},{"../../util/oo":305}],76:[function(t,e,n){"use strict";function i(){this.SEPARATOR="	"}function r(t,e){s(arguments[0])?this.tokens=arguments[0]:this.tokens=t.split(e),this.pos=-1}var s=t("lodash/isArray"),o=t("lodash/isNumber"),a=t("lodash/isObject"),h=t("../../util/oo"),c=t("./ObjectOperation"),u=t("./TextOperation"),l=t("./ArrayOperation");i.Prototype=function(){this.serialize=function(t){var e=[];switch(t.type){case"create":e.push("c"),e.push(t.val.id),e.push(t.val);break;case"delete":e.push("d"),e.push(t.val.id),e.push(t.val);break;case"set":e.push("s"),e.push(t.path.join(".")),e.push(t.val),e.push(t.original);break;case"update":e.push("u"),e.push(t.path.join(".")),Array.prototype.push.apply(e,this.serializePrimitiveOp(t.diff));break;default:throw new Error("Unsupported operation type.")}return e},this.serializePrimitiveOp=function(t){var e=[];if(t._isTextOperation)t.isInsert()?e.push("t+"):t.isDelete()&&e.push("t-"),e.push(t.pos),e.push(t.str);else{if(!t._isArrayOperation)throw new Error("Unsupported operation type.");t.isInsert()?e.push("a+"):t.isDelete()&&e.push("a-"),e.push(t.pos),e.push(t.val)}return e},this.deserialize=function(t,e){e||(e=new r(t,this.SEPARATOR));var n,i,s,o,a,h=e.getString();switch(h){case"c":i=e.getPath(),s=e.getObject(),n=c.Create(i,s);break;case"d":i=e.getPath(),s=e.getObject(),n=c.Delete(i,s);break;case"s":i=e.getPath(),s=e.getAny(),o=e.getAny(),n=c.Set(i,o,s);break;case"u":i=e.getPath(),a=this.deserializePrimitiveOp(t,e),n=c.Update(i,a);break;default:throw new Error("Illegal type for ObjectOperation: "+h)}return n},this.deserializePrimitiveOp=function(t,e){e||(e=new r(t,this.SEPARATOR));var n,i,s,o=e.getString();switch(o){case"t+":i=e.getNumber(),s=e.getString(),n=u.Insert(i,s);break;case"t-":i=e.getNumber(),s=e.getString(),n=u.Delete(i,s);break;case"a+":i=e.getNumber(),s=e.getAny(),n=l.Insert(i,s);break;case"a-":i=e.getNumber(),s=e.getAny(),n=l.Delete(i,s);break;default:throw new Error("Unsupported operation type: "+o)}return n}},h.initClass(i),r.Prototype=function(){this.error=function(t){throw new Error("Parsing error: "+t+"\n"+this.tokens[this.pos])},this.getString=function(){this.pos++;var t=this.tokens[this.pos];return'"'===t[0]&&(t=t.slice(1,-1)),t},this.getNumber=function(){this.pos++;var t,e=this.tokens[this.pos];try{return t=o(e)?e:parseInt(this.tokens[this.pos],10)}catch(n){this.error("expected number")}},this.getObject=function(){this.pos++;var t,e=this.tokens[this.pos];try{return t=a(e)?e:JSON.parse(this.tokens[this.pos])}catch(n){this.error("expected object")}},this.getAny=function(){this.pos++;var t=this.tokens[this.pos];return t},this.getPath=function(){var t=this.getString();return t.split(".")}},h.initClass(r),i.Tokenizer=r,e.exports=i},{"../../util/oo":305,"./ArrayOperation":65,"./ObjectOperation":74,"./TextOperation":78,"lodash/isArray":242,"lodash/isNumber":250,"lodash/isObject":251}],77:[function(t,e,n){"use strict";function i(t,e){this.name=t,this.version=e,this.nodeRegistry=new o,this.tocTypes=[],this.addNodes(this.getBuiltIns())}var r=t("lodash/each"),s=t("../../util/oo"),o=t("./NodeRegistry"),a=t("./Node");i.Prototype=function(){this.addNodes=function(t){t&&r(t,function(t){t.prototype._isNode?this.addNode(t):console.error("Illegal node class: ",t)}.bind(this))},this.addNode=function(t){this.nodeRegistry.register(t),t["static"].tocType&&this.tocTypes.push(t["static"].name)},this.getNodeClass=function(t){return this.nodeRegistry.get(t)},this.getBuiltIns=function(){return[]},this.isInstanceOf=function(t,e){var n=this.getNodeClass(t);return n?a["static"].isInstanceOf(n,e):!1},this.each=function(){this.nodeRegistry.each.apply(this.nodeRegistry,arguments)},this.getTocTypes=function(){return this.tocTypes},this.getDefaultTextType=function(){throw new Error("Schmema.prototype.getDefaultTextType() must be overridden.")},this.getNodeSchema=function(t){var e=this.getNodeClass(t);return e?e["static"].schema:(console.error("Unknown node type ",t),null)}},s.initClass(i),e.exports=i},{"../../util/oo":305,"./Node":70,"./NodeRegistry":73,"lodash/each":230}],78:[function(t,e,n){"use strict";function i(t){if(u.call(this),!t||void 0===t.type||void 0===t.pos||void 0===t.str)throw new Error("Illegal argument: insufficient data.");if(this.type=t.type,this.pos=t.pos,this.str=t.str,!this.isInsert()&&!this.isDelete())throw new Error("Illegal type.");if(!h(this.str))throw new Error("Illegal argument: expecting string.");if(!c(this.pos)||this.pos<0)throw new Error("Illegal argument: expecting positive number as pos.")}function r(t,e){t.pos===e.pos?e.pos+=t.str.length:t.pos<e.pos?e.pos+=t.str.length:t.pos+=e.str.length}function s(t,e,n){if(t.pos>e.pos)return s(e,t,!n);if(t.pos===e.pos&&t.str.length>e.str.length)return s(e,t,!n);if(e.pos<t.pos+t.str.length){var i=e.pos-t.pos,r=t.str.length-i,o=i+e.str.length;t.str=t.str.slice(0,i)+t.str.slice(o),e.str=e.str.slice(r),e.pos-=i}else e.pos-=t.str.length}function o(t,e){if(t.type===d)return o(e,t);if(t.pos<=e.pos)e.pos+=t.str.length;else if(t.pos>=e.pos+e.str.length)t.pos-=e.str.length;else{var n=t.pos-e.pos;e.str=e.str.slice(0,n)+t.str+e.str.slice(n),t.str=""}}var a,h=t("lodash/isString"),c=t("lodash/isNumber"),u=t("./Operation"),l=t("./Conflict"),f="insert",d="delete";i.fromJSON=function(t){return new i(t)},i.Prototype=function(){this._isTextOperation=!0,this.apply=function(t){if(this.isEmpty())return t;if(this.type===f){if(t.length<this.pos)throw new Error("Provided string is too short.");return t.splice?t.splice(this.pos,0,this.str):t.slice(0,this.pos).concat(this.str).concat(t.slice(this.pos))}if(t.length<this.pos+this.str.length)throw new Error("Provided string is too short.");return t.splice?t.splice(this.pos,this.str.length):t.slice(0,this.pos).concat(t.slice(this.pos+this.str.length))},this.clone=function(){return new i(this)},this.isNOP=function(){return"NOP"===this.type||0===this.str.length},this.isInsert=function(){return this.type===f},this.isDelete=function(){return this.type===d},this.getLength=function(){return this.str.length},this.invert=function(){var t={type:this.isInsert()?d:f,pos:this.pos,str:this.str};return new i(t)},this.hasConflict=function(t){return a(this,t)},this.isEmpty=function(){return 0===this.str.length},this.toJSON=function(){return{type:this.type,pos:this.pos,str:this.str}},this.toString=function(){return["(",this.isInsert()?f:d,",",this.pos,",'",this.str,"')"].join("")}},u.extend(i),a=function(t,e){if(t.type===f&&e.type===f)return t.pos===e.pos;if(t.type===d&&e.type===d)return!(t.pos>=e.pos+e.str.length||e.pos>=t.pos+t.str.length);var n,i;return t.type===d?(n=t,i=e):(n=e,i=t),i.pos>=n.pos&&i.pos<n.pos+n.str.length};var p=function(t,e,n){if(n=n||{},n["no-conflict"]&&a(t,e))throw new l(t,e);return n.inplace||(t=t.clone(),e=e.clone()),t.type===f&&e.type===f?r(t,e):t.type===d&&e.type===d?s(t,e,!0):o(t,e),[t,e]};i.transform=function(){return p.apply(null,arguments)},i.Insert=function(t,e){return new i({type:f,pos:t,str:e})},i.Delete=function(t,e){return new i({type:d,pos:t,str:e})},i.INSERT=f,i.DELETE=d,e.exports=i},{"./Conflict":66,"./Operation":75,"lodash/isNumber":250,"lodash/isString":253}],79:[function(t,e,n){"use strict";var i=t("lodash/isString"),r=t("lodash/filter"),s=t("./DocumentIndex"),o=t("./Selection"),a={};a.isContainerAnnotation=function(t,e){var n=t.getSchema();return n.isInstanceOf(e,"container-annotation")},a.getPropertyAnnotationsForSelection=function(t,e,n){if(n=n||{},!e.isPropertySelection())return[];var i=t.getIndex("annotations").get(e.path,e.startOffset,e.endOffset);return n.type&&(i=r(i,s.filterByType(n.type))),i},a.getContainerAnnotationsForSelection=function(t,e,n,i){if(!n)throw new Error("'containerId' is required.");i=i||{};var s=t.getIndex("container-annotations"),o=s.get(n,i.type);return o=r(o,function(t){return e.overlaps(t.getSelection())})},a.getAnnotationsForSelection=function(t,e,n,i){var r,s=a.isContainerAnnotation(t,n);if(s){var o=t.get(i,"strict");r=a.getContainerAnnotationsForSelection(t,e,o,{type:n})}else r=a.getPropertyAnnotationsForSelection(t,e,{type:n});return r},a.getTextForSelection=function(t,e){var n;if(!e||e.isNull())return"";if(e.isPropertySelection())return n=t.get(e.start.path),n.substring(e.start.offset,e.end.offset);if(e.isContainerSelection()){var r=[],s=e.getFragments();return s.forEach(function(e){if(e instanceof o.Fragment){var n=t.get(e.path);i(n)&&r.push(n.substring(e.startOffset,e.endOffset))}}),r.join("\n")}},e.exports=a},{"./DocumentIndex":52,"./Selection":64,"lodash/filter":233,"lodash/isString":253}],80:[function(t,e,n){},{}],81:[function(t,e,n){var i=t("./_getNative"),r=t("./_root"),s=i(r,"DataView");e.exports=s},{"./_getNative":173,"./_root":215}],82:[function(t,e,n){function i(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=t("./_hashClear"),s=t("./_hashDelete"),o=t("./_hashGet"),a=t("./_hashHas"),h=t("./_hashSet");i.prototype.clear=r,i.prototype["delete"]=s,i.prototype.get=o,i.prototype.has=a,i.prototype.set=h,e.exports=i},{"./_hashClear":180,"./_hashDelete":181,"./_hashGet":182,"./_hashHas":183,"./_hashSet":184}],83:[function(t,e,n){function i(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=t("./_listCacheClear"),s=t("./_listCacheDelete"),o=t("./_listCacheGet"),a=t("./_listCacheHas"),h=t("./_listCacheSet");i.prototype.clear=r,i.prototype["delete"]=s,i.prototype.get=o,i.prototype.has=a,i.prototype.set=h,e.exports=i},{"./_listCacheClear":201,"./_listCacheDelete":202,"./_listCacheGet":203,"./_listCacheHas":204,"./_listCacheSet":205}],84:[function(t,e,n){var i=t("./_getNative"),r=t("./_root"),s=i(r,"Map");e.exports=s},{"./_getNative":173,"./_root":215}],85:[function(t,e,n){function i(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=t("./_mapCacheClear"),s=t("./_mapCacheDelete"),o=t("./_mapCacheGet"),a=t("./_mapCacheHas"),h=t("./_mapCacheSet");i.prototype.clear=r,i.prototype["delete"]=s,i.prototype.get=o,i.prototype.has=a,i.prototype.set=h,e.exports=i},{"./_mapCacheClear":206,"./_mapCacheDelete":207,"./_mapCacheGet":208,"./_mapCacheHas":209,"./_mapCacheSet":210}],86:[function(t,e,n){var i=t("./_getNative"),r=t("./_root"),s=i(r,"Promise");e.exports=s},{"./_getNative":173,"./_root":215}],87:[function(t,e,n){var i=t("./_root"),r=i.Reflect;e.exports=r},{"./_root":215}],88:[function(t,e,n){var i=t("./_getNative"),r=t("./_root"),s=i(r,"Set");e.exports=s},{"./_getNative":173,"./_root":215}],89:[function(t,e,n){function i(t){var e=-1,n=t?t.length:0;for(this.__data__=new r;++e<n;)this.add(t[e])}var r=t("./_MapCache"),s=t("./_setCacheAdd"),o=t("./_setCacheHas");i.prototype.add=i.prototype.push=s,i.prototype.has=o,e.exports=i},{"./_MapCache":85,"./_setCacheAdd":216,"./_setCacheHas":217}],90:[function(t,e,n){function i(t){this.__data__=new r(t)}var r=t("./_ListCache"),s=t("./_stackClear"),o=t("./_stackDelete"),a=t("./_stackGet"),h=t("./_stackHas"),c=t("./_stackSet");i.prototype.clear=s,i.prototype["delete"]=o,i.prototype.get=a,i.prototype.has=h,i.prototype.set=c,e.exports=i},{"./_ListCache":83,"./_stackClear":219,"./_stackDelete":220,"./_stackGet":221,"./_stackHas":222,"./_stackSet":223}],91:[function(t,e,n){var i=t("./_root"),r=i.Symbol;e.exports=r},{"./_root":215}],92:[function(t,e,n){var i=t("./_root"),r=i.Uint8Array;e.exports=r},{"./_root":215}],93:[function(t,e,n){var i=t("./_getNative"),r=t("./_root"),s=i(r,"WeakMap");e.exports=s},{"./_getNative":173,"./_root":215}],94:[function(t,e,n){function i(t,e){return t.set(e[0],e[1]),t}e.exports=i},{}],95:[function(t,e,n){function i(t,e){return t.add(e),t}e.exports=i},{}],96:[function(t,e,n){function i(t,e,n){var i=n.length;switch(i){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}e.exports=i},{}],97:[function(t,e,n){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i&&e(t[n],n,t)!==!1;);return t}e.exports=i},{}],98:[function(t,e,n){function i(t,e){for(var n=-1,i=t?t.length:0,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}e.exports=i},{}],99:[function(t,e,n){function i(t,e){var n=t?t.length:0;return!!n&&r(t,e,0)>-1}var r=t("./_baseIndexOf");e.exports=i},{"./_baseIndexOf":121}],100:[function(t,e,n){function i(t,e,n){for(var i=-1,r=t?t.length:0;++i<r;)if(n(e,t[i]))return!0;return!1}e.exports=i},{}],101:[function(t,e,n){function i(t,e){for(var n=-1,i=t?t.length:0,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}e.exports=i},{}],102:[function(t,e,n){function i(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}e.exports=i},{}],103:[function(t,e,n){function i(t,e,n,i){var r=-1,s=t?t.length:0;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}e.exports=i},{}],104:[function(t,e,n){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}e.exports=i},{}],105:[function(t,e,n){function i(t,e,n){var i=t[e];o.call(t,e)&&r(i,n)&&(void 0!==n||e in t)||(t[e]=n)}var r=t("./eq"),s=Object.prototype,o=s.hasOwnProperty;e.exports=i},{"./eq":231}],106:[function(t,e,n){function i(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}var r=t("./eq");e.exports=i},{"./eq":231}],107:[function(t,e,n){function i(t,e){return t&&r(e,s(e),t)}var r=t("./_copyObject"),s=t("./keys");e.exports=i},{"./_copyObject":158,"./keys":256}],108:[function(t,e,n){function i(t,e,n,C,x,E,O){var S;if(C&&(S=E?C(t,x,E,O):C(t)),void 0!==S)return S;if(!_(t))return t;var I=m(t);if(I){if(S=d(t),!e)return c(t,S)}else{var T=f(t),M=T==P||T==N;if(v(t))return h(t,e);if(T==A||T==b||M&&!E){if(y(t))return E?t:{};if(S=g(M?{}:t),!e)return u(t,a(S,t))}else{if(!W[T])return E?t:{};S=p(t,T,i,e)}}O||(O=new r);var D=O.get(t);if(D)return D;if(O.set(t,S),!I)var j=n?l(t):w(t);return s(j||t,function(r,s){j&&(s=r,r=t[s]),o(S,s,i(r,e,n,C,s,t,O))}),S}var r=t("./_Stack"),s=t("./_arrayEach"),o=t("./_assignValue"),a=t("./_baseAssign"),h=t("./_cloneBuffer"),c=t("./_copyArray"),u=t("./_copySymbols"),l=t("./_getAllKeys"),f=t("./_getTag"),d=t("./_initCloneArray"),p=t("./_initCloneByTag"),g=t("./_initCloneObject"),m=t("./isArray"),v=t("./isBuffer"),y=t("./_isHostObject"),_=t("./isObject"),w=t("./keys"),b="[object Arguments]",C="[object Array]",x="[object Boolean]",E="[object Date]",O="[object Error]",P="[object Function]",N="[object GeneratorFunction]",S="[object Map]",I="[object Number]",A="[object Object]",T="[object RegExp]",M="[object Set]",D="[object String]",j="[object Symbol]",L="[object WeakMap]",k="[object ArrayBuffer]",R="[object DataView]",F="[object Float32Array]",B="[object Float64Array]",H="[object Int8Array]",V="[object Int16Array]",U="[object Int32Array]",q="[object Uint8Array]",J="[object Uint8ClampedArray]",z="[object Uint16Array]",$="[object Uint32Array]",W={};W[b]=W[C]=W[k]=W[R]=W[x]=W[E]=W[F]=W[B]=W[H]=W[V]=W[U]=W[S]=W[I]=W[A]=W[T]=W[M]=W[D]=W[j]=W[q]=W[J]=W[z]=W[$]=!0,W[O]=W[P]=W[L]=!1,e.exports=i},{"./_Stack":90,"./_arrayEach":97,"./_assignValue":105,"./_baseAssign":107,"./_cloneBuffer":148,"./_copyArray":157,"./_copySymbols":159,"./_getAllKeys":168,"./_getTag":177,"./_initCloneArray":187,"./_initCloneByTag":188,"./_initCloneObject":189,"./_isHostObject":192,"./isArray":242,"./isBuffer":246,"./isObject":251,"./keys":256}],109:[function(t,e,n){function i(t){return r(t)?s(t):{}}var r=t("./isObject"),s=Object.create;e.exports=i},{"./isObject":251}],110:[function(t,e,n){function i(t,e,n,i){var l=-1,f=s,d=!0,p=t.length,g=[],m=e.length;if(!p)return g;n&&(e=a(e,h(n))),i?(f=o,d=!1):e.length>=u&&(f=c,d=!1,e=new r(e));t:for(;++l<p;){var v=t[l],y=n?n(v):v;if(v=i||0!==v?v:0,d&&y===y){for(var _=m;_--;)if(e[_]===y)continue t;g.push(v)}else f(e,y,i)||g.push(v)}return g}var r=t("./_SetCache"),s=t("./_arrayIncludes"),o=t("./_arrayIncludesWith"),a=t("./_arrayMap"),h=t("./_baseUnary"),c=t("./_cacheHas"),u=200;e.exports=i},{"./_SetCache":89,"./_arrayIncludes":99,"./_arrayIncludesWith":100,"./_arrayMap":101,"./_baseUnary":141,"./_cacheHas":144}],111:[function(t,e,n){var i=t("./_baseForOwn"),r=t("./_createBaseEach"),s=r(i);e.exports=s},{"./_baseForOwn":116,"./_createBaseEach":162}],112:[function(t,e,n){function i(t,e){var n=[];return r(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}var r=t("./_baseEach");e.exports=i},{"./_baseEach":111}],113:[function(t,e,n){function i(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}e.exports=i},{}],114:[function(t,e,n){function i(t,e,n,o,a){var h=-1,c=t.length;for(n||(n=s),a||(a=[]);++h<c;){var u=t[h];e>0&&n(u)?e>1?i(u,e-1,n,o,a):r(a,u):o||(a[a.length]=u)}return a}var r=t("./_arrayPush"),s=t("./_isFlattenable");e.exports=i},{"./_arrayPush":102,"./_isFlattenable":190}],115:[function(t,e,n){var i=t("./_createBaseFor"),r=i();e.exports=r},{"./_createBaseFor":163}],116:[function(t,e,n){function i(t,e){return t&&r(t,e,s)}var r=t("./_baseFor"),s=t("./keys");e.exports=i},{"./_baseFor":115,"./keys":256}],117:[function(t,e,n){function i(t,e){e=s(e,t)?[e]:r(e);for(var n=0,i=e.length;null!=t&&i>n;)t=t[o(e[n++])];return n&&n==i?t:void 0}var r=t("./_castPath"),s=t("./_isKey"),o=t("./_toKey");e.exports=i},{"./_castPath":145,"./_isKey":195,"./_toKey":225}],118:[function(t,e,n){function i(t,e,n){var i=e(t);return s(t)?i:r(i,n(t))}var r=t("./_arrayPush"),s=t("./isArray");e.exports=i},{"./_arrayPush":102,"./isArray":242}],119:[function(t,e,n){function i(t,e){return null!=t&&(o.call(t,e)||"object"==typeof t&&e in t&&null===r(t))}var r=t("./_getPrototype"),s=Object.prototype,o=s.hasOwnProperty;e.exports=i},{"./_getPrototype":174}],120:[function(t,e,n){function i(t,e){return null!=t&&e in Object(t)}e.exports=i},{}],121:[function(t,e,n){function i(t,e,n){if(e!==e)return r(t,n);for(var i=n-1,s=t.length;++i<s;)if(t[i]===e)return i;return-1}var r=t("./_indexOfNaN");e.exports=i},{"./_indexOfNaN":186}],122:[function(t,e,n){function i(t,e,n,a,h){return t===e?!0:null==t||null==e||!s(t)&&!o(e)?t!==t&&e!==e:r(t,e,i,n,a,h)}var r=t("./_baseIsEqualDeep"),s=t("./isObject"),o=t("./isObjectLike");e.exports=i},{"./_baseIsEqualDeep":123,"./isObject":251,"./isObjectLike":252}],123:[function(t,e,n){function i(t,e,n,i,m,y){var _=c(t),w=c(e),b=p,C=p;_||(b=h(t),b=b==d?g:b),w||(C=h(e),C=C==d?g:C);var x=b==g&&!u(t),E=C==g&&!u(e),O=b==C;if(O&&!x)return y||(y=new r),_||l(t)?s(t,e,n,i,m,y):o(t,e,b,n,i,m,y);if(!(m&f)){var P=x&&v.call(t,"__wrapped__"),N=E&&v.call(e,"__wrapped__");if(P||N){var S=P?t.value():t,I=N?e.value():e;return y||(y=new r),n(S,I,i,m,y)}}return O?(y||(y=new r),a(t,e,n,i,m,y)):!1}var r=t("./_Stack"),s=t("./_equalArrays"),o=t("./_equalByTag"),a=t("./_equalObjects"),h=t("./_getTag"),c=t("./isArray"),u=t("./_isHostObject"),l=t("./isTypedArray"),f=2,d="[object Arguments]",p="[object Array]",g="[object Object]",m=Object.prototype,v=m.hasOwnProperty;e.exports=i},{"./_Stack":90,"./_equalArrays":165,"./_equalByTag":166,"./_equalObjects":167,"./_getTag":177,"./_isHostObject":192,"./isArray":242,"./isTypedArray":255}],124:[function(t,e,n){function i(t,e,n,i){var h=n.length,c=h,u=!i;if(null==t)return!c;for(t=Object(t);h--;){var l=n[h];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++h<c;){l=n[h];var f=l[0],d=t[f],p=l[1];if(u&&l[2]){if(void 0===d&&!(f in t))return!1}else{var g=new r;if(i)var m=i(d,p,f,t,e,g);if(!(void 0===m?s(p,d,i,o|a,g):m))return!1}}return!0}var r=t("./_Stack"),s=t("./_baseIsEqual"),o=1,a=2;e.exports=i},{"./_Stack":90,"./_baseIsEqual":122}],125:[function(t,e,n){function i(t){if(!a(t)||o(t))return!1;var e=r(t)||s(t)?p:u;return e.test(h(t))}var r=t("./isFunction"),s=t("./_isHostObject"),o=t("./_isMasked"),a=t("./isObject"),h=t("./_toSource"),c=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,l=Object.prototype,f=Function.prototype.toString,d=l.hasOwnProperty,p=RegExp("^"+f.call(d).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},{"./_isHostObject":192,"./_isMasked":197,"./_toSource":226,"./isFunction":248,"./isObject":251}],126:[function(t,e,n){function i(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?s(t[0],t[1]):r(t):h(t)}var r=t("./_baseMatches"),s=t("./_baseMatchesProperty"),o=t("./identity"),a=t("./isArray"),h=t("./property");e.exports=i},{"./_baseMatches":130,"./_baseMatchesProperty":131,"./identity":239,"./isArray":242,"./property":262}],127:[function(t,e,n){function i(t){return r(Object(t))}var r=Object.keys;e.exports=i},{}],128:[function(t,e,n){function i(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}var r=t("./_Reflect"),s=t("./_iteratorToArray"),o=Object.prototype,a=r?r.enumerate:void 0,h=o.propertyIsEnumerable;a&&!h.call({valueOf:1},"valueOf")&&(i=function(t){return s(a(t))}),e.exports=i},{"./_Reflect":87,"./_iteratorToArray":200}],129:[function(t,e,n){function i(t,e){var n=-1,i=s(t)?Array(t.length):[];return r(t,function(t,r,s){i[++n]=e(t,r,s)}),i}var r=t("./_baseEach"),s=t("./isArrayLike");e.exports=i},{"./_baseEach":111,"./isArrayLike":243}],130:[function(t,e,n){function i(t){var e=s(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}var r=t("./_baseIsMatch"),s=t("./_getMatchData"),o=t("./_matchesStrictComparable");e.exports=i},{"./_baseIsMatch":124,"./_getMatchData":172,"./_matchesStrictComparable":212}],131:[function(t,e,n){function i(t,e){return a(t)&&h(e)?c(u(t),e):function(n){var i=s(n,t);return void 0===i&&i===e?o(n,t):r(e,i,void 0,l|f)}}var r=t("./_baseIsEqual"),s=t("./get"),o=t("./hasIn"),a=t("./_isKey"),h=t("./_isStrictComparable"),c=t("./_matchesStrictComparable"),u=t("./_toKey"),l=1,f=2;e.exports=i},{"./_baseIsEqual":122,"./_isKey":195,"./_isStrictComparable":199,"./_matchesStrictComparable":212,"./_toKey":225,"./get":237,"./hasIn":238}],132:[function(t,e,n){function i(t,e,n){var i=-1;e=r(e.length?e:[u],h(s));var l=o(t,function(t,n,s){var o=r(e,function(e){return e(t)});return{criteria:o,index:++i,value:t}});return a(l,function(t,e){return c(t,e,n)})}var r=t("./_arrayMap"),s=t("./_baseIteratee"),o=t("./_baseMap"),a=t("./_baseSortBy"),h=t("./_baseUnary"),c=t("./_compareMultiple"),u=t("./identity");e.exports=i},{"./_arrayMap":101,"./_baseIteratee":126,"./_baseMap":129,"./_baseSortBy":138,"./_baseUnary":141,"./_compareMultiple":156,"./identity":239}],133:[function(t,e,n){function i(t,e){return t=Object(t),r(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}var r=t("./_arrayReduce");e.exports=i},{"./_arrayReduce":103}],134:[function(t,e,n){function i(t){return function(e){return null==e?void 0:e[t]}}e.exports=i},{}],135:[function(t,e,n){function i(t){return function(e){return r(e,t)}}var r=t("./_baseGet");e.exports=i},{"./_baseGet":117}],136:[function(t,e,n){function i(t,e,n,i){e=a(e,t)?[e]:s(e);for(var u=-1,l=e.length,f=l-1,d=t;null!=d&&++u<l;){var p=c(e[u]);if(h(d)){var g=n;if(u!=f){var m=d[p];g=i?i(m,p,d):void 0,void 0===g&&(g=null==m?o(e[u+1])?[]:{}:m)}r(d,p,g)}d=d[p]}return t}var r=t("./_assignValue"),s=t("./_castPath"),o=t("./_isIndex"),a=t("./_isKey"),h=t("./isObject"),c=t("./_toKey");e.exports=i},{"./_assignValue":105,"./_castPath":145,"./_isIndex":193,"./_isKey":195,"./_toKey":225,"./isObject":251}],137:[function(t,e,n){function i(t,e,n){var i=-1,r=t.length;0>e&&(e=-e>r?0:r+e),n=n>r?r:n,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}e.exports=i},{}],138:[function(t,e,n){function i(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}e.exports=i},{}],139:[function(t,e,n){function i(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}e.exports=i},{}],140:[function(t,e,n){function i(t){if("string"==typeof t)return t;if(s(t))return h?h.call(t):"";var e=t+"";return"0"==e&&1/t==-o?"-0":e}var r=t("./_Symbol"),s=t("./isSymbol"),o=1/0,a=r?r.prototype:void 0,h=a?a.toString:void 0;e.exports=i},{"./_Symbol":91,"./isSymbol":254}],141:[function(t,e,n){function i(t){return function(e){return t(e)}}e.exports=i},{}],142:[function(t,e,n){function i(t,e){e=o(e,t)?[e]:s(e),t=h(t,e);var n=c(a(e));return!(null!=t&&r(t,n))||delete t[n]}var r=t("./_baseHas"),s=t("./_castPath"),o=t("./_isKey"),a=t("./last"),h=t("./_parent"),c=t("./_toKey");e.exports=i},{"./_baseHas":119,"./_castPath":145,"./_isKey":195,"./_parent":214,"./_toKey":225,"./last":258}],143:[function(t,e,n){function i(t,e){return r(e,function(e){return t[e]})}var r=t("./_arrayMap");e.exports=i},{"./_arrayMap":101}],144:[function(t,e,n){function i(t,e){return t.has(e)}e.exports=i},{}],145:[function(t,e,n){function i(t){return r(t)?t:s(t)}var r=t("./isArray"),s=t("./_stringToPath");e.exports=i},{"./_stringToPath":224,"./isArray":242}],146:[function(t,e,n){function i(t){return t&&t.Object===Object?t:null}e.exports=i},{}],147:[function(t,e,n){function i(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}var r=t("./_Uint8Array");e.exports=i},{"./_Uint8Array":92}],148:[function(t,e,n){function i(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}e.exports=i},{}],149:[function(t,e,n){function i(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var r=t("./_cloneArrayBuffer");e.exports=i},{"./_cloneArrayBuffer":147}],150:[function(t,e,n){function i(t,e,n){var i=e?n(o(t),!0):o(t);return s(i,r,new t.constructor)}var r=t("./_addMapEntry"),s=t("./_arrayReduce"),o=t("./_mapToArray");e.exports=i},{"./_addMapEntry":94,"./_arrayReduce":103,"./_mapToArray":211}],151:[function(t,e,n){function i(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}var r=/\w*$/;e.exports=i},{}],152:[function(t,e,n){function i(t,e,n){var i=e?n(o(t),!0):o(t);return s(i,r,new t.constructor)}var r=t("./_addSetEntry"),s=t("./_arrayReduce"),o=t("./_setToArray");e.exports=i},{"./_addSetEntry":95,"./_arrayReduce":103,"./_setToArray":218}],153:[function(t,e,n){function i(t){return o?Object(o.call(t)):{}}var r=t("./_Symbol"),s=r?r.prototype:void 0,o=s?s.valueOf:void 0;e.exports=i},{"./_Symbol":91}],154:[function(t,e,n){function i(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length);
}var r=t("./_cloneArrayBuffer");e.exports=i},{"./_cloneArrayBuffer":147}],155:[function(t,e,n){function i(t,e){if(t!==e){var n=void 0!==t,i=null===t,s=t===t,o=r(t),a=void 0!==e,h=null===e,c=e===e,u=r(e);if(!h&&!u&&!o&&t>e||o&&a&&c&&!h&&!u||i&&a&&c||!n&&c||!s)return 1;if(!i&&!o&&!u&&e>t||u&&n&&s&&!i&&!o||h&&n&&s||!a&&s||!c)return-1}return 0}var r=t("./isSymbol");e.exports=i},{"./isSymbol":254}],156:[function(t,e,n){function i(t,e,n){for(var i=-1,s=t.criteria,o=e.criteria,a=s.length,h=n.length;++i<a;){var c=r(s[i],o[i]);if(c){if(i>=h)return c;var u=n[i];return c*("desc"==u?-1:1)}}return t.index-e.index}var r=t("./_compareAscending");e.exports=i},{"./_compareAscending":155}],157:[function(t,e,n){function i(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}e.exports=i},{}],158:[function(t,e,n){function i(t,e,n,i){n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],h=i?i(n[a],t[a],a,n,t):t[a];r(n,a,h)}return n}var r=t("./_assignValue");e.exports=i},{"./_assignValue":105}],159:[function(t,e,n){function i(t,e){return r(t,s(t),e)}var r=t("./_copyObject"),s=t("./_getSymbols");e.exports=i},{"./_copyObject":158,"./_getSymbols":175}],160:[function(t,e,n){var i=t("./_root"),r=i["__core-js_shared__"];e.exports=r},{"./_root":215}],161:[function(t,e,n){function i(t){return s(function(e,n){var i=-1,s=n.length,o=s>1?n[s-1]:void 0,a=s>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(s--,o):void 0,a&&r(n[0],n[1],a)&&(o=3>s?void 0:o,s=1),e=Object(e);++i<s;){var h=n[i];h&&t(e,h,i,o)}return e})}var r=t("./_isIterateeCall"),s=t("./rest");e.exports=i},{"./_isIterateeCall":194,"./rest":263}],162:[function(t,e,n){function i(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var s=n.length,o=e?s:-1,a=Object(n);(e?o--:++o<s)&&i(a[o],o,a)!==!1;);return n}}var r=t("./isArrayLike");e.exports=i},{"./isArrayLike":243}],163:[function(t,e,n){function i(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var h=o[t?a:++r];if(n(s[h],h,s)===!1)break}return e}}e.exports=i},{}],164:[function(t,e,n){function i(t){return function(e,n,i){var a=Object(e);if(n=r(n,3),!s(e))var h=o(e);var c=t(h||e,function(t,e){return h&&(e=t,t=a[e]),n(t,e,a)},i);return c>-1?e[h?h[c]:c]:void 0}}var r=t("./_baseIteratee"),s=t("./isArrayLike"),o=t("./keys");e.exports=i},{"./_baseIteratee":126,"./isArrayLike":243,"./keys":256}],165:[function(t,e,n){function i(t,e,n,i,h,c){var u=h&a,l=t.length,f=e.length;if(l!=f&&!(u&&f>l))return!1;var d=c.get(t);if(d)return d==e;var p=-1,g=!0,m=h&o?new r:void 0;for(c.set(t,e);++p<l;){var v=t[p],y=e[p];if(i)var _=u?i(y,v,p,e,t,c):i(v,y,p,t,e,c);if(void 0!==_){if(_)continue;g=!1;break}if(m){if(!s(e,function(t,e){return m.has(e)||v!==t&&!n(v,t,i,h,c)?void 0:m.add(e)})){g=!1;break}}else if(v!==y&&!n(v,y,i,h,c)){g=!1;break}}return c["delete"](t),g}var r=t("./_SetCache"),s=t("./_arraySome"),o=1,a=2;e.exports=i},{"./_SetCache":89,"./_arraySome":104}],166:[function(t,e,n){function i(t,e,n,i,r,C,E){switch(n){case b:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!i(new s(t),new s(e)));case l:case f:return+t==+e;case d:return t.name==e.name&&t.message==e.message;case g:return t!=+t?e!=+e:t==+e;case m:case y:return t==e+"";case p:var O=a;case v:var P=C&u;if(O||(O=h),t.size!=e.size&&!P)return!1;var N=E.get(t);return N?N==e:(C|=c,E.set(t,e),o(O(t),O(e),i,r,C,E));case _:if(x)return x.call(t)==x.call(e)}return!1}var r=t("./_Symbol"),s=t("./_Uint8Array"),o=t("./_equalArrays"),a=t("./_mapToArray"),h=t("./_setToArray"),c=1,u=2,l="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Map]",g="[object Number]",m="[object RegExp]",v="[object Set]",y="[object String]",_="[object Symbol]",w="[object ArrayBuffer]",b="[object DataView]",C=r?r.prototype:void 0,x=C?C.valueOf:void 0;e.exports=i},{"./_Symbol":91,"./_Uint8Array":92,"./_equalArrays":165,"./_mapToArray":211,"./_setToArray":218}],167:[function(t,e,n){function i(t,e,n,i,a,h){var c=a&o,u=s(t),l=u.length,f=s(e),d=f.length;if(l!=d&&!c)return!1;for(var p=l;p--;){var g=u[p];if(!(c?g in e:r(e,g)))return!1}var m=h.get(t);if(m)return m==e;var v=!0;h.set(t,e);for(var y=c;++p<l;){g=u[p];var _=t[g],w=e[g];if(i)var b=c?i(w,_,g,e,t,h):i(_,w,g,t,e,h);if(!(void 0===b?_===w||n(_,w,i,a,h):b)){v=!1;break}y||(y="constructor"==g)}if(v&&!y){var C=t.constructor,x=e.constructor;C!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof C&&C instanceof C&&"function"==typeof x&&x instanceof x)&&(v=!1)}return h["delete"](t),v}var r=t("./_baseHas"),s=t("./keys"),o=2;e.exports=i},{"./_baseHas":119,"./keys":256}],168:[function(t,e,n){function i(t){return r(t,o,s)}var r=t("./_baseGetAllKeys"),s=t("./_getSymbols"),o=t("./keys");e.exports=i},{"./_baseGetAllKeys":118,"./_getSymbols":175,"./keys":256}],169:[function(t,e,n){function i(t){return r(t,o,s)}var r=t("./_baseGetAllKeys"),s=t("./_getSymbolsIn"),o=t("./keysIn");e.exports=i},{"./_baseGetAllKeys":118,"./_getSymbolsIn":176,"./keysIn":257}],170:[function(t,e,n){var i=t("./_baseProperty"),r=i("length");e.exports=r},{"./_baseProperty":134}],171:[function(t,e,n){function i(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}var r=t("./_isKeyable");e.exports=i},{"./_isKeyable":196}],172:[function(t,e,n){function i(t){for(var e=s(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,r(o)]}return e}var r=t("./_isStrictComparable"),s=t("./keys");e.exports=i},{"./_isStrictComparable":199,"./keys":256}],173:[function(t,e,n){function i(t,e){var n=s(t,e);return r(n)?n:void 0}var r=t("./_baseIsNative"),s=t("./_getValue");e.exports=i},{"./_baseIsNative":125,"./_getValue":178}],174:[function(t,e,n){function i(t){return r(Object(t))}var r=Object.getPrototypeOf;e.exports=i},{}],175:[function(t,e,n){function i(t){return s(Object(t))}var r=t("./stubArray"),s=Object.getOwnPropertySymbols;s||(i=r),e.exports=i},{"./stubArray":266}],176:[function(t,e,n){var i=t("./_arrayPush"),r=t("./_getPrototype"),s=t("./_getSymbols"),o=Object.getOwnPropertySymbols,a=o?function(t){for(var e=[];t;)i(e,s(t)),t=r(t);return e}:s;e.exports=a},{"./_arrayPush":102,"./_getPrototype":174,"./_getSymbols":175}],177:[function(t,e,n){function i(t){return v.call(t)}var r=t("./_DataView"),s=t("./_Map"),o=t("./_Promise"),a=t("./_Set"),h=t("./_WeakMap"),c=t("./_toSource"),u="[object Map]",l="[object Object]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",g="[object DataView]",m=Object.prototype,v=m.toString,y=c(r),_=c(s),w=c(o),b=c(a),C=c(h);(r&&i(new r(new ArrayBuffer(1)))!=g||s&&i(new s)!=u||o&&i(o.resolve())!=f||a&&i(new a)!=d||h&&i(new h)!=p)&&(i=function(t){var e=v.call(t),n=e==l?t.constructor:void 0,i=n?c(n):void 0;if(i)switch(i){case y:return g;case _:return u;case w:return f;case b:return d;case C:return p}return e}),e.exports=i},{"./_DataView":81,"./_Map":84,"./_Promise":86,"./_Set":88,"./_WeakMap":93,"./_toSource":226}],178:[function(t,e,n){function i(t,e){return null==t?void 0:t[e]}e.exports=i},{}],179:[function(t,e,n){function i(t,e,n){e=h(e,t)?[e]:r(e);for(var i,f=-1,d=e.length;++f<d;){var p=l(e[f]);if(!(i=null!=t&&n(t,p)))break;t=t[p]}if(i)return i;var d=t?t.length:0;return!!d&&c(d)&&a(p,d)&&(o(t)||u(t)||s(t))}var r=t("./_castPath"),s=t("./isArguments"),o=t("./isArray"),a=t("./_isIndex"),h=t("./_isKey"),c=t("./isLength"),u=t("./isString"),l=t("./_toKey");e.exports=i},{"./_castPath":145,"./_isIndex":193,"./_isKey":195,"./_toKey":225,"./isArguments":241,"./isArray":242,"./isLength":249,"./isString":253}],180:[function(t,e,n){function i(){this.__data__=r?r(null):{}}var r=t("./_nativeCreate");e.exports=i},{"./_nativeCreate":213}],181:[function(t,e,n){function i(t){return this.has(t)&&delete this.__data__[t]}e.exports=i},{}],182:[function(t,e,n){function i(t){var e=this.__data__;if(r){var n=e[t];return n===s?void 0:n}return a.call(e,t)?e[t]:void 0}var r=t("./_nativeCreate"),s="__lodash_hash_undefined__",o=Object.prototype,a=o.hasOwnProperty;e.exports=i},{"./_nativeCreate":213}],183:[function(t,e,n){function i(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}var r=t("./_nativeCreate"),s=Object.prototype,o=s.hasOwnProperty;e.exports=i},{"./_nativeCreate":213}],184:[function(t,e,n){function i(t,e){var n=this.__data__;return n[t]=r&&void 0===e?s:e,this}var r=t("./_nativeCreate"),s="__lodash_hash_undefined__";e.exports=i},{"./_nativeCreate":213}],185:[function(t,e,n){function i(t){var e=t?t.length:void 0;return a(e)&&(o(t)||h(t)||s(t))?r(e,String):null}var r=t("./_baseTimes"),s=t("./isArguments"),o=t("./isArray"),a=t("./isLength"),h=t("./isString");e.exports=i},{"./_baseTimes":139,"./isArguments":241,"./isArray":242,"./isLength":249,"./isString":253}],186:[function(t,e,n){function i(t,e,n){for(var i=t.length,r=e+(n?1:-1);n?r--:++r<i;){var s=t[r];if(s!==s)return r}return-1}e.exports=i},{}],187:[function(t,e,n){function i(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&s.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,s=r.hasOwnProperty;e.exports=i},{}],188:[function(t,e,n){function i(t,e,n,i){var A=t.constructor;switch(e){case _:return r(t);case l:case f:return new A(+t);case w:return s(t,i);case b:case C:case x:case E:case O:case P:case N:case S:case I:return u(t,i);case d:return o(t,i,n);case p:case v:return new A(t);case g:return a(t);case m:return h(t,i,n);case y:return c(t)}}var r=t("./_cloneArrayBuffer"),s=t("./_cloneDataView"),o=t("./_cloneMap"),a=t("./_cloneRegExp"),h=t("./_cloneSet"),c=t("./_cloneSymbol"),u=t("./_cloneTypedArray"),l="[object Boolean]",f="[object Date]",d="[object Map]",p="[object Number]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",b="[object Float32Array]",C="[object Float64Array]",x="[object Int8Array]",E="[object Int16Array]",O="[object Int32Array]",P="[object Uint8Array]",N="[object Uint8ClampedArray]",S="[object Uint16Array]",I="[object Uint32Array]";e.exports=i},{"./_cloneArrayBuffer":147,"./_cloneDataView":149,"./_cloneMap":150,"./_cloneRegExp":151,"./_cloneSet":152,"./_cloneSymbol":153,"./_cloneTypedArray":154}],189:[function(t,e,n){function i(t){return"function"!=typeof t.constructor||o(t)?{}:r(s(t))}var r=t("./_baseCreate"),s=t("./_getPrototype"),o=t("./_isPrototype");e.exports=i},{"./_baseCreate":109,"./_getPrototype":174,"./_isPrototype":198}],190:[function(t,e,n){function i(t){return s(t)||r(t)}var r=t("./isArguments"),s=t("./isArray");e.exports=i},{"./isArguments":241,"./isArray":242}],191:[function(t,e,n){function i(t){return r(t)&&!(2==t.length&&!s(t[0]))}var r=t("./isArray"),s=t("./isFunction");e.exports=i},{"./isArray":242,"./isFunction":248}],192:[function(t,e,n){function i(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}e.exports=i},{}],193:[function(t,e,n){function i(t,e){return e=null==e?r:e,!!e&&("number"==typeof t||s.test(t))&&t>-1&&t%1==0&&e>t}var r=9007199254740991,s=/^(?:0|[1-9]\d*)$/;e.exports=i},{}],194:[function(t,e,n){function i(t,e,n){if(!a(n))return!1;var i=typeof e;return("number"==i?s(n)&&o(e,n.length):"string"==i&&e in n)?r(n[e],t):!1}var r=t("./eq"),s=t("./isArrayLike"),o=t("./_isIndex"),a=t("./isObject");e.exports=i},{"./_isIndex":193,"./eq":231,"./isArrayLike":243,"./isObject":251}],195:[function(t,e,n){function i(t,e){if(r(t))return!1;var n=typeof t;return"number"==n||"symbol"==n||"boolean"==n||null==t||s(t)?!0:a.test(t)||!o.test(t)||null!=e&&t in Object(e)}var r=t("./isArray"),s=t("./isSymbol"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=i},{"./isArray":242,"./isSymbol":254}],196:[function(t,e,n){function i(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}e.exports=i},{}],197:[function(t,e,n){function i(t){return!!s&&s in t}var r=t("./_coreJsData"),s=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();e.exports=i},{"./_coreJsData":160}],198:[function(t,e,n){function i(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||r;return t===n}var r=Object.prototype;e.exports=i},{}],199:[function(t,e,n){function i(t){return t===t&&!r(t)}var r=t("./isObject");e.exports=i},{"./isObject":251}],200:[function(t,e,n){function i(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}e.exports=i},{}],201:[function(t,e,n){function i(){this.__data__=[]}e.exports=i},{}],202:[function(t,e,n){function i(t){var e=this.__data__,n=r(e,t);if(0>n)return!1;var i=e.length-1;return n==i?e.pop():o.call(e,n,1),!0}var r=t("./_assocIndexOf"),s=Array.prototype,o=s.splice;e.exports=i},{"./_assocIndexOf":106}],203:[function(t,e,n){function i(t){var e=this.__data__,n=r(e,t);return 0>n?void 0:e[n][1]}var r=t("./_assocIndexOf");e.exports=i},{"./_assocIndexOf":106}],204:[function(t,e,n){function i(t){return r(this.__data__,t)>-1}var r=t("./_assocIndexOf");e.exports=i},{"./_assocIndexOf":106}],205:[function(t,e,n){function i(t,e){var n=this.__data__,i=r(n,t);return 0>i?n.push([t,e]):n[i][1]=e,this}var r=t("./_assocIndexOf");e.exports=i},{"./_assocIndexOf":106}],206:[function(t,e,n){function i(){this.__data__={hash:new r,map:new(o||s),string:new r}}var r=t("./_Hash"),s=t("./_ListCache"),o=t("./_Map");e.exports=i},{"./_Hash":82,"./_ListCache":83,"./_Map":84}],207:[function(t,e,n){function i(t){return r(this,t)["delete"](t)}var r=t("./_getMapData");e.exports=i},{"./_getMapData":171}],208:[function(t,e,n){function i(t){return r(this,t).get(t)}var r=t("./_getMapData");e.exports=i},{"./_getMapData":171}],209:[function(t,e,n){function i(t){return r(this,t).has(t)}var r=t("./_getMapData");e.exports=i},{"./_getMapData":171}],210:[function(t,e,n){function i(t,e){return r(this,t).set(t,e),this}var r=t("./_getMapData");e.exports=i},{"./_getMapData":171}],211:[function(t,e,n){function i(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}e.exports=i},{}],212:[function(t,e,n){function i(t,e){return function(n){return null==n?!1:n[t]===e&&(void 0!==e||t in Object(n))}}e.exports=i},{}],213:[function(t,e,n){var i=t("./_getNative"),r=i(Object,"create");e.exports=r},{"./_getNative":173}],214:[function(t,e,n){function i(t,e){return 1==e.length?t:r(t,s(e,0,-1))}var r=t("./_baseGet"),s=t("./_baseSlice");e.exports=i},{"./_baseGet":117,"./_baseSlice":137}],215:[function(t,e,n){(function(n){var i=t("./_checkGlobal"),r=i("object"==typeof n&&n),s=i("object"==typeof self&&self),o=i("object"==typeof this&&this),a=r||s||o||Function("return this")();e.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_checkGlobal":146}],216:[function(t,e,n){function i(t){return this.__data__.set(t,r),this}var r="__lodash_hash_undefined__";e.exports=i},{}],217:[function(t,e,n){function i(t){return this.__data__.has(t)}e.exports=i},{}],218:[function(t,e,n){function i(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}e.exports=i},{}],219:[function(t,e,n){function i(){this.__data__=new r}var r=t("./_ListCache");e.exports=i},{"./_ListCache":83}],220:[function(t,e,n){function i(t){return this.__data__["delete"](t)}e.exports=i},{}],221:[function(t,e,n){function i(t){return this.__data__.get(t)}e.exports=i},{}],222:[function(t,e,n){function i(t){return this.__data__.has(t)}e.exports=i},{}],223:[function(t,e,n){function i(t,e){var n=this.__data__;return n instanceof r&&n.__data__.length==o&&(n=this.__data__=new s(n.__data__)),n.set(t,e),this}var r=t("./_ListCache"),s=t("./_MapCache"),o=200;e.exports=i},{"./_ListCache":83,"./_MapCache":85}],224:[function(t,e,n){var i=t("./memoize"),r=t("./toString"),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,o=/\\(\\)?/g,a=i(function(t){var e=[];return r(t).replace(s,function(t,n,i,r){e.push(i?r.replace(o,"$1"):n||t)}),e});e.exports=a},{"./memoize":260,"./toString":271}],225:[function(t,e,n){function i(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-s?"-0":e}var r=t("./isSymbol"),s=1/0;e.exports=i},{"./isSymbol":254}],226:[function(t,e,n){function i(t){if(null!=t){try{return r.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var r=Function.prototype.toString;e.exports=i},{}],227:[function(t,e,n){var i=t("./_assignValue"),r=t("./_copyObject"),s=t("./_createAssigner"),o=t("./isArrayLike"),a=t("./_isPrototype"),h=t("./keysIn"),c=Object.prototype,u=c.propertyIsEnumerable,l=!u.call({valueOf:1},"valueOf"),f=s(function(t,e){if(l||a(e)||o(e))return void r(e,h(e),t);for(var n in e)i(t,n,e[n])});e.exports=f},{"./_assignValue":105,"./_copyObject":158,"./_createAssigner":161,"./_isPrototype":198,"./isArrayLike":243,"./keysIn":257}],228:[function(t,e,n){function i(t){return r(t,!1,!0)}var r=t("./_baseClone");e.exports=i},{"./_baseClone":108}],229:[function(t,e,n){function i(t){return r(t,!0,!0)}var r=t("./_baseClone");e.exports=i},{"./_baseClone":108}],230:[function(t,e,n){e.exports=t("./forEach")},{"./forEach":236}],231:[function(t,e,n){function i(t,e){return t===e||t!==t&&e!==e}e.exports=i},{}],232:[function(t,e,n){e.exports=t("./assignIn")},{"./assignIn":227}],233:[function(t,e,n){function i(t,e){var n=a(t)?r:s;return n(t,o(e,3))}var r=t("./_arrayFilter"),s=t("./_baseFilter"),o=t("./_baseIteratee"),a=t("./isArray");e.exports=i},{"./_arrayFilter":98,"./_baseFilter":112,"./_baseIteratee":126,"./isArray":242}],234:[function(t,e,n){var i=t("./_createFind"),r=t("./findIndex"),s=i(r);e.exports=s},{"./_createFind":164,"./findIndex":235}],235:[function(t,e,n){function i(t,e,n){var i=t?t.length:0;if(!i)return-1;var h=null==n?0:o(n);return 0>h&&(h=a(i+h,0)),r(t,s(e,3),h)}var r=t("./_baseFindIndex"),s=t("./_baseIteratee"),o=t("./toInteger"),a=Math.max;e.exports=i},{"./_baseFindIndex":113,"./_baseIteratee":126,"./toInteger":269}],236:[function(t,e,n){function i(t,e){var n=a(t)?r:s;return n(t,o(e,3))}var r=t("./_arrayEach"),s=t("./_baseEach"),o=t("./_baseIteratee"),a=t("./isArray");e.exports=i},{"./_arrayEach":97,"./_baseEach":111,"./_baseIteratee":126,"./isArray":242}],237:[function(t,e,n){function i(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}var r=t("./_baseGet");e.exports=i},{"./_baseGet":117}],238:[function(t,e,n){function i(t,e){return null!=t&&s(t,e,r)}var r=t("./_baseHasIn"),s=t("./_hasPath");e.exports=i},{"./_baseHasIn":120,"./_hasPath":179}],239:[function(t,e,n){function i(t){return t}e.exports=i},{}],240:[function(t,e,n){function i(t,e,n,i){t=s(t)?t:h(t),n=n&&!i?a(n):0;var u=t.length;return 0>n&&(n=c(u+n,0)),o(t)?u>=n&&t.indexOf(e,n)>-1:!!u&&r(t,e,n)>-1}var r=t("./_baseIndexOf"),s=t("./isArrayLike"),o=t("./isString"),a=t("./toInteger"),h=t("./values"),c=Math.max;e.exports=i},{"./_baseIndexOf":121,"./isArrayLike":243,"./isString":253,"./toInteger":269,"./values":273}],241:[function(t,e,n){function i(t){return r(t)&&a.call(t,"callee")&&(!c.call(t,"callee")||h.call(t)==s)}var r=t("./isArrayLikeObject"),s="[object Arguments]",o=Object.prototype,a=o.hasOwnProperty,h=o.toString,c=o.propertyIsEnumerable;e.exports=i},{"./isArrayLikeObject":244}],242:[function(t,e,n){var i=Array.isArray;e.exports=i},{}],243:[function(t,e,n){function i(t){return null!=t&&o(r(t))&&!s(t)}var r=t("./_getLength"),s=t("./isFunction"),o=t("./isLength");e.exports=i},{"./_getLength":170,"./isFunction":248,"./isLength":249}],244:[function(t,e,n){function i(t){return s(t)&&r(t)}var r=t("./isArrayLike"),s=t("./isObjectLike");e.exports=i},{"./isArrayLike":243,"./isObjectLike":252}],245:[function(t,e,n){function i(t){return t===!0||t===!1||r(t)&&a.call(t)==s}var r=t("./isObjectLike"),s="[object Boolean]",o=Object.prototype,a=o.toString;e.exports=i},{"./isObjectLike":252}],246:[function(t,e,n){var i=t("./_root"),r=t("./stubFalse"),s="object"==typeof n&&n,o=s&&"object"==typeof e&&e,a=o&&o.exports===s,h=a?i.Buffer:void 0,c=h?function(t){return t instanceof h}:r;e.exports=c},{"./_root":215,"./stubFalse":267}],247:[function(t,e,n){function i(t,e){return r(t,e)}var r=t("./_baseIsEqual");e.exports=i},{"./_baseIsEqual":122}],248:[function(t,e,n){function i(t){var e=r(t)?h.call(t):"";return e==s||e==o}var r=t("./isObject"),s="[object Function]",o="[object GeneratorFunction]",a=Object.prototype,h=a.toString;e.exports=i},{"./isObject":251}],249:[function(t,e,n){function i(t){return"number"==typeof t&&t>-1&&t%1==0&&r>=t}var r=9007199254740991;e.exports=i},{}],250:[function(t,e,n){function i(t){return"number"==typeof t||r(t)&&a.call(t)==s}var r=t("./isObjectLike"),s="[object Number]",o=Object.prototype,a=o.toString;e.exports=i},{"./isObjectLike":252}],251:[function(t,e,n){function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=i},{}],252:[function(t,e,n){function i(t){return!!t&&"object"==typeof t}e.exports=i},{}],253:[function(t,e,n){function i(t){return"string"==typeof t||!r(t)&&s(t)&&h.call(t)==o}var r=t("./isArray"),s=t("./isObjectLike"),o="[object String]",a=Object.prototype,h=a.toString;e.exports=i},{"./isArray":242,"./isObjectLike":252}],254:[function(t,e,n){function i(t){return"symbol"==typeof t||r(t)&&a.call(t)==s}var r=t("./isObjectLike"),s="[object Symbol]",o=Object.prototype,a=o.toString;e.exports=i},{"./isObjectLike":252}],255:[function(t,e,n){function i(t){return s(t)&&r(t.length)&&!!A[M.call(t)]}var r=t("./isLength"),s=t("./isObjectLike"),o="[object Arguments]",a="[object Array]",h="[object Boolean]",c="[object Date]",u="[object Error]",l="[object Function]",f="[object Map]",d="[object Number]",p="[object Object]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",b="[object Float32Array]",C="[object Float64Array]",x="[object Int8Array]",E="[object Int16Array]",O="[object Int32Array]",P="[object Uint8Array]",N="[object Uint8ClampedArray]",S="[object Uint16Array]",I="[object Uint32Array]",A={};A[b]=A[C]=A[x]=A[E]=A[O]=A[P]=A[N]=A[S]=A[I]=!0,A[o]=A[a]=A[_]=A[h]=A[w]=A[c]=A[u]=A[l]=A[f]=A[d]=A[p]=A[g]=A[m]=A[v]=A[y]=!1;var T=Object.prototype,M=T.toString;e.exports=i},{"./isLength":249,"./isObjectLike":252}],256:[function(t,e,n){function i(t){var e=c(t);if(!e&&!a(t))return s(t);var n=o(t),i=!!n,u=n||[],l=u.length;for(var f in t)!r(t,f)||i&&("length"==f||h(f,l))||e&&"constructor"==f||u.push(f);return u}var r=t("./_baseHas"),s=t("./_baseKeys"),o=t("./_indexKeys"),a=t("./isArrayLike"),h=t("./_isIndex"),c=t("./_isPrototype");e.exports=i},{"./_baseHas":119,"./_baseKeys":127,"./_indexKeys":185,"./_isIndex":193,"./_isPrototype":198,"./isArrayLike":243}],257:[function(t,e,n){function i(t){for(var e=-1,n=a(t),i=r(t),h=i.length,u=s(t),l=!!u,f=u||[],d=f.length;++e<h;){var p=i[e];l&&("length"==p||o(p,d))||"constructor"==p&&(n||!c.call(t,p))||f.push(p)}return f}var r=t("./_baseKeysIn"),s=t("./_indexKeys"),o=t("./_isIndex"),a=t("./_isPrototype"),h=Object.prototype,c=h.hasOwnProperty;e.exports=i},{"./_baseKeysIn":128,"./_indexKeys":185,"./_isIndex":193,"./_isPrototype":198}],258:[function(t,e,n){function i(t){var e=t?t.length:0;return e?t[e-1]:void 0}e.exports=i},{}],259:[function(t,e,n){function i(t,e){var n=a(t)?r:o;return n(t,s(e,3))}var r=t("./_arrayMap"),s=t("./_baseIteratee"),o=t("./_baseMap"),a=t("./isArray");e.exports=i},{"./_arrayMap":101,"./_baseIteratee":126,"./_baseMap":129,"./isArray":242}],260:[function(t,e,n){function i(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(s);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o),o};return n.cache=new(i.Cache||r),n}var r=t("./_MapCache"),s="Expected a function";i.Cache=r,e.exports=i},{"./_MapCache":85}],261:[function(t,e,n){var i=t("./_arrayMap"),r=t("./_baseDifference"),s=t("./_baseFlatten"),o=t("./_basePick"),a=t("./_getAllKeysIn"),h=t("./rest"),c=t("./_toKey"),u=h(function(t,e){return null==t?{}:(e=i(s(e,1),c),o(t,r(a(t),e)))});e.exports=u},{"./_arrayMap":101,"./_baseDifference":110,"./_baseFlatten":114,"./_basePick":133,"./_getAllKeysIn":169,"./_toKey":225,"./rest":263}],262:[function(t,e,n){function i(t){return o(t)?r(a(t)):s(t)}var r=t("./_baseProperty"),s=t("./_basePropertyDeep"),o=t("./_isKey"),a=t("./_toKey");e.exports=i},{"./_baseProperty":134,"./_basePropertyDeep":135,"./_isKey":195,"./_toKey":225}],263:[function(t,e,n){function i(t,e){if("function"!=typeof t)throw new TypeError(o);return e=a(void 0===e?t.length-1:s(e),0),function(){for(var n=arguments,i=-1,s=a(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var h=Array(e+1);for(i=-1;++i<e;)h[i]=n[i];return h[e]=o,r(t,this,h)}}var r=t("./_apply"),s=t("./toInteger"),o="Expected a function",a=Math.max;e.exports=i},{"./_apply":96,"./toInteger":269}],264:[function(t,e,n){function i(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:r(t,e,n,i)}var r=t("./_baseSet");e.exports=i},{"./_baseSet":136}],265:[function(t,e,n){var i=t("./_baseFlatten"),r=t("./_baseOrderBy"),s=t("./isArray"),o=t("./_isFlattenableIteratee"),a=t("./_isIterateeCall"),h=t("./rest"),c=h(function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),e=1==e.length&&s(e[0])?e[0]:i(e,1,o),r(t,e,[])});e.exports=c},{"./_baseFlatten":114,"./_baseOrderBy":132,"./_isFlattenableIteratee":191,"./_isIterateeCall":194,"./isArray":242,"./rest":263}],266:[function(t,e,n){function i(){return[]}e.exports=i},{}],267:[function(t,e,n){function i(){return!1}e.exports=i},{}],268:[function(t,e,n){function i(t){if(!t)return 0===t?t:0;if(t=r(t),t===s||t===-s){var e=0>t?-1:1;return e*o}return t===t?t:0}var r=t("./toNumber"),s=1/0,o=1.7976931348623157e308;e.exports=i},{"./toNumber":270}],269:[function(t,e,n){function i(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}var r=t("./toFinite");e.exports=i},{"./toFinite":268}],270:[function(t,e,n){function i(t){if("number"==typeof t)return t;if(o(t))return a;if(s(t)){var e=r(t.valueOf)?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(h,"");var n=u.test(t);return n||l.test(t)?f(t.slice(2),n?2:8):c.test(t)?a:+t}var r=t("./isFunction"),s=t("./isObject"),o=t("./isSymbol"),a=NaN,h=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;e.exports=i},{"./isFunction":248,"./isObject":251,"./isSymbol":254}],271:[function(t,e,n){function i(t){return null==t?"":r(t)}var r=t("./_baseToString");e.exports=i},{"./_baseToString":140}],272:[function(t,e,n){function i(t,e){return null==t?!0:r(t,e)}var r=t("./_baseUnset");e.exports=i},{"./_baseUnset":142}],273:[function(t,e,n){function i(t){return t?r(t,s(t)):[]}var r=t("./_baseValues"),s=t("./keys");e.exports=i},{"./_baseValues":143,"./keys":256}],274:[function(t,e,n){var i=t("./_baseDifference"),r=t("./isArrayLikeObject"),s=t("./rest"),o=s(function(t,e){return r(t)?i(t,e):[]});e.exports=o},{"./_baseDifference":110,"./isArrayLikeObject":244,"./rest":263}],275:[function(t,e,n){"use strict";function i(t){console.assert(t instanceof window.Node,"Expecting native DOM node."),this.el=t,t._wrapper=this,this.eventListeners=[],this.htmlProps={}}function r(t){console.assert(t instanceof window.Node&&3===t.nodeType,"Expecting native TextNode."),this.el=t,t._wrapper=this}function s(){this.el=window,window.__BrowserDOMElementWrapper__=this,this.eventListeners=[]}var o=t("lodash/isString"),a=t("lodash/isNumber"),h=t("../util/oo"),c=t("./DOMElement"),u=t("./DelegatedEvent"),l=window.Element.prototype,f=l.matches||l.matchesSelector||l.msMatchesSelector||l.webkitMatchesSelector;i.Prototype=function(){this._isBrowserDOMElement=!0,this.getNativeElement=function(){return this.el},this.hasClass=function(t){return this.el.classList.contains(t)},this.addClass=function(t){return this.el.classList.add(t),this},this.removeClass=function(t){return this.el.classList.remove(t),this},this.getClasses=function(){return this.el.className},this.setClasses=function(t){return this.el.className=t,this},this.getAttribute=function(t){return this.el.getAttribute(t)},this.setAttribute=function(t,e){return this.el.setAttribute(t,e),this},this.removeAttribute=function(t){return this.el.removeAttribute(t),this},this.getAttributes=function(){for(var t={},e=this.el.attributes,n=e.length,i=0;n>i;i++){var r=e.item(i);t[r.name]=r.value}return t},this.getProperty=function(t){return this.el[t]},this.setProperty=function(t,e){return this.htmlProps[t]=e,this.el[t]=e,this},this.removeProperty=function(t){return delete this.htmlProps[t],delete this.el[t],this},this.getTagName=function(){return this.el.tagName?this.el.tagName.toLowerCase():void 0},this.setTagName=function(t){var e,n=i.createElement(t),r=this.el.attributes,s=r.length;for(e=0;s>e;e++){var o=r.item(e);n.setAttribute(o.name,o.value)}for(var a in this.htmlProps)this.htmlProps.hasOwnProperty(a)&&(n[a]=this.htmlProps[a]);return this.eventListeners.forEach(function(t){n.addEventListener(t.eventName,t.handler,t.capture)}),this._replaceNativeEl(n),this},this.getId=function(){return this.el.id},this.setId=function(t){return this.el.id=t,this},this.getValue=function(){return this.el.value},this.setValue=function(t){return this.el.value=t,this},this.getStyle=function(t){var e=this.getComputedStyle();return e[t]||this.el.style[t]},this.getComputedStyle=function(){return window.getComputedStyle(this.el)};var t={top:!0,bottom:!0,left:!0,right:!0,height:!0,width:!0};this.setStyle=function(e,n){return t[e]&&a(n)&&(n+="px"),this.el.style[e]=n,this},this.getTextContent=function(){return this.el.textContent},this.setTextContent=function(t){return this.el.textContent=t,this},this.getInnerHTML=function(){var t=this.el.innerHTML;if(!o(t)){for(var e=this.el.ownerDocument.createDocumentFragment(),n=this.el.firstChild;n;n=n.nextSibling)e.appendChild(n.cloneNode(!0));var i=new window.XMLSerializer;t=i.serializeToString(e)}return t},this.setInnerHTML=function(t){return this.el.innerHTML=t,this},this.getOuterHTML=function(){var t=this.el.outerHTML;if(!o(t)){var e=new window.XMLSerializer;t=e.serializeToString(this.el)}return t},this.addEventListener=function(t,e,n){var i;return i=1===arguments.length&&arguments[0]?arguments[0]:new c.EventListener(t,e,n),i.options.selector&&!i.__hasEventDelegation__&&(i.handler=this._delegatedHandler(i),i.__hasEventDelegation__=!0),this.el.addEventListener(i.eventName,i.handler,i.capture),i._el=this,this.eventListeners.push(i),this},this._delegatedHandler=function(t){var e=t.handler,n=t.context,i=t.options.selector,r=this.getNativeElement();return function(t){for(var s=t.target;s;){if(f.call(s,i)){e(new u(n,t.target,t));break}if(s===r)break;s=s.parentNode}}},this.removeEventListener=function(t,e){var n=null,i=-1;return i=c._findEventListenerIndex(this.eventListeners,t,e),n=this.eventListeners[i],i>-1&&(this.eventListeners.splice(i,1),n._el=null,this.el.removeEventListener(n.eventName,n.handler)),this},this.removeAllEventListeners=function(){for(var t=0;t<this.eventListeners.length;t++){var e=this.eventListeners[t];e._el=null,this.el.removeEventListener(e.eventName,e.handler)}this.eventListeners=[]},this.getEventListeners=function(){return this.eventListeners},this.getChildCount=function(){return this.el.childNodes.length},this.getChildNodes=function(){for(var t=[],e=this.el.firstChild;e;e=e.nextSibling)t.push(i.wrapNativeElement(e));return t},this.getChildren=function(){for(var t=[],e=this.el.firstChild;e;e=e.nextSibling)e.nodeType===window.Node.ELEMENT_NODE&&t.push(i.wrapNativeElement(e));return t},this.getChildAt=function(t){return i.wrapNativeElement(this.el.childNodes[t])},this.getChildIndex=function(t){if(!t._isBrowserDOMElement)throw new Error("Expecting a BrowserDOMElement instance.");return Array.prototype.indexOf.call(this.el.childNodes,t.el)},this.getFirstChild=function(){var t=this.el.firstChild;return t?i.wrapNativeElement(t):null},this.getLastChild=function(){var t=this.el.lastChild;return t?i.wrapNativeElement(t):null},this.getNextSibling=function(){var t=this.el.nextSibling;
return t?i.wrapNativeElement(t):null},this.getPreviousSibling=function(){var t=this.el.previousSibling;return t?i.wrapNativeElement(t):null},this.isTextNode=function(){return this.el.nodeType===window.Node.TEXT_NODE},this.isElementNode=function(){return this.el.nodeType===window.Node.ELEMENT_NODE},this.isCommentNode=function(){return this.el.nodeType===window.Node.COMMENT_NODE},this.isDocumentNode=function(){return this.el.nodeType===window.Node.DOCUMENT_NODE},this.clone=function(){var t=this.el.cloneNode(!0);return i.wrapNativeElement(t)},this.createElement=function(t){var e=this.el.ownerDocument.createElement(t);return i.wrapNativeElement(e)},this.createTextNode=function(t){var e=this.el.ownerDocument.createTextNode(t);return i.wrapNativeElement(e)},this.is=function(t){var e=this.el;return this.isElementNode()?f.call(e,t):!1},this.getParent=function(){var t=this.el.parentNode;return t?i.wrapNativeElement(t):null},this.getRoot=function(){for(var t=this.el,e=t;e;)t=e,e=t.parentNode;return i.wrapNativeElement(t)},this.find=function(t){var e=null;return this.el.querySelector&&(e=this.el.querySelector(t)),e?i.wrapNativeElement(e):null},this.findAll=function(t){var e=[];return this.el.querySelectorAll&&(e=this.el.querySelectorAll(t)),Array.prototype.map.call(e,function(t){return i.wrapNativeElement(t)})},this._normalizeChild=function(t){if(t instanceof window.Node){if(t._wrapper)return t;t=i.wrapNativeElement(t)}if(o(t)&&(t=this.createTextNode(t)),!t||!t._isBrowserDOMElement)throw new Error("Illegal child type.");return t.el._wrapper||(t.el._wrapper=t),console.assert(t.el._wrapper===t,"Expecting a backlink between native element and CheerioDOMElement"),t.getNativeElement()},this.appendChild=function(t){var e=this._normalizeChild(t);return this.el.appendChild(e),this},this.insertAt=function(t,e){var n=this._normalizeChild(e),i=this.el.childNodes;return t>=i.length?this.el.appendChild(n):this.el.insertBefore(n,i[t]),this},this.insertBefore=function(t,e){if(!e||!e._isBrowserDOMElement)throw new Error('insertBefore(): Illegal arguments. "before" must be a BrowserDOMElement instance.');var n=this._normalizeChild(t);return this.el.insertBefore(n,e.el),this},this.removeAt=function(t){return this.el.removeChild(this.el.childNodes[t]),this},this.removeChild=function(t){if(!t||!t._isBrowserDOMElement)throw new Error("removeChild(): Illegal arguments. Expecting a BrowserDOMElement instance.");return this.el.removeChild(t.el),this},this.replaceChild=function(t,e){if(!(e&&t&&e._isBrowserDOMElement&&t._isBrowserDOMElement))throw new Error("replaceChild(): Illegal arguments. Expecting BrowserDOMElement instances.");return this.el.replaceChild(e.el,t.el),this},this.empty=function(){for(var t=this.el;t.lastChild;)t.removeChild(t.lastChild);return this},this.remove=function(){return this.el.parentNode&&this.el.parentNode.removeChild(this.el),this},this.serialize=function(){var t=this.el.outerHTML;if(o(t))return t;var e=new window.XMLSerializer;return e.serializeToString(this.el)},this.isInDocument=function(){for(var t=this.el;t;){if(t.nodeType===window.Node.DOCUMENT_NODE)return!0;t=t.parentNode}},this._replaceNativeEl=function(t){console.assert(t instanceof window.Node,"Expecting a native element.");var e=this.el,n=e.parentNode;n&&n.replaceChild(t,e),this.el=t},this._getChildNodeCount=function(){return this.el.childNodes.length},this.focus=function(){return this.el.focus(),this},this.blur=function(){return this.el.focus(),this},this.click=function(){return this.el.click(),this},this.getWidth=function(){var t=this.el.getClientRects()[0];return t?t.width:0},this.getHeight=function(){var t=this.el.getClientRects()[0];return t?t.height:0},this.getOffset=function(){var t=this.el.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},this.getPosition=function(){return{left:this.el.offsetLeft,top:this.el.offsetTop}},this.getOuterHeight=function(t){var e=this.el.offsetHeight;if(t){var n=this.getComputedStyle();e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}return e}},c.extend(i),c._defineProperties(i,c._propertyNames),i.createTextNode=function(t){return window.document.createTextNode(t)},i.createElement=function(t){return window.document.createElement(t)},i.parseMarkup=function(t,e,n){var r,s=[];if(!t)return r="xml"===e?(new window.DOMParser).parseFromString("<dummy/>","text/xml"):(new window.DOMParser).parseFromString("<html></html>","text/html"),new i(r);var o=new window.DOMParser;if("html"===e?(n=t.search(/<\s*html/i)>=0,r=o.parseFromString(t,"text/html")):"xml"===e&&(r=o.parseFromString(t,"text/xml")),!r)throw new Error("Could not parse DOM string.");if("html"===e)if(n)s=[r.querySelector("html")];else{var a=r.querySelector("body");s=a.childNodes}else"xml"===e&&(s=n?[r]:r.childNodes);var h=Array.prototype.map.call(s,function(t){return new i(t)});return 1===h.length?h[0]:h},i.wrapNativeElement=function(t){return t?t._wrapper?t._wrapper:t instanceof window.Node?3===t.nodeType?new r(t):new i(t):t===window?i.getBrowserWindow():void 0:null},r.Prototype=function(){this._isBrowserDOMElement=!0,["getParent","getNextSibling","getPreviousSibling","getTextContent","setTextContent","getInnerHTML","setInnerHTML","getOuterHTML","getNativeElement","clone"].forEach(function(t){this[t]=i.prototype[t]}.bind(this))},c.TextNode.extend(r),c._defineProperties(r,["nodeType","textContent","innerHTML","outerHTML","parentNode"]),i.TextNode=r,s.Prototype=function(){var t=i.prototype;this.on=function(){return t.on.apply(this,arguments)},this.off=function(){return t.off.apply(this,arguments)},this.addEventListener=function(){return t.addEventListener.apply(this,arguments)},this.removeEventListener=function(){return t.removeEventListener.apply(this,arguments)},this.getEventListeners=i.prototype.getEventListeners},h.initClass(s),i.getBrowserWindow=function(){return window.__BrowserDOMElementWrapper__?window.__BrowserDOMElementWrapper__:new s(window)};var d,p;i.isReverse=function(t,e,n,i){if(n&&t){d||(d=window.document.createRange(),p=window.document.createRange()),d.setStart(t.getNativeElement(),e),p.setStart(n.getNativeElement(),i);var r=d.compareBoundaryPoints(window.Range.START_TO_START,p);if(1===r)return!0}return!1},i.getWindowSelection=function(){var t=window.getSelection(),e={anchorNode:i.wrapNativeElement(t.anchorNode),anchorOffset:t.anchorOffset,focusNode:i.wrapNativeElement(t.focusNode),focusOffset:t.focusOffset};return e},e.exports=i},{"../util/oo":305,"./DOMElement":278,"./DelegatedEvent":281,"lodash/isNumber":250,"lodash/isString":253}],276:[function(t,e,n){"use strict";function i(t){this.el=t,this.$el=c(t),t._wrapper=this,this.htmlProps={}}var r=t("lodash/isString"),s=t("lodash/last"),o=t("lodash/extend"),a=t("lodash/clone"),h=t("lodash/map"),c=t("../util/cheerio.customized"),u=t("./DOMElement");i.Prototype=function(){this._isCheerioDOMElement=!0,this.getNativeElement=function(){return this.el},this._wrapNativeElement=function(t){return t._wrapper?t._wrapper:new i(t)},this.hasClass=function(t){return this.$el.hasClass(t)},this.addClass=function(t){return this.$el.addClass(t),this},this.removeClass=function(t){return this.$el.removeClass(t),this},this.getClasses=function(){return this.$el.attr("class")},this.setClasses=function(t){return this.$el.attr("class",t),this},this.getAttribute=function(t){return this.$el.attr(t)},this.setAttribute=function(t,e){return this.$el.attr(t,e),this},this.removeAttribute=function(t){return this.$el.removeAttr(t),this},this.getAttributes=function(){var t=a(this.el.attribs);return t},this.getProperty=function(t){return this.$el.prop(t)},this.setProperty=function(t,e){return this.htmlProps[t]=e,this.$el.prop(t,e),this},this.removeProperty=function(t){return delete this.htmlProps[t],delete this.el[t],this},this.getTagName=function(){return"tag"!==this.el.type?"":this.el.name.toLowerCase()},this.setTagName=function(t){var e=c._createElement(t,this.el.root),n=c(e);return n.html(this.$el.html()),e.attribs=o({},this.el.attribs),this._replaceNativeEl(e),this},this.getId=function(){return this.$el.attr("id")},this.setId=function(t){return this.$el.attr("id",t),this},this.getTextContent=function(){return this.$el.text()},this.setTextContent=function(t){return this.$el.text(t),this},this.getInnerHTML=function(){return this.$el.html()},this.setInnerHTML=function(t){return this.$el.html(t),this},this.getOuterHTML=function(){return c._serialize(this.el)},this.getValue=function(){return this.$el.val()},this.setValue=function(t){return this.$el.val(t),this},this.getStyle=function(t){return this.$el.css(t)},this.setStyle=function(t,e){return this.$el.css(t,e),this},this.addEventListener=function(){return this},this.removeEventListener=function(){return this},this.removeAllEventListeners=function(){return this},this.getEventListeners=function(){return[]},this.getChildCount=function(){return this.el.children.length},this.getChildNodes=function(){var t=this.el.children;return t=t.map(function(t){return this._wrapNativeElement(t)}.bind(this))},this.getChildren=function(){var t=this.el.children;return t=t.filter(function(t){return"tag"===t.type}),t=t.map(function(t){return this._wrapNativeElement(t)}.bind(this))},this.getChildAt=function(t){return this._wrapNativeElement(this.el.children[t])},this.getChildIndex=function(t){if(!t._isCheerioDOMElement)throw new Error("Expecting a CheerioDOMElement instance.");return this.el.children.indexOf(t.el)},this.getFirstChild=function(){var t=this.el.children[0];return t?i.wrapNativeElement(t):null},this.getLastChild=function(){var t=s(this.el.children);return t?i.wrapNativeElement(t):null},this.getNextSibling=function(){var t=this.el.next;return t?i.wrapNativeElement(t):null},this.getPreviousSibling=function(){var t=this.el.previous;return t?i.wrapNativeElement(t):null},this.isTextNode=function(){return"text"===this.el.type},this.isElementNode=function(){return"tag"===this.el.type},this.isCommentNode=function(){return"comment"===this.el.type},this.isDocumentNode=function(){return this.el===this.el.root},this.clone=function(){var t=this.$el.clone()[0];return this._wrapNativeElement(t)},this.createElement=function(t){var e=c._createElement(t,this.el.root);return this._wrapNativeElement(e)},this.createTextNode=function(t){var e=c._createTextNode(t);return this._wrapNativeElement(e)},this.is=function(t){return this.$el.is(t)},this.getParent=function(){var t=this.el.parent;return t?this._wrapNativeElement(t):null},this.getRoot=function(){for(var t=this.el,e=t;e;)t=e,e=t.parent;return this._wrapNativeElement(t)},this.find=function(t){var e=this.$el.find(t);return e.length>0?this._wrapNativeElement(e[0]):null},this.findAll=function(t){var e=this.$el.find(t);return e.length>0?h(e,function(t){return this._wrapNativeElement(t)}.bind(this)):[]},this._normalizeChild=function(t){if(r(t)&&(t=this.createTextNode(t)),t._wrapper&&(t=t._wrapper),!t||!t._isCheerioDOMElement)throw new Error("Illegal argument: only String and CheerioDOMElement instances are valid.");return console.assert(t.el._wrapper===t,"Expecting a backlink between native element and CheerioDOMElement"),t.getNativeElement()},this.appendChild=function(t){return t=this._normalizeChild(t),this.el.children.push(t),t.parent=this.el,this},this.insertAt=function(t,e){e=this._normalizeChild(e);var n=this.el.children;return t>=n.length?n.push(e):n.splice(t,0,e),e.parent=this.el,this},this.insertBefore=function(t,e){var n=this.el.children.indexOf(e.el);if(n>-1)return this.insertAt(n,t);throw new Error("insertBefore(): reference node is not a child of this element.")},this.removeAt=function(t){if(0>t||t>=this.el.children.length)throw new Error("removeAt(): Index out of bounds.");var e=this.el.children[t];return e.parent=null,this.el.children.splice(t,1),this},this.removeChild=function(t){if(!t||!t._isCheerioDOMElement)throw new Error("removeChild(): Illegal arguments. Expecting a CheerioDOMElement instance.");var e=this.el.children.indexOf(t.el);if(0>e)throw new Error("removeChild(): element is not a child.");return this.removeAt(e),this},this.replaceChild=function(t,e){if(!(e&&t&&e._isCheerioDOMElement&&t._isCheerioDOMElement))throw new Error("replaceChild(): Illegal arguments. Expecting BrowserDOMElement instances.");var n=this.el.children.indexOf(t.el);return n>-1&&(this.removeAt(n),this.insertAt(n,e.el)),this},this.empty=function(){return this.$el.empty(),this},this.remove=function(){return this.$el.remove(),this},this._replaceNativeEl=function(t){var e=c(t);this.$el.replaceWith(e),this.el=t,this.$el=e},this.isInDocument=function(){for(var t=this.el;t;){if(t===t.root)return!0;t=t.parent}return!1}},u.extend(i),u._defineProperties(i,u._propertyNames),i.createTextNode=function(t){return c._createTextNode(t)},i.createElement=function(t){return c("<"+t+">")[0]},i.parseMarkup=function(t,e){var n,r=[];if(!t)return n="xml"===e?c.parseXML(""):c.parseHTML(""),new i(n);r=c.parseXML(t);var s=r.map(function(t){return new i(t)});return 1===s.length?s[0]:s},i.wrapNativeElement=function(t){return t._wrapper?t._wrapper:new i(t)},e.exports=i},{"../util/cheerio.customized":301,"./DOMElement":278,"lodash/clone":228,"lodash/extend":232,"lodash/isString":253,"lodash/last":258,"lodash/map":259}],277:[function(t,e,n){"use strict";function i(t,e){d.call(this),this.__id__=_++,this.parent=t,this.el=null,this.refs={},this.__foreignRefs__={},this._actionHandlers={},this.context=this._getContext()||{},Object.freeze(this.context),this.props=e||{},Object.freeze(this.props),this.state=this.getInitialState()||{},Object.freeze(this.state)}function r(t){return t?t._comp:void 0}function s(t){return console.assert(t._comp,"Expecting a back-link to the component instance."),r(t)}function o(t){return t}function a(t,e){if(!t._isComponent)throw new Error("Illegal argument: 'parent' must be a Component.");if(!e._isVirtualHTMLElement)throw new Error("Illegal argument: 'virtualComp' must be a VirtualHTMLElement.");this.parent=t,this.context=this._getContext()||{},Object.freeze(this.context)}function h(t,e){if(!t._isComponent)throw new Error("Illegal argument: 'parent' must be a Component.");if(!e._isVirtualTextNode)throw new Error("Illegal argument: 'virtualComp' must be a VirtualTextNode.");this.parent=t}var c=t("lodash/isString"),u=t("lodash/isFunction"),l=t("lodash/extend"),f=t("lodash/each"),d=t("../util/EventEmitter"),p=t("./RenderingEngine"),g=t("./VirtualElement"),m=t("./DOMElement"),v=t("./DefaultDOMElement"),y=t("../util/inBrowser"),_=0;i.Prototype=function(){function t(t){t.triggerDispose(),t._owner&&t._ref&&(console.assert(t._owner.refs[t._ref]===t,"Owner's ref should point to this child instance."),delete t._owner.refs[t._ref])}function e(t,e){t.isMounted()&&e.triggerDidMount(!0),e._owner&&e._ref&&(e._owner.refs[e._ref]=e)}l(this,d.prototype),this._isComponent=!0,this.getChildContext=function(){return this.childContext||{}},this.getInitialState=function(){return{}},this.getParent=function(){return this.parent},this.getRoot=function(){for(var t=this,e=t;e;)t=e,e=t.getParent();return t},this.getLabel=function(t){var e=this.context.labelProvider;if(!e)throw new Error("Missing labelProvider.");return e.getLabel(t)},this.render=function(t){return t("div")},this.mount=function(t){return this.el||this._render(),t._isDOMElement||(t=v.wrapNativeElement(t)),t.appendChild(this.el),t.isInDocument()&&this.triggerDidMount(!0),this},this.shouldRerender=function(t){return!0},this.rerender=function(){this._rerender(this.props,this.state)},this._rerender=function(t,e){this._render(t,e),this.isMounted()||this.didUpdate(t,e)},this._render=function(t,e){if(this.__isRendering__)throw new Error("Component is rendering already.");this.__isRendering__=!0;try{var n=new p;n._render(this,t,e)}finally{delete this.__isRendering__}},this.triggerDidMount=function(){this.getChildren().forEach(function(t){t.triggerDidMount(!0)}),this.__isMounted__||(this.__isMounted__=!0,this.didMount())},this.didMount=function(){},this.didUpdate=function(){},this.isMounted=function(){return this.__isMounted__},this.triggerDispose=function(){this.getChildren().forEach(function(t){t.triggerDispose()}),this.dispose(),this.__isMounted__=!1},this.dispose=function(){},this._setParent=function(t){this.parent=t,this.context=this._getContext()||{},Object.freeze(this.context)},this.send=function(t){for(var e=this;e;){if(e._actionHandlers&&e._actionHandlers[t])return e._actionHandlers[t].apply(e,Array.prototype.slice.call(arguments,1)),!0;e=e.getParent()}return console.warn("Action",t,"was not handled."),!1},this.handleActions=function(t){return f(t,function(t,e){this.handleAction(e,t)}.bind(this)),this},this.handleAction=function(t,e){if(!t||!e||!u(e))throw new Error("Illegal arguments.");e=e.bind(this),this._actionHandlers[t]=e},this.getState=function(){return this.state},this.setState=function(t){var e=this.props,n=this.state,i=!this.__isSettingProps__&&this.shouldRerender(this.getProps(),t);this.willUpdateState(t),this.state=t||{},Object.freeze(this.state),i?this._rerender(e,n):this.__isSettingProps__||this.didUpdate(e,n)},this.extendState=function(t){t=l({},this.state,t),this.setState(t)},this.willUpdateState=function(t){},this.getProps=function(){return this.props},this.setProps=function(t){var e=this.props,n=this.state,i=this.shouldRerender(t,this.state);this._setProps(t),i?this._rerender(e,n):this.didUpdate(e,n)},this._setProps=function(t){t=t||{},this.__isSettingProps__=!0;try{this.willReceiveProps(t),this.props=t||{},Object.freeze(t)}finally{delete this.__isSettingProps__}},this.extendProps=function(t){var e=l({},this.props,t);this.setProps(e)},this.willReceiveProps=function(t){},this.getChildNodes=function(){if(!this.el)return[];var t=this.el.getChildNodes();return t=t.map(r).filter(o)},this.getChildren=function(){if(!this.el)return[];var t=this.el.getChildren();return t=t.map(r).filter(o)},this.getChildAt=function(t){var e=this.el.getChildAt(t);return s(e)},this.find=function(t){var e=this.el.find(t);return r(e)},this.findAll=function(t){var e=this.el.findAll(t);return e.map(r).filter(o)},this.appendChild=function(t){this.insertAt(this.getChildCount(),t)},this.insertAt=function(t,n){if(c(n)&&(n=new g.TextNode(n)),!n._isVirtualElement)throw new Error('Invalid argument: "child" must be a VirtualElement.');var i=(new p)._renderChild(this,n);this.el.insertAt(t,i.el),e(this,i)},this.removeAt=function(e){var n=this.el.getChildAt(e);if(n){var i=s(n);t(i),this.el.removeAt(e)}},this.removeChild=function(e){if(!e||!e._isComponent)throw new Error("removeChild(): Illegal arguments. Expecting a Component instance.");t(e),this.el.removeChild(e.el)},this.replaceChild=function(e,n){if(!(n&&e&&n._isComponent&&e._isComponent))throw new Error("replaceChild(): Illegal arguments. Expecting BrowserDOMElement instances.");t(e),this.el.replaceChild(n.el,e.el),this.isMounted()&&n.triggerDidMount(!0)},this.empty=function(){return this.el&&(this.getChildNodes().forEach(function(e){t(e)}),this.el.empty()),this},this.remove=function(){t(this),this.el.remove()},this._getContext=function(){var t={},e=this.getParent();return e&&(t=l(t,e.context),e.getChildContext)?l(t,e.getChildContext()):t},this.addEventListener=function(){throw new Error("Not supported.")},this.removeEventListener=function(){throw new Error("Not supported.")},this.insertBefore=function(){throw new Error("Not supported.")}},m.Delegator.extend(i),m._defineProperties(i,m._propertyNames),i.unwrap=r,i["static"].render=function(t){t=t||{};var e=this.__class__,n=new e(null,t);return n._render(),n},i["static"].mount=function(t,e){if(1===arguments.length&&(t={},e=arguments[0]),c(e)){var n=e;if(!y)throw new Error("This selector is not supported on server side.");e=window.document.querySelector(n)}e._isDOMElement||(e=new v.wrapNativeElement(e));var i=this.__class__,r=new i(null,t);return r.mount(e),r},i.mount=function(t,e,n){return 2===arguments.length&&(e={},n=arguments[1]),t["static"].mount(e,n)},a.Prototype=function(){this._isElementComponent=!0},i.extend(a),i.Element=a,h.Prototype=function(){this._isTextNodeComponent=!0,this.setTextContent=function(t){if(!this.el)throw new Error("Component must be rendered first.");if(this.el.textContent!==t){var e=this.el.createTextNode(t);this.el._replaceNativeEl(e.getNativeElement())}}},i.extend(h),i.TextNode=h,Object.defineProperty(i,"$$",{get:function(){throw new Error(["With Substance Beta 4 we introduced a breaking change.","We needed to turn the former static Component.$$ into a contextualized implementation, which is now served via Component.render($$).","FIX: change your signature of 'this.render()' in all your Components to 'this.render($$)"].join("\n"))}}),i.unwrapDOMElement=function(t){return r(t)},e.exports=i},{"../util/EventEmitter":298,"../util/inBrowser":304,"./DOMElement":278,"./DefaultDOMElement":279,"./RenderingEngine":285,"./VirtualElement":294,"lodash/each":230,"lodash/extend":232,"lodash/isFunction":248,"lodash/isString":253}],278:[function(t,e,n){"use strict";function i(){}function r(){this.el=null}function s(t,e,n){if(!l(t)||!c(e))throw new Error("Illegal arguments: 'eventName' must be a String, and 'handler' must be a Function.");n=n||{};var i=e,r=n.context,s=Boolean(n.capture);r&&(e=e.bind(r)),n.once===!0&&(e=o(this,e)),this.eventName=t,this.originalHandler=i,this.handler=e,this.capture=s,this.context=r,this.options=n,this._el=null}function o(t,e){return function(n){e(n),t._el.removeEventListener(t)}}function a(){}var h=t("../util/oo"),c=t("lodash/isFunction"),u=t("lodash/isObject"),l=t("lodash/isString"),f=t("lodash/isArray"),d=t("lodash/findIndex"),p=t("lodash/forEach"),g=t("../util/ArrayIterator");i.Prototype=function(){this._isDOMElement=!0;var t="This method is not implemented.";this.getNativeElement=function(){throw new Error(t)},this.hasClass=function(e){throw new Error(t)},this.addClass=function(e){throw new Error(t)},this.removeClass=function(e){throw new Error(t)},this.attr=function(){if(1===arguments.length){if(l(arguments[0]))return this.getAttribute(arguments[0]);u(arguments[0])&&p(arguments[0],function(t,e){this.setAttribute(e,t)}.bind(this))}else 2===arguments.length&&this.setAttribute(arguments[0],arguments[1]);return this},this.removeAttr=function(t){var e=t.split(/\s+/);return 1===e.length?this.removeAttribute(t):e.forEach(function(t){this.removeAttribute(t)}.bind(this)),this},this.getAttribute=function(e){throw new Error(t)},this.setAttribute=function(e,n){throw new Error(t)},this.removeAttribute=function(e){throw new Error(t)},this.getAttributes=function(){throw new Error(t)},this.htmlProp=function(){if(1===arguments.length){if(l(arguments[0]))return this.getProperty(arguments[0]);u(arguments[0])&&p(arguments[0],function(t,e){this.setProperty(e,t)}.bind(this))}else 2===arguments.length&&this.setProperty(arguments[0],arguments[1]);return this},this.getProperty=function(e){throw new Error(t)},this.setProperty=function(e,n){throw new Error(t)},this.removeProperty=function(e){throw new Error(t)},this.getTagName=function(){throw new Error(t)},this.setTagName=function(e){throw new Error(t)},this.getId=function(){throw new Error(t)},this.setId=function(e){throw new Error(t)},this.val=function(t){return 0===arguments.length?this.getValue():(this.setValue(t),this)},this.getValue=function(){throw new Error(t)},this.setValue=function(e){throw new Error(t)},this.css=function(){if(1===arguments.length){if(l(arguments[0]))return this.getStyle(arguments[0]);if(!u(arguments[0]))throw new Error("Illegal arguments.");p(arguments[0],function(t,e){this.setStyle(e,t)}.bind(this))}else{if(2!==arguments.length)throw new Error("Illegal arguments.");this.setStyle(arguments[0],arguments[1])}return this},this.getStyle=function(e){throw new Error(t)},this.setStyle=function(e,n){throw new Error(t)},this.text=function(t){return 0===arguments.length?this.getTextContent():(this.setTextContent(t),this)},this.getTextContent=function(){throw new Error(t)},this.setTextContent=function(e){throw new Error(t)},this.html=function(t){return 0===arguments.length?this.getInnerHTML():(this.setInnerHTML(t),this)},this.getInnerHTML=function(){throw new Error(t)},this.setInnerHTML=function(e){throw new Error(t)},this.getOuterHTML=function(){throw new Error(t)},this.on=function(t,e,n,i){if(!l(t))throw new Error('Illegal argument: "event" must be a String.');if(i=i||{},n&&(i.context=n),i.selector&&!l(i.selector))throw new Error("Illegal argument: selector must be a string.");if(!e||!c(e))throw new Error("Illegal argument: invalid handler function for event "+t);return this.addEventListener(t,e,i),this},this.off=function(t,e){if(1!==arguments.length||l(t))this.removeEventListener(t,e);else{var n=arguments[0];this.getEventListeners().filter(function(t){return t.context===n}).forEach(function(t){this.removeEventListener(t)}.bind(this))}return this},this.addEventListener=function(e,n,i){throw new Error(t)},this.removeEventListener=function(e,n){throw new Error(t)},this.getEventListeners=function(){throw new Error(t)},this.getNodeType=function(){if(this.isTextNode())return"text";if(this.isCommentNode())return"comment";if(this.isElementNode())return"element";if(this.isDocumentNode())return"document";throw new Error("Unsupported node type")},this.getChildCount=function(){throw new Error(t)},this.getChildNodes=function(){throw new Error(t)},this.getChildren=function(){throw new Error(t)},this.getChildAt=function(e){throw new Error(t)},this.getChildIndex=function(e){throw new Error(t)},this.getChildNodeIterator=function(){return new g(this.getChildNodes())},this.getLastChild=function(){throw new Error(t)},this.getFirstChild=function(){throw new Error(t)},this.getNextSibling=function(){throw new Error(t)},this.getPreviousSibling=function(){throw new Error(t)},this.isTextNode=function(){throw new Error(t)},this.isElementNode=function(){throw new Error(t)},this.isCommentNode=function(){throw new Error(t)},this.isDocumentNode=function(){throw new Error(t)},this.clone=function(){throw new Error(t)},this.createElement=function(e){throw new Error(t)},this.createTextNode=function(e){throw new Error(t)},this.is=function(e){throw new Error(t)},this.getParent=function(){throw new Error(t)},this.getRoot=function(){throw new Error(t)},this.find=function(e){throw new Error(t)},this.findAll=function(e){throw new Error(t)},this.append=function(t){var e;if(1===arguments.length){if(!f(t))return this.appendChild(t),this;e=t}else e=arguments;return e&&Array.prototype.forEach.call(e,this.appendChild.bind(this)),this},this.appendChild=function(e){throw new Error(t)},this.insertAt=function(e,n){throw new Error(t)},this.insertBefore=function(e,n){throw new Error(t)},this.removeAt=function(e){throw new Error(t)},this.removeChild=function(e){throw new Error(t)},this.replaceChild=function(e,n){throw new Error(t)},this.remove=function(){var t=this.getParent();t&&t.removeChild(this)},this.empty=function(){throw new Error(t)},this.remove=function(){throw new Error(t)},this.serialize=function(){return this.outerHTML},this.isInDocument=function(){return!1},this.focus=function(){return this},this.blur=function(){return this},this.click=function(){return this},this.getWidth=function(){return 0},this.getHeight=function(){return 0},this.getOuterHeight=function(t){return 0},this.getOffset=function(){return{top:0,left:0}},this.getPosition=function(){return{top:0,left:0}}},h.initClass(i);var m={id:{configurable:!0,get:function(){return this.getId()},set:function(t){this.setId(t)}},tagName:{configurable:!0,get:function(){return this.getTagName()},set:function(t){this.setTagName(t)}},nodeName:{configurable:!0,get:function(){return this.getTagName()}},nodeType:{configurable:!0,get:function(){return this.getNodeType()},set:function(){throw new Error("ui/DOMElement#nodeType is readonly.")}},textContent:{configurable:!0,get:function(){return this.getTextContent()},set:function(t){this.setTextContent(t)}},innerHTML:{configurable:!0,get:function(){return this.getInnerHTML()},set:function(t){this.setInnerHTML(t)}},outerHTML:{configurable:!0,get:function(){return this.getOuterHTML()},set:function(){throw new Error("ui/DOMElement#outerHTML is readonly.")}},childNodes:{configurable:!0,get:function(){return this.getChildNodes()},set:function(){throw new Error("ui/DOMElement#childNodes is readonly.")}},children:{configurable:!0,get:function(){return this.getChildren()},set:function(){throw new Error("ui/DOMElement#children is readonly.")}},parentNode:{configurable:!0,get:function(){return this.getParent()},set:function(){throw new Error("ui/DOMElement#parentNode is readonly.")}},height:{configurable:!0,get:function(){return this.getHeight()}},width:{configurable:!0,get:function(){return this.getWidth()}}};i._propertyNames=Object.keys(m),i._defineProperties=function(t,e){e=e||i._propertyNames,e.forEach(function(e){var n=m[e];n&&Object.defineProperty(t.prototype,e,n)})},i.parseHTML=function(e){var n=t("./DefaultDOMElement");return n.parseHTML(e)},i.parseXML=function(e){var n=t("./DefaultDOMElement");return n.parseXML(e)},r.Prototype=function(){var t={getNativeElement:null,hasClass:!1,getAttribute:null,getAttributes:{},getProperty:null,getTagName:"throw",getId:"throw",getValue:null,getStyle:null,getTextContent:"",getInnerHTML:"",getOuterHTML:"",getChildCount:0,getChildNodes:[],getChildren:[],getChildAt:null,getParent:null,getRoot:null,getEventListeners:[],find:null,findAll:[],is:!1,isTextNode:!1,isElementNode:!1,isCommentNode:!1,isDocumentNode:!1,isInDocument:!1,position:null};p(t,function(t,e){this[e]=function(){if(!this.el){if("throw"===t)throw new Error("This component has not been rendered yet.");return t}return this.el[e].apply(this.el,arguments)}}.bind(this)),["addClass","removeClass","setAttribute","removeAttribute","setProperty","removeProperty","setTagName","setId","setValue","setStyle","setTextContent","setInnerHTML","addEventListener","removeEventListener","appendChild","insertAt","insertBefore","remove","removeAt","removeChild","replaceChild","empty","focus","blur","click"].forEach(function(t){this[t]=function(){if(!this.el)throw new Error("This component has not been rendered yet.");return this.el[t].apply(this.el,arguments),this}}.bind(this))},i.extend(r),i.Delegator=r,s.prototype._isDOMEventListener=!0,s.matches=function(t,e){return t.eventName===e.eventName&&t.originalHandler===e.originalHandler},i.EventListener=s,i._findEventListenerIndex=function(t,e,n){var i=-1;return i=arguments[1]._isDOMEventListener?t.indexOf(arguments[1]):d(t,s.matches.bind(null,{eventName:e,originalHandler:n}))},a.Prototype=function(){this._isDOMElement=!0,this.isTextNode=function(){return!0},this.getNodeType=function(){return"text"},this.isElementNode=this.isDocumentNode=this.isCommentNode=function(){return!1},["getParent","getNextSibling","getPreviousSibling","text","getTextContent","setTextContent","clone"].forEach(function(t){this[t]=i.prototype[t]}.bind(this))},h.initClass(a),i.TextNode=a,e.exports=i},{"../util/ArrayIterator":296,"../util/oo":305,"./DefaultDOMElement":279,"lodash/findIndex":235,"lodash/forEach":236,"lodash/isArray":242,"lodash/isFunction":248,"lodash/isObject":251,"lodash/isString":253}],279:[function(t,e,n){"use strict";var i,r=t("../util/inBrowser");i=t(r?"./BrowserDOMElement.js":"./CheerioDOMElement.js");var s={};s.createTextNode=function(t){var e=i.createTextNode(t);return new i(e)},s.createElement=function(t){var e=i.createElement(t);return new i(e)},s._create=function(t){return new i(t)},s.getBrowserWindow=function(){return r?i.getBrowserWindow():s.createElement("div")},s.parseHTML=function(t){return i.parseMarkup(t,"html")},s.parseXML=function(t,e){return i.parseMarkup(t,"xml",e)},s.wrapNativeElement=function(e){if(!e)return null;if(r&&(e instanceof window.Node||e===window)){var n=t("./BrowserDOMElement");return n.wrapNativeElement(e)}if(e.root&&"root"===e.root.type){var i=t("./CheerioDOMElement");return i.wrapNativeElement(e)}},s.isReverse=function(e,n,i,s){if(r){var o=t("./BrowserDOMElement");return o.isReverse(e,n,i,s)}throw new Error("Not implemented.");
},e.exports=s},{"../util/inBrowser":304,"./BrowserDOMElement":275,"./BrowserDOMElement.js":275,"./CheerioDOMElement":276,"./CheerioDOMElement.js":276}],280:[function(t,e,n){"use strict";function i(t,e){this.lang=e||"en",this.labels=t}var r=t("../util/oo");i.Prototype=function(){this.getLabel=function(t){var e=this.labels[this.lang];return e?e[t]||t:t}},r.initClass(i),e.exports=i},{"../util/oo":305}],281:[function(t,e,n){"use strict";function i(t,e,n){this.owner=t,this.target=e,this.originalEvent=n}e.exports=i},{}],282:[function(t,e,n){"use strict";var i=t("../util/oo"),r=function(){};r.Prototype=function(){this.uploadFile=function(t,e){var n=window.URL.createObjectURL(t);e(null,n)}},i.initClass(r),e.exports=r},{"../util/oo":305}],283:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./Component");i.Prototype=function(){this.render=function(t){return t("i").addClass("fa "+this.props.icon)}},r.extend(i),e.exports=i},{"./Component":277}],284:[function(t,e,n){"use strict";function i(t){this.map={},r(t,function(t,e){var n=t.fontawesome;n&&this.addIcon(e,n)}.bind(this))}var r=t("lodash/forEach"),s=t("../util/oo"),o=t("./FontAwesomeIcon");i.Prototype=function(){this.renderIcon=function(t,e){var n=this.map[e];return n?t(o,{icon:n}):void 0},this.addIcon=function(t,e){this.map[t]=e}},s.initClass(i),e.exports=i},{"../util/oo":305,"./FontAwesomeIcon":283,"lodash/forEach":236}],285:[function(t,e,n){"use strict";function i(){}function r(t){this.owner=t,this.refs={},this.foreignRefs={},this.elements=[],this.components=[],this.$$=this._createComponent.bind(this),this.$$.capturing=!0}function s(t){var e=new l.Component(t.constructor);return e._comp=t,t.__htmlConfig__&&e._mergeHTMLConfig(t.__htmlConfig__),e}function o(){this.poluted=[],this.id="__"+c()}var a=t("lodash/each"),h=t("../util/oo"),c=t("../util/uuid"),u=t("../util/substanceGlobals"),l=t("./VirtualElement"),f=t("./DefaultDOMElement");i.Prototype=function(){function e(n,i){var r=t("./Component"),s=i._comp;console.assert(!s,"Component instance should not exist when this method is used.");var o=i.parent._comp;return o||(o=e(n,i.parent)),i._isVirtualComponent?(console.assert(o,"A Component should have a parent."),s=new i.ComponentClass(o,i.props),s.__htmlConfig__=i._copyHTMLConfig()):i._isVirtualHTMLElement?s=new r.Element(o,i):i._isVirtualTextNode&&(s=new r.TextNode(o,i)),i._ref&&(s._ref=i._ref),i._owner&&(s._owner=i._owner._comp),i._comp=s,s}function n(t,i,s){if(t.isCaptured(i))return i;var o=i._comp;if(o||(o=e(t,i),t.setNew(i)),i._isVirtualComponent){var a;if(s?a=!0:(a=!o.el||o.shouldRerender(i.props),o.__htmlConfig__=i._copyHTMLConfig(),t.setOldProps(i,o.props),t.setOldState(i,o.state),o._setProps(i.props),t.isNew(i)||t.setUpdated(i)),a){var h=new r(i),c=o.render(h.$$);if(!c||!c._isVirtualHTMLElement)throw new Error("Component.render must return VirtualHTMLElement");if(o.__htmlConfig__&&c._mergeHTMLConfig(o.__htmlConfig__),c._comp=o,i._content=c,!t.isNew(i)&&o.isMounted()&&t.setUpdated(i),y(t,o,c),u.DEBUG_RENDERING){for(var l=c.children.slice(0);l.length;){var f=l.shift();t.isCaptured(f)||f._isVirtualComponent||(f._comp||e(t,f),f._isVirtualHTMLElement&&f.children.length>0&&(l=l.concat(f.children)),t.setCaptured(f))}t.setCaptured(c);for(var d=new O(t,h);d.hasPendingCaptures();)d.reset(),o.render(d.$$)}else n(t,i._content)}else t.setSkipped(i)}else if(i._isVirtualHTMLElement)for(var p=0;p<i.children.length;p++)n(t,i.children[p]);return t.setCaptured(i),i}function o(t,e){if(!t.isSkipped(e)){console.assert(t.isCaptured(e),"VirtualElement must be captured before rendering");var n=e._comp;if(console.assert(n&&n._isComponent,"A captured VirtualElement must have a component instance attached."),e._isVirtualComponent)return void o(t,e._content);if(n.el||(n.el=b(e),n.el._comp=n),C(n,e),e._isVirtualHTMLElement&&!e.hasInnerHTML()){var i,r,s,h=e.children,c=0,u=0,l=[];for(n.el.getChildNodes().forEach(function(e){var i=e._comp;!i||t.isRelocated(i)?n.el.removeChild(e):l.push(i)});c<l.length||u<h.length;){do i=l[c++];while(i&&t.isDetached(i));if(r=h[u++],i&&!r){for(;i;)m(t,n,i),i=l[c++];break}i&&i.el.isTextNode()&&r&&r._isVirtualTextNode&&i.el.textContent===r.text||(t.isRendered(r)||o(t,r),s=r._comp,t.isRelocated(s)&&s._setParent(n),console.assert(s,"Component instance should now be available."),!r||i?t.isMapped(r)?s===i||(t.setDetached(i),m(t,n,i),u--):t.isMapped(i)?(g(t,n,s,i),c--):p(t,n,i,s):d(t,n,s))}}var f={},v={};e._context&&(a(e._context.refs,function(t,e){f[e]=t._comp}),a(e._context.foreignRefs,function(t,e){v[e]=t._comp})),n.refs=f,n.__foreignRefs__=v,t.setRendered(e)}}function c(t,e){e._isVirtualComponent?(t.isSkipped(e)||e._content.children.forEach(c.bind(null,t)),t.isUpdated(e)&&e._comp.didUpdate(t.getOldProps(e),t.getOldState(e))):e._isVirtualHTMLElement&&e.children.forEach(c.bind(null,t))}function d(t,e,n){e.el.appendChild(n.el),v(t,e,n)}function p(t,e,n,i){e.el.replaceChild(n.el,i.el),t.isDetached(n)||n.triggerDispose(),v(t,e,i)}function g(t,e,n,i){e.el.insertBefore(n.el,i.el),v(t,e,n)}function m(t,e,n){e.el.removeChild(n.el),t.isDetached(n)||n.triggerDispose()}function v(t,e,n){t.isDetached(n)||!e.isMounted()||n.isMounted()||n.triggerDidMount(!0)}function y(t,e,n){var i={},r={};n._context&&(i=n._context.refs,r=n._context.foreignRefs);var s=e.refs,o=e.__foreignRefs__;a(i,function(e,n){var i=s[n];i&&_(t,i,e)}),a(r,function(e,n){var i=o[n];i&&_(t,i,e)})}function _(t,e,n){if(!e&&!n)return!0;if(!e||!n)return!1;if(t.isMapped(n)||t.isMapped(e))return n._comp===e;if(n._comp)return n._comp===e?(t.setMapped(n),t.setMapped(e),!0):!1;if(!w(e,n))return!1;n._comp=e,t.setMapped(n),t.setMapped(e);var i,r=e.getParent();if(n.parent)i=_(t,r,n.parent);else if(n._preliminaryParent){for(;r&&r._isElementComponent;)r=r.getParent();i=_(t,r,n._preliminaryParent)}return i||(t.setRelocated(n),t.setRelocated(e)),i}function w(t,e){return t._isElementComponent&&e._isVirtualHTMLElement||t._isComponent&&e._isVirtualComponent&&t.constructor===e.ComponentClass||t._isTextNodeComponent&&e._isVirtualTextNode}function b(t){var e;return e=t._isVirtualTextNode?f.createTextNode(t.text):f.createElement(t.tagName)}function C(t,e){if(t._isTextNodeComponent)return void t.setTextContent(e.text);var n=t.el;console.assert(n,"Component's element should exist at this point.");var i=n.getTagName();if(e.tagName!==i&&n.setTagName(e.tagName),x({oldHash:n.getAttributes(),newHash:e.getAttributes(),update:function(t,e){n.setAttribute(t,e)},remove:function(t){n.removeAttribute(t)}}),x({oldHash:n.htmlProps,newHash:e.htmlProps,update:function(t,e){n.setProperty(t,e)},remove:function(t){n.removeProperty(t)}}),E({el:n,oldListeners:n.getEventListeners(),newListeners:e.getEventListeners()}),e.hasInnerHTML()){if(n._hasInnerHTML){var r=n.getInnerHTML(),s=e.getInnerHTML();r!==s&&n.setInnerHTML(s)}else n.empty(),n.setInnerHTML(e.getInnerHTML());n._hasInnerHTML=!0}}function x(t){var e,n=t.newHash,i=t.oldHash||{},r={},s=t.update,o=t.remove;for(e in n)if(n.hasOwnProperty(e)){var a=i[e],h=n[e];r[e]=!0,a!==h&&s(e,h)}for(e in i)i.hasOwnProperty(e)&&!r[e]&&o(e)}function E(t){var e=t.el,n=t.newListeners||[];e.removeAllEventListeners();for(var i=0;i<n.length;i++)e.addEventListener(n[i])}function O(t,e){this.state=t,this.owner=e.owner,this.refs={},this.foreignRefs={},this.elements=e.elements,this.pos=0,this.updates=e.components.length,this.remaining=this.updates,this.$$=this._createComponent.bind(this)}this._render=function(t,e,r){var a=s(t),h=new i.State;e&&h.setOldProps(a,e),r&&h.setOldState(a,r);try{n(h,a,"forceCapture"),a._isVirtualComponent?o(h,a._content):o(h,a),c(h,a)}finally{h.dispose()}},this._renderChild=function(t,e){var r=new i.State;e.parent={_comp:t};try{return n(r,e),o(r,e),e._comp}finally{r.dispose()}},O.Prototype=function(){this._createComponent=function(){var t=this.state,e=this.elements[this.pos++];return!t.isCaptured(e)&&e._isVirtualComponent&&e.parent&&t.isCaptured(e.parent)&&(n(t,e),this.updates++,this.remaining--),e=l.createElement.apply(null,arguments),e._context=this,e._owner=this.owner,e._attach=function(){},e._detach=function(){},e},this.hasPendingCaptures=function(){return this.updates>0&&this.remaining>0},this.reset=function(){this.pos=0,this.updates=0},this._ancestorsReady=function(t){for(;t;){if(this.state.isCaptured(t)||t===this.owner||t===this.owner._content)return!0;t=t.parent}return!1}},h.initClass(O),i._internal={_capture:n,_wrap:s}},h.initClass(i),r.prototype._createComponent=function(){var t=l.createElement.apply(null,arguments);return t._context=this,t._owner=this.owner,t._isVirtualComponent&&this.components.push(t),this.elements.push(t),t},i.createContext=function(t){var e=s(t);return new r(e)},o.Prototype=function(){this.dispose=function(){var t=this.id;this.poluted.forEach(function(e){delete e[t]})},this.set=function(t,e,n){var i=t[this.id];i||(i={},t[this.id]=i),i[e]=n},this.get=function(t,e){var n=t[this.id];return n?n[e]:void 0},this.setMapped=function(t){this.set(t,"mapped",!0)},this.isMapped=function(t){return Boolean(this.get(t,"mapped"))},this.setRelocated=function(t){this.set(t,"relocated",!0)},this.isRelocated=function(t){return Boolean(this.get(t,"relocated"))},this.setDetached=function(t){this.set(t,"detached",!0)},this.isDetached=function(t){return Boolean(this.get(t,"detached"))},this.setCaptured=function(t){this.set(t,"captured",!0)},this.isCaptured=function(t){return Boolean(this.get(t,"captured"))},this.setNew=function(t){this.set(t,"created",!0)},this.isNew=function(t){return Boolean(this.get(t,"created"))},this.setUpdated=function(t){this.set(t,"updated",!0)},this.isUpdated=function(t){return Boolean(this.get(t,"updated"))},this.setSkipped=function(t){this.set(t,"skipped",!0)},this.isSkipped=function(t){return Boolean(this.get(t,"skipped"))},this.setRendered=function(t){this.set(t,"rendered",!0)},this.isRendered=function(t){return Boolean(this.get(t,"rendered"))},this.setOldProps=function(t,e){this.set(t,"oldProps",e)},this.getOldProps=function(t){return this.get(t,"oldProps")},this.setOldState=function(t,e){this.set(t,"oldState",e)},this.getOldState=function(t){return this.get(t,"oldState")}},h.initClass(o),i.State=o,e.exports=i},{"../util/oo":305,"../util/substanceGlobals":309,"../util/uuid":310,"./Component":277,"./DefaultDOMElement":279,"./VirtualElement":294,"lodash/each":230}],286:[function(t,e,n){"use strict";function i(){s.apply(this,arguments),this.__isStarted__=!1}var r=t("lodash/each"),s=t("../util/EventEmitter"),o=t("./DefaultDOMElement");i.Prototype=function(){this.start=function(){var t=o.getBrowserWindow();t.on("hashchange",this._onHashChange,this),this.__isStarted__=!0},this.readRoute=function(){return this.__isStarted__||this.start(),this.parseRoute(this.getRouteString())},this.writeRoute=function(t,e){e=e||{};var n=this.stringifyRoute(t);n?this._writeRoute(n,e):this.clearRoute(e)},this.dispose=function(){var t=o.getBrowserWindow();t.off(this)},this.parseRoute=function(t){return i.routeStringToObject(t)},this.stringifyRoute=function(t){return i.objectToRouteString(t)},this.getRouteString=function(){return window.location.hash.slice(1)},this._writeRoute=function(t,e){this.__isSaving__=!0;try{e.replace?window.history.replaceState({},"","#"+t):window.history.pushState({},"","#"+t)}finally{this.__isSaving__=!1}},this.clearRoute=function(t){this._writeRoute("",t)},this._onHashChange=function(){if(!this.__isSaving__){if(this.__isLoading__)return void console.error("FIXME: router is currently applying a route.");this.__isLoading__=!0;try{var t=this.getRouteString(),e=this.parseRoute(t);this.emit("route:changed",e)}finally{this.__isLoading__=!1}}}},s.extend(i),i.objectToRouteString=function(t){var e=[];return r(t,function(t,n){e.push(n+"="+t)}),e.join(",")},i.routeStringToObject=function(t){var e={};if(!t)return e;var n=t.split(",");return n.forEach(function(t){var n=t.split("=");if(2!==n.length)throw new Error("Illegal route.");e[n[0].trim()]=n[1].trim()}),e},e.exports=i},{"../util/EventEmitter":298,"./DefaultDOMElement":279,"lodash/each":230}],287:[function(t,e,n){"use strict";var i=t("../util/oo"),r=function(){};r.Prototype=function(){this.saveDocument=function(t,e,n){console.warn("No SaveHandler provided. Using Stub."),n(null)}},i.initClass(r),e.exports=r},{"../util/oo":305}],288:[function(t,e,n){"use strict";function i(){s.apply(this,arguments)}var r=t("../util/platform"),s=t("./Component"),o=t("./Scrollbar"),a=t("../util/getRelativeBoundingRect");i.Prototype=function(){this.getChildContext=function(){return{scrollPane:this}},this.didMount=function(){this.props.highlights&&this.props.highlights.on("highlights:updated",this.onHighlightsUpdated,this),this.refs.scrollbar&&this.context.doc.on("document:changed",this.onDocumentChange,this,{priority:-1}),this.handleActions({updateOverlayHints:this._updateOverlayHints})},this.dispose=function(){this.props.highlights&&this.props.highlights.off(this),this.context.doc.off(this)},this.render=function(t){var e,n=t("div").addClass("sc-scroll-pane");if(r.isFF&&n.addClass("sm-firefox"),"substance"===this.props.scrollbarType&&(n.addClass("sm-substance-scrollbar"),n.addClass("sm-scrollbar-position-"+this.props.scrollbarPosition),n.append(t(o,{scrollPane:this}).ref("scrollbar").attr("id","content-scrollbar")),n.append(t("div").ref("scanline").addClass("se-scanline"))),this.props.overlay){var i=this.context.componentRegistry,s=i.get("overlay");e=t(s,{overlay:this.props.overlay}).ref("overlay")}return n.append(t("div").ref("scrollable").addClass("se-scrollable").append(t("div").ref("content").addClass("se-content").append(e).append(this.props.children)).on("scroll",this.onScroll)),n},this._updateOverlayHints=function(t){var e=this.refs.overlay;e&&e.position(t)},this.onDocumentChange=function(){this.refs.scrollbar.updatePositions()},this.onHighlightsUpdated=function(t){this.refs.scrollbar.extendProps({highlights:t})},this.onScroll=function(){var t=this.getScrollPosition(),e=this.refs.scrollable;this.props.onScroll&&this.props.onScroll(t,e),this.props.tocProvider&&this.props.tocProvider.markActiveEntry(this),this.emit("scroll",t,e)},this.getHeight=function(){var t=this.getScrollableElement();return t.height},this.getContentHeight=function(){var t=0,e=this.refs.content.el;return e.childNodes.forEach(function(e){t+=e.getOuterHeight()}),t},this.getContentElement=function(){return this.refs.content.el},this.getScrollableElement=function(){return this.refs.scrollable.el},this.getScrollPosition=function(){var t=this.getScrollableElement();return Math.floor(t.getProperty("scrollTop")+1)},this.getPanelOffsetForElement=function(t){var e=t.el,n=this.refs.content.el.el,i=a(e,n);return i.top},this.scrollTo=function(t){var e=this.getScrollableElement(),n=e.find('*[data-id="'+t+'"]');if(n){var i=this.getPanelOffsetForElement(n);e.setProperty("scrollTop",i)}else console.warn(t,"not found in scrollable container")}},s.extend(i),e.exports=i},{"../util/getRelativeBoundingRect":303,"../util/platform":306,"./Component":277,"./Scrollbar":289}],289:[function(t,e,n){"use strict";function i(){i["super"].apply(this,arguments)}var r=t("./Component"),s=t("lodash/each"),o=t("./DefaultDOMElement");i.Prototype=function(){this.didMount=function(){o.getBrowserWindow().on("resize",this.onResize,this),this.props.scrollPane.on("scroll",this.onScroll,this),setTimeout(function(){this.updatePositions()}.bind(this))},this.dispose=function(){o.getBrowserWindow().off(this),this.props.scrollPane.off(this)},this.didUpdate=function(){this.updatePositions()},this.render=function(t){var e=t("div").addClass("sc-scrollbar").on("mousedown",this.onMouseDown);if(this.props.highlights){var n=[];s(this.props.highlights,function(e,i){s(e,function(e){n.push(t("div").ref(e).addClass("se-highlight sm-"+i))})}),e.append(t("div").ref("highlights").addClass("se-highlights").append(n))}return e.append(t("div").ref("thumb").addClass("se-thumb")),e},this.updatePositions=function(){var t=this.props.scrollPane,e=t.getScrollableElement(),n=t.getContentHeight(),r=t.getHeight(),o=t.getScrollPosition();this.factor=n/r,this.refs.thumb.css({top:o/this.factor,height:r/this.factor}),this.props.highlights&&s(this.props.highlights,function(t){s(t,function(t){var n=e.find('*[data-id="'+t+'"]');if(n){var r=n.getPosition().top/this.factor,s=n.getOuterHeight(!0)/this.factor;s<i.overlayMinHeight&&(s=i.overlayMinHeight);var o=this.refs[t];o?this.refs[t].css({top:r,height:s}):console.warn("no ref found for highlight",t)}}.bind(this))}.bind(this))},this.getScrollableElement=function(){return this.props.scrollPane.getScrollableElement()},this.onResize=function(){this.rerender()},this.onScroll=function(){this.updatePositions()},this.onMouseDown=function(t){t.stopPropagation(),t.preventDefault(),this._mouseDown=!0;var e=o.getBrowserWindow();e.on("mousemove",this.onMouseMove,this),e.on("mouseup",this.onMouseUp,this);var n=this.el.getOffset().top,i=t.pageY-n,r=this.refs.thumb.el;t.target!==r.getNativeElement()?(this.offset=r.height/2,this.onMouseMove(t)):this.offset=i-r.getPosition().top},this.onMouseUp=function(){this._mouseDown=!1;var t=o.getBrowserWindow();t.off("mousemove",this.onMouseMove,this),t.off("mouseup",this.onMouseUp,this)},this.onMouseMove=function(t){if(this._mouseDown){var e=this.props.scrollPane,n=e.getScrollableElement(),i=this.el.getOffset().top,r=t.pageY-i,s=(r-this.offset)*this.factor;n.setProperty("scrollTop",s)}}},r.extend(i),i.overlayMinHeight=2,e.exports=i},{"./Component":277,"./DefaultDOMElement":279,"lodash/each":230}],290:[function(t,e,n){"use strict";function i(){r.apply(this,arguments)}var r=t("./Component");i.Prototype=function(){this.render=function(t){if(2!==this.props.children.length)throw new Error("SplitPane only works with exactly two child elements");var e=t("div").addClass("sc-split-pane");"horizontal"===this.props.splitType?e.addClass("sm-horizontal"):e.addClass("sm-vertical");var n=this.props.children[0],i=this.props.children[1];return this.props.sizeB?(i.addClass("se-pane sm-sized"),i.css(this.getSizedStyle(this.props.sizeB)),n.addClass("se-pane sm-auto-fill")):(n.addClass("se-pane sm-sized"),n.css(this.getSizedStyle(this.props.sizeA)),i.addClass("se-pane sm-auto-fill")),e.append(n,i),e},this.getSizedStyle=function(t){return t&&"inherit"!==t?"horizontal"===this.props.splitType?{height:t}:{width:t}:{}}},r.extend(i),e.exports=i},{"./Component":277}],291:[function(t,e,n){"use strict";function i(){r.apply(this,arguments)}var r=t("./Component"),s=t("./ScrollPane"),o=t("./FontAwesomeIcon");i.Prototype=function(){this.didMount=function(){var t=this.context.tocProvider;t.on("toc:updated",this.onTOCUpdated,this)},this.dispose=function(){var t=this.context.tocProvider;t.off(this)},this.render=function(t){for(var e=this.context.tocProvider,n=e.activeEntry,i=t("div").addClass("se-toc-entries").ref("tocEntries"),r=e.getEntries(),a=0;a<r.length;a++){var h=r[a],c=h.level,u=t("a").addClass("se-toc-entry").addClass("sm-level-"+c).attr({href:"#","data-id":h.id}).ref(h.id).on("click",this.handleClick).append(t(o,{icon:"fa-caret-right"}),h.name);n===h.id&&u.addClass("sm-active"),i.append(u)}var l=t("div").addClass("sc-toc-panel").append(t(s).ref("panelEl").append(i));return l},this.getDocument=function(){return this.context.doc},this.onTOCUpdated=function(){this.rerender()},this.handleClick=function(t){var e=t.currentTarget.dataset.id;t.preventDefault(),this.send("tocEntrySelected",e)}},r.extend(i),e.exports=i},{"./Component":277,"./FontAwesomeIcon":283,"./ScrollPane":288}],292:[function(t,e,n){"use strict";function i(t,e){o.apply(this,arguments),this.document=t,this.config=e,this.entries=this.computeEntries(),this.entries.length>0?this.activeEntry=this.entries[0].id:this.activeEntry=null,this.document.on("document:changed",this.handleDocumentChange,this)}var r=t("lodash/each"),s=t("lodash/includes"),o=t("../util/EventEmitter");i.Prototype=function(){this.dispose=function(){var t=this.getDocument();t.disconnect(this)},this.handleDocumentChange=function(t){for(var e=this.getDocument(),n=!1,i=this.constructor["static"].tocTypes,r=0;r<t.ops.length;r++){var o,a=t.ops[r];if(a.isCreate()||a.isDelete()){var h=a.getValue();if(o=h.type,s(i,o)){n=!0;break}}else{var c=a.path[0],u=e.get(c);if(u&&s(i,u.type)){n=!0;break}}}n&&(this.entries=this.computeEntries(),this.emit("toc:updated"))},this.computeEntries=function(){var t=this.getDocument(),e=this.config,n=[],i=t.get(e.containerId).nodes;return r(i,function(e){var i=t.get(e);"heading"===i.type&&n.push({id:i.id,name:i.content,level:i.level,node:i})}),n},this.getEntries=function(){return this.entries},this.getDocument=function(){return this.document},this.markActiveEntry=function(t){var e=t.getContentElement(),n=t.getContentHeight(),i=t.getHeight(),r=t.getScrollPosition(),s=r+i,o=r,a=2*s-n,h=Math.max(o,a),c=this.computeEntries();if(0!==c.length){for(var u=c[0].id,l=c.length-1;l>=0;l--){var f=c[l],d=e.find('[data-id="'+f.id+'"]');if(!d)return void console.warn("Not found in Content panel",f.id);var p=t.getPanelOffsetForElement(d);if(h>=p){u=f.id;break}}this.activeEntry!==u&&(this.activeEntry=u,this.emit("toc:updated"))}}},o.extend(i),i["static"].tocTypes=["heading"],e.exports=i},{"../util/EventEmitter":298,"lodash/each":230,"lodash/includes":240}],293:[function(t,e,n){"use strict";function i(){r.apply(this,arguments)}var r=t("./Component");i.Prototype=function(){this.render=function(t){return t("pre").addClass("content-node unsupported").attr({"data-id":this.props.node.id,contentEditable:!1}).append(JSON.stringify(this.props.node.properties,null,2))}},r.extend(i),e.exports=i},{"./Component":277}],294:[function(t,e,n){"use strict";function i(t){this.parent=null,this._owner=t,this._ref=null}function r(t){r["super"].call(this),this._tagName=t,this.classNames=null,this.attributes=null,this.htmlProps=null,this.style=null,this.eventListeners=null,this.children=[]}function s(t,e){s["super"].call(this),e=e||{},this.ComponentClass=t,this.props=e,e.children||(e.children=[]),this.children=e.children}function o(t){this.text=t}var a=t("lodash/isFunction"),h=t("lodash/isString"),c=t("lodash/isArray"),u=t("lodash/map"),l=t("lodash/clone"),f=t("lodash/extend"),d=t("lodash/omit"),p=t("lodash/without"),g=t("./DOMElement");i.Prototype=function(){this._isVirtualElement=!0,this.getParent=function(){return this.parent},this.ref=function(t){if(!t)throw new Error("Illegal argument");return this._ref=t,this._context&&(this._context.refs[t]=this),this}},g.extend(i),g._defineProperties(i,p(g._propertyNames,"children")),r.Prototype=function(){this._isVirtualHTMLElement=!0,this.getTagName=function(){return this._tagName},this.setTagName=function(t){return this._tagName=t,this},this.hasClass=function(t){return this.classNames?this.classNames.indexOf(t)>-1:!1},this.addClass=function(t){return this.classNames||(this.classNames=[]),this.classNames.push(t),this},this.removeClass=function(t){return this.classNames&&(this.classNames=p(this.classNames,t)),this},this.removeAttr=function(t){return this.attributes&&(h(t)?delete this.attributes[t]:this.attributes=d(this.attributes,t)),this},this.getAttribute=function(t){return this.attributes?this.attributes[t]:void 0},this.setAttribute=function(t,e){return this.attributes||(this.attributes={}),this.attributes[t]=e,this},this.getAttributes=function(){var t={};return this.attributes&&f(t,this.attributes),this.classNames&&(t["class"]=this.classNames.join(" ")),this.style&&(t.style=u(this.style,function(t,e){return e+":"+t}).join(";")),t},this.getId=function(){return this.getAttribute("id")},this.setId=function(t){return this.setAttribute("id",t),this},this.setTextContent=function(t){return t=t||"",this.empty(),this.appendChild(t),this},this.setInnerHTML=function(t){return t=t||"",this.empty(),this._innerHTMLString=t,this},this.getInnerHTML=function(){if(this.hasOwnProperty("_innerHTMLString"))return this._innerHTMLString;throw new Error("Not supported.")},this.getValue=function(){return this.htmlProp("value")},this.setValue=function(t){return this.htmlProp("value",t),this},this.getChildNodes=function(){return this.children},this.getChildren=function(){return this.children.filter(function(t){return"text"!==t.getNodeType()})},this.isTextNode=function(){return!1},this.isElementNode=function(){return!0},this.isCommentNode=function(){return!1},this.isDocumentNode=function(){return!1},this.append=function(){if(this._innerHTMLString)throw Error("It is not possible to mix $$.html() with $$.append(). You can call $$.empty() to reset this virtual element.");return this._append(this.children,arguments),this},this.appendChild=function(t){if(this._innerHTMLString)throw Error("It is not possible to mix $$.html() with $$.append(). You can call $$.empty() to reset this virtual element.");return this._appendChild(this.children,t),this},this.insertAt=function(t,e){if(e=this._normalizeChild(e),!e)throw new Error("Illegal child: "+e);if(!e._isVirtualElement)throw new Error("Illegal argument for $$.insertAt():"+e);if(0>t||t>this.children.length)throw new Error("insertAt(): index out of bounds.");return this._insertAt(this.children,t,e),this},this.insertBefore=function(t,e){var n=this.children.indexOf(e);if(!(n>-1))throw new Error("insertBefore(): reference node is not a child of this element.");return this.insertAt(n,t),this},this.removeAt=function(t){if(0>t||t>=this.children.length)throw new Error("removeAt(): Index out of bounds.");return this._removeAt(t),this},this.removeChild=function(t){if(!t||!t._isVirtualElement)throw new Error("removeChild(): Illegal arguments. Expecting a CheerioDOMElement instance.");var e=this.children.indexOf(t);if(0>e)throw new Error("removeChild(): element is not a child.");return this.removeAt(e),this},this.replaceChild=function(t,e){if(!(e&&t&&e._isVirtualElement&&t._isVirtualElement))throw new Error("replaceChild(): Illegal arguments. Expecting BrowserDOMElement instances.");var n=this.children.indexOf(t);if(0>n)throw new Error("replaceChild(): element is not a child.");return this.removeAt(n),this.insertAt(n,e),this},this.empty=function(){for(var t=this.children;t.length;){var e=t.pop();e.parent=null}return delete this._innerHTMLString,this},this.getProperty=function(t){return this.htmlProps?this.htmlProps[t]:void 0},this.setProperty=function(t,e){return this.htmlProps||(this.htmlProps={}),this.htmlProps[t]=e,this},this.removeProperty=function(t){return this.htmlProps&&delete this.htmlProps[t],this},this.getStyle=function(t){return this.style?this.style[t]:void 0},this.setStyle=function(t,e){return this.style||(this.style={}),this.style[t]=e,this},this.addEventListener=function(t,e,n){var i;return 1===arguments.length&&arguments[0]._isDOMEventListener?i=arguments[0]:(n=n||{},n.context=n.context||this._owner._comp,i=new g.EventListener(t,e,n)),this.eventListeners||(this.eventListeners=[]),this.eventListeners.push(i),this},this.removeEventListener=function(t,e){return this.eventListeners&&g._findEventListenerIndex(this.eventListeners,t,e),this},this.getEventListeners=function(){return this.eventListeners},this.getNodeType=function(){return"element"},this.hasInnerHTML=function(){return Boolean(this._innerHTMLString)},this._normalizeChild=function(t){return h(t)&&(t=new o(t)),t},this._append=function(t,e){if(1===e.length&&!c(e[0]))return void this._appendChild(t,e[0]);var n;if(c(e[0]))n=e[0];else{if(!(arguments.length>1))return;n=Array.prototype.slice.call(e,0)}n.forEach(this._appendChild.bind(this,t))},this._appendChild=function(t,e){return(e=this._normalizeChild(e))?(t.push(e),this._attach(e),e):void 0},this._insertAt=function(t,e,n){n&&(t.splice(e,0,n),this._attach(n))},this._removeAt=function(t,e){var n=t[e];t.splice(e,1),this._detach(n)},this._attach=function(t){t.parent=this,this._context&&t._owner!==this._owner&&t._ref&&(this._context.foreignRefs[t._ref]=t)},this._detach=function(t){t.parent=null,this._context&&t._owner!==this._owner&&t._ref&&delete this.context.foreignRefs[t._ref]},this._mergeHTMLConfig=function(t){t.classNames&&(this.classNames||(this.classNames=[]),this.classNames=this.classNames.concat(t.classNames)),t.attributes&&(this.attributes||(this.attributes={}),f(this.attributes,t.attributes)),t.htmlProps&&(this.htmlProps||(this.htmlProps={}),f(this.htmlProps,t.htmlProps)),t.style&&(this.style||(this.style={}),f(this.style,t.style)),t.eventListeners&&(this.eventListeners||(this.eventListeners=[]),this.eventListeners=this.eventListeners.concat(t.eventListeners))}},i.extend(r),s.Prototype=function(){function t(t,e){this.virtualEl=t,this.name=e,Object.freeze(this)}this._isVirtualComponent=!0,this.getComponent=function(){return this._comp},this.getChildren=function(){return this.props.children},this.getNodeType=function(){return"component"},this.outlet=function(e){return new t(this,e)},this._attach=function(t){t._preliminaryParent=this},this._detach=function(t){t._preliminaryParent=null},this._copyHTMLConfig=function(){return{classNames:l(this.classNames),attributes:l(this.attributes),htmlProps:l(this.htmlProps),style:l(this.style),eventListeners:l(this.eventListeners)}},t.prototype._getOutlet=function(){var t=this.virtualEl.props[this.name];return t||(t=[],this.virtualEl.props[this.name]=t),t},t.prototype.append=function(){var t=this._getOutlet();return this.virtualEl._append(t,arguments),this},t.prototype.empty=function(){var t=this.virtualEl.props[this.name];return t.forEach(function(t){this._detach(t)}.bind(this)),t.splice(0,t.length),this}},r.extend(s),o.Prototype=function(){this._isVirtualTextNode=!0},i.extend(o),i.Component=s,i.TextNode=o,i.createElement=function(){var t=null;if(h(arguments[0])){if(1!==arguments.length)throw new Error("Illegal usage of VirtualElement.createElement()");t=new r(arguments[0])}else{if(!a(arguments[0])||!arguments[0].prototype._isComponent)throw void 0===arguments[0]?new Error("Provided Component was undefined."):new Error("Illegal usage of VirtualElement.createElement()");if(arguments.length<1||arguments.length>2)throw new Error("Illegal usage of VirtualElement.createElement()");var e={};2===arguments.length&&(e=l(arguments[1])),t=new s(arguments[0],e)}return t},e.exports=i},{"./DOMElement":278,"lodash/clone":228,"lodash/extend":232,"lodash/isArray":242,"lodash/isFunction":248,"lodash/isString":253,"lodash/map":259,"lodash/omit":261,"lodash/without":274}],295:[function(t,e,n){"use strict";function i(){this.config={schema:{},styles:[],nodes:{},components:{},converters:{},importers:{},exporters:{},commands:[],tools:[],textTypes:[],editingBehaviors:[],macros:[],icons:{},labels:{},saveHandler:f,fileClient:l,ToolbarClass:null}}var r=t("./oo"),s=t("lodash/forEach"),o=t("lodash/extend"),a=t("lodash/isString"),h=t("../model/DocumentSchema"),c=t("../model/EditingBehavior"),u=t("../util/Registry"),l=t("../ui/FileClientStub"),f=t("../ui/SaveHandlerStub");i.Prototype=function(){this.defineSchema=function(t){this.config.schema=t},this.addNode=function(t){var e=t["static"].name;if(!e)throw new Error("A NodeClass must have a name.");if(this.config.nodes[e])throw new Error("NodeClass with this name is already registered: "+e);this.config.nodes[e]=t},this.addConverter=function(t,e){var n=this.config.converters[t];if(n||(n={},this.config.converters[t]=n),!e.type)throw new Error("A converter needs an associated type.");n[e.type]=e},this.addImporter=function(t,e){this.config.importers[t]=e},this.addExporter=function(t,e){this.config.exporters[t]=e},this.addStyle=function(t){this.config.styles.push(t)},this.addComponent=function(t,e){if(this.config.components[t])throw new Error(t+" already registered");if(!e||!e.prototype._isComponent)throw new Error("ComponentClass must be a subclass of ui/Component.");this.config.components[t]=e},this.addCommand=function(t,e){this.config.commands.push({Class:t,options:e||{}})},this.addTool=function(t,e){this.config.tools.push({Class:t,options:e||{}})},this.addIcon=function(t,e){var n=this.config.icons[t];n||(n={},this.config.icons[t]=n),o(n,e)},this.addLabel=function(t,e){a(e)?(this.config.labels.en||(this.config.labels.en={}),
this.config.labels.en[t]=e):s(e,function(e,n){this.config.labels[n]||(this.config.labels[n]={}),this.config.labels[n][t]=e}.bind(this))},this.addTextType=function(t,e){this.config.textTypes.push({spec:t,options:e||{}})},this.addEditingBehavior=function(t){this.config.editingBehaviors.push(t)},this.addMacro=function(t){this.config.macros.push(t)},this.setSaveHandler=function(t){this.config.saveHandler=t},this.setToolbarClass=function(t){this.config.ToolbarClass=t},this.setFileClient=function(t){this.config.fileClient=t},this["import"]=function(t,e){t.configure(this,e||{})},this.getConfig=function(){return this.config},this.getSchema=function(){var t=this.config.schema,e=new h(t.name,"1.0.0");return e.getDefaultTextType=function(){return t.defaultTextType},e.addNodes(this.config.nodes),e},this.createArticle=function(t){var e=this.config.schema,n=this.getSchema(),i=new e.ArticleClass(n);return t&&t(i),i},this.createImporter=function(t){var e=this.config.importers[t],n={schema:this.getSchema(),converters:this.getConverterRegistry().get(t),DocumentClass:this.config.schema.ArticleClass};return new e(n)},this.createExporter=function(t){var e=this.config.exporters[t],n={schema:this.getSchema(),converters:this.getConverterRegistry().get(t)};return new e(n)},this.getToolRegistry=function(){var t=new u;return s(this.config.tools,function(e){t.add(e.Class["static"].name,e)}),t},this.getComponentRegistry=function(){var t=new u;return s(this.config.components,function(e,n){t.add(n,e)}),t},this.getCommands=function(){var t=this.config.commands,e=t.map(function(t){return t.Class});return e},this.getSurfaceCommandNames=function(){var t=this.getCommands(),e=t.map(function(t){return t["static"].name});return e},this.getConverterRegistry=function(){if(!this.converterRegistry){var t=new u;s(this.config.converters,function(e,n){t.add(n,new u(e))}),this.converterRegistry=t}return this.converterRegistry},this.getFileClient=function(){var t=this.config.fileClient;return new t},this.getSaveHandler=function(){var t=this.config.saveHandler;return new t},this.getIconProvider=function(){throw new Error("This method is abstract")},this.getTextTypes=function(){return this.config.textTypes.map(function(t){return t.spec})},this.getI18nInstance=function(){throw new Error("This method is abstract.")},this.getLabelProvider=function(){throw new Error("This method is abstract.")},this.getEditingBehavior=function(){var t=new c;return this.config.editingBehaviors.forEach(function(e){e.register(t)}),t},this.getMacros=function(){return this.config.macros},this.getToolbarClass=function(){return this.config.ToolbarClass}},r.initClass(i),e.exports=i},{"../model/DocumentSchema":55,"../model/EditingBehavior":56,"../ui/FileClientStub":282,"../ui/SaveHandlerStub":287,"../util/Registry":299,"./oo":305,"lodash/extend":232,"lodash/forEach":236,"lodash/isString":253}],296:[function(t,e,n){"use strict";function i(t){this.arr=t,this.pos=-1}var r=t("./oo");i.Prototype=function(){this._isArrayIterator=!0,this.hasNext=function(){return this.pos<this.arr.length-1},this.next=function(){this.pos+=1;var t=this.arr[this.pos];return t},this.back=function(){return this.pos>=0&&(this.pos-=1),this}},r.initClass(i),e.exports=i},{"./oo":305}],297:[function(t,e,n){"use strict";function i(t){r.call(this),t&&this["import"](t)}var r=t("./AbstractConfigurator"),s=t("../ui/FontAwesomeIconProvider"),o=t("../ui/DefaultLabelProvider");i.Prototype=function(){this.getIconProvider=function(){return new s(this.config.icons)},this.getLabelProvider=function(){return new o(this.config.labels)}},r.extend(i),e.exports=i},{"../ui/DefaultLabelProvider":280,"../ui/FontAwesomeIconProvider":284,"./AbstractConfigurator":295}],298:[function(t,e,n){"use strict";function i(){this.__events__={}}var r=t("./oo"),s=t("lodash/forEach"),o=t("lodash/isObject"),a=t("./warn");i.Prototype=function(){function t(t,e){return e.priority-t.priority}function e(t,e){if("string"==typeof t){if(void 0===e||null===e)throw new Error('Method name "'+t+'" has no context.');if(!(t in e))throw new Error('Method not found: "'+t+'"');if("function"!=typeof e[t])throw new Error('Property "'+t+'" is not a function')}else if("function"!=typeof t)throw new Error("Invalid callback. Function or method name expected.")}function n(t,n,i,r){var s;return e(n,i),s=this.__events__.hasOwnProperty(t)?this.__events__[t]:this.__events__[t]=[],s.push({method:n,context:i||null,priority:r}),this}function i(t,n,i){var r,s;if(1===arguments.length)return delete this.__events__[t],this;if(e(n,i),!(t in this.__events__&&this.__events__[t].length))return this;for(arguments.length<3&&(i=null),s=this.__events__[t],r=s.length;r--;)s[r].method===n&&s[r].context===i&&s.splice(r,1);return 0===s.length&&delete this.__events__[t],this}function r(e,i,r){var o=0;return 3===arguments.length&&(o=r.priority||o),s(i,function(i,r){n.call(this,r,i,e,o),this.__events__[r].sort(t)}.bind(this)),this}function h(t){return s(this.__events__,function(e,n){for(var r=e.length-1;r>=0;r--)e[r]&&e[r].context===t&&i.call(this,n,e[r].method,t)}.bind(this)),this}this.emit=function(t){if(t in this.__events__){for(var e=this.__events__[t].slice(),n=Array.prototype.slice.call(arguments,1),i=0,r=e.length;r>i;i++){var s=e[i];s.method.apply(s.context,n)}return!0}return!1},this.connect=function(t,e,n){return a("DEPRECATED: Use EventEmitter.on(event, method, context) instead."),r.apply(this,arguments)},this.disconnect=function(t){return a("DEPRECATED: Use EventEmitter.off(listener) instead."),h.call(this,t)},this.on=function(e,i,r,s){var o=0;4===arguments.length&&(o=s.priority||o),n.call(this,e,i,r,o),this.__events__[e].sort(t)},this.off=function(t,e,n){1===arguments.length&&o(arguments[0])?h.call(this,arguments[0]):i.apply(this,arguments)},this._debugEvents=function(){console.log("### EventEmitter: ",this),s(this.__events__,function(t,e){console.log("- %s listeners for %s: ",t.length,e,t)})}},r.initClass(i),e.exports=i},{"./oo":305,"./warn":311,"lodash/forEach":236,"lodash/isObject":251}],299:[function(t,e,n){"use strict";function i(t){this.entries={},this.names=[],t&&r(t,function(t,e){this.add(e,t)}.bind(this))}var r=t("lodash/forEach"),s=t("./oo"),o=t("./warn"),a={};i.Prototype=function(){this._isRegistry=!0,this.contains=function(t){return this.entries.hasOwnProperty(t)},this.add=function(t,e){if(a[t])throw new Error('Illegal key: "'+t+'" is a property of Object which is thus not allowed as a key.');this.contains(t)&&this.remove(t),this.entries[t]=e,this.names.push(t)},this.remove=function(t){var e=this.names.indexOf(t);e>=0&&this.names.splice(e,1),delete this.entries[t]},this.clear=function(){this.names=[],this.entries={}},this.get=function(t){return this.entries[t]},this.each=function(t,e){return o("DEPRECATED: use Registry.forEach(cb) instead"),this.forEach(t.bind(e))},this.forEach=function(t){for(var e=0;e<this.names.length;e++){var n=this.names[e],i=t(this.entries[n],n);if(i===!1)break}}},s.initClass(i),e.exports=i},{"./oo":305,"./warn":311,"lodash/forEach":236}],300:[function(t,e,n){"use strict";function i(){}function r(){}var s=t("lodash/isString"),o=t("lodash/isArray"),a=t("lodash/get"),h=t("lodash/setWith"),c=t("./oo"),u=t("./deleteFromArray");r.Prototype=function(){this.get=function(t){return arguments.length>1&&(t=Array.prototype.slice(arguments,0)),s(t)&&(t=[t]),a(this,t)},this.getAll=function(t){if(arguments.length>1&&(t=Array.prototype.slice(arguments,0)),s(t)&&(t=[t]),!o(t))throw new Error("Illegal argument for TreeIndex.get()");var e=a(this,t);return this._collectValues(e)},this.set=function(t,e){s(t)&&(t=[t]),h(this,t,e,function(t){return t?void 0:new i})},this["delete"]=function(t){if(s(t))delete this[t];else if(1===t.length)delete this[t[0]];else{var e=t[t.length-1];t=t.slice(0,-1);var n=a(this,t);n&&delete n[e]}},this.clear=function(){var t=this;for(var e in t)t.hasOwnProperty(e)&&delete t[e]},this.traverse=function(t){this._traverse(this,[],t)},this.forEach=this.traverse,this._traverse=function(t,e,n){var r;for(r in t)if(t.hasOwnProperty(r)){var s=t[r],o=e.concat([r]);s instanceof i?this._traverse(s,o,n):n(s,o)}},this._collectValues=function(t){var e={};return this._traverse(t,[],function(t,n){var i=n[n.length-1];e[i]=t}),e}},c.initClass(r),r.Arrays=function(){},r.Arrays.Prototype=function(){var t=Object.getPrototypeOf(this);this.get=function(e){var n=t.get.call(this,e);return n instanceof i&&(n=n.__values__||[]),n},this.set=function(){throw new Error("TreeIndex.set() is not supported for array type.")},this.add=function(t,e){if(s(t)&&(t=[t]),!o(t))throw new Error("Illegal arguments.");var n;h(this,t.concat(["__values__","__dummy__"]),void 0,function(t,e){return"__values__"===e?(t||(t=[]),n=t):t||(t=new i),t}),delete n.__dummy__,n.push(e)},this.remove=function(t,e){var n=a(this,t);n instanceof i&&u(n.__values__,e)},this._collectValues=function(t){var e=[];return this._traverse(t,[],function(t){e.push(t)}),e=Array.prototype.concat.apply([],e)}},r.extend(r.Arrays),e.exports=r},{"./deleteFromArray":302,"./oo":305,"lodash/get":237,"lodash/isArray":242,"lodash/isString":253,"lodash/setWith":264}],301:[function(t,e,n){"use strict";function i(t){var e={};return t.root&&t.root.options&&(e=t.root.options),r({attribs:{},children:[],parent:null,root:null,options:e,next:null,prev:null},t)}var r=t("lodash/extend"),s=null;if(!s){var o=t("cheerio");if(o.prototype){o.prototype.prop=o.prototype.attr,o.prototype.removeProp=o.prototype.removeAttr,o.prototype.on=function(){},o.prototype.off=function(){},s=o.load("",{decodeEntities:!1}),s._createElement=function(t,e){return i({type:"tag",name:t,root:e})},s._createTextNode=function(t,e){return i({type:"text",data:t,root:e})};var a=function(t,e){var n=s.load(t,e),i=n.root()[0];return i.options||(i.options=e),i.children.slice()};s.parseHTML=function(t){return a(t,{xmlMode:!1})},s.parseXML=function(t){return a(t,{xmlMode:!0})},s._serialize=function(e){var n=t("dom-serializer"),i=e.options||e.root&&e.root.options;return n(e,i)}}}e.exports=s},{cheerio:80,"dom-serializer":80,"lodash/extend":232}],302:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<t.length;n++)t[n]===e&&(t.splice(n,1),n--)}e.exports=i},{}],303:[function(t,e,n){"use strict";function i(t){var e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:Number.NaN,height:Number.NaN};return o(t,function(t){t.left<e.left&&(e.left=t.left),t.top<e.top&&(e.top=t.top),t.left+t.width>e.right&&(e.right=t.left+t.width),t.top+t.height>e.bottom&&(e.bottom=t.top+t.height)}),e.width=e.right-e.left,e.height=e.bottom-e.top,e}function r(t,e){var n=e.getBoundingClientRect(),r=i(t.getClientRects()),s=r.left-n.left,o=r.top-n.top;return{left:s,top:o,right:n.width-s-r.width,bottom:n.height-o-r.height,width:r.width,height:r.height}}function s(t,e){void 0===t.length&&(t=[t]);var n=a(t,function(t){return r(t,e)}),s=i(n),o=e.getBoundingClientRect();return{left:s.left,top:s.top,right:o.width-s.left-s.width,bottom:o.height-s.top-s.height,width:s.width,height:s.height}}var o=t("lodash/forEach"),a=t("lodash/map");e.exports=s},{"lodash/forEach":236,"lodash/map":259}],304:[function(t,e,n){"use strict";var i="undefined"!=typeof window&&!window.process;e.exports=i},{}],305:[function(t,e,n){"use strict";function i(t){if(!t.__is_initialized__){!t.Prototype||t.prototype instanceof t.Prototype||(t.prototype=new t.Prototype,t.prototype.constructor=t);var e=c();t["static"]=t["static"]||new e(t),t.__is_initialized__=!0}}function r(t,e){if(t.prototype instanceof e)throw new Error("Target already inherits from origin");var n=t.Prototype;t["super"]=e,n?(n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t.prototype=new n,t.prototype.constructor=t):t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});var i=c();e["static"]&&(i.prototype=e["static"]),t["static"]=new i(t),t["static"]._makeExtendFunction?t.extend=t["static"]._makeExtendFunction(t):h(t)}function s(t){var e=t.prototype;for(var n in e)"constructor"!==n&&"__class__"!==n&&e.hasOwnProperty(n)&&("static"!==n||u(t["static"],e["static"]))}function o(t){function e(){t.apply(this,arguments),this.initialize&&this.initialize()}var n,i=Array.prototype.slice.call(arguments,1),s=[],o=0;for(f(i[0])?(n=i[0],o++):n=e;o<i.length;o++){if(f(i[o])){if(o!==i.length-1)throw new Error("Illegal use of Class.extend(): Prototype function must be last argument.");if(n.hasOwnProperty("Prototype"))throw new Error("Class "+n.name+" has defined "+n.name+".Prototype which would be overwritten by Class.extend().\nYou provided a prototype function when calling Class.extend().");n.Prototype=i[o];break}if(!l(i[o]))throw new Error("Illegal use of Class.extend");s.push(i[o])}r(n,t);for(var h=s.length-1;h>=0;h--)a(n,s[h]);return n}function a(t,e){var n=t.prototype;for(var i in e)if(e.hasOwnProperty(i)){if("static"===i){u(t["static"],e["static"]);continue}n.hasOwnProperty(i)||(n[i]=e[i])}}function h(t){t["static"]||d.initClass(t),t["static"]._makeExtendFunction=function(e){return o.bind(t,e)},t.extend=t["static"]._makeExtendFunction(t)}function c(){return function(t){this.__class__=t}}function u(t,e){for(var n in e)"constructor"!==n&&"__class__"!==n&&e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}var l=t("lodash/isObject"),f=t("lodash/isFunction"),d={};d.initClass=function(t){i(t),h(t)},d.inherit=function(t,e){t.__is_initialized__||d.initClass(t),r(t,e),s(t)},d.mixin=function(t,e){t.__is_initialized__||d.initClass(t),a(t,e)},d.makeExtensible=h,e.exports=d},{"lodash/isFunction":248,"lodash/isObject":251}],306:[function(t,e,n){"use strict";var i=t("./inBrowser"),r={isIE:!1,isFF:!1,isWebkit:!1,version:-1,isWindows:i&&void 0!==window.navigator&&window.navigator.appVersion&&-1!==window.navigator.appVersion.indexOf("Win")};if("undefined"!=typeof window){var s=window.navigator.userAgent,o=s.indexOf("MSIE "),a=s.indexOf("Trident/"),h=s.indexOf("Edge/");o>0?(r.isIE=!0,r.version=10):a>0?(r.isIE=!0,r.version=11,r.isTrident=!0):h>0&&(r.isIE=!0,r.version=12,r.isEdge=!0,parseInt(s.substring(h+5,s.indexOf(".",h)),10)),r.isFF=window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,r.isWebkit=!r.isFF&&!r.isIE}e.exports=r},{"./inBrowser":304}],307:[function(t,e,n){"use strict";var i=t("lodash/map");e.exports=function(t,e){return i(t,function(t){return t[e]})}},{"lodash/map":259}],308:[function(t,e,n){"use strict";function i(t,e,n,i){var s=new XMLHttpRequest;s.open(t,e,!0),s.setRequestHeader("Content-Type","application/json; charset=UTF-8"),s.onload=function(){if(!(s.status>=200&&s.status<400))return i(new Error("Request failed. Returned status: "+s.status));var t=s.responseText;r(t)&&(t=JSON.parse(t)),i(null,t)},n?s.send(JSON.stringify(n)):s.send()}function r(t){try{JSON.parse(t)}catch(e){return!1}return!0}e.exports=i},{}],309:[function(t,e,n){(function(n){"use strict";var i=t("./warn"),r={};n.hasOwnProperty("Substance")?(i("global.Substance is already defined."),r=n.Substance):n.Substance=r,e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./warn":311}],310:[function(t,e,n){"use strict";function i(t,e){t&&"-"!==t[t.length-1]&&(t=t.concat("-"));var n,i="0123456789abcdefghijklmnopqrstuvwxyz".split(""),r=[],s=16;if(e=e||32)for(n=0;e>n;n++)r[n]=i[0|Math.random()*s];else{var o;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",n=0;36>n;n++)r[n]||(o=0|16*Math.random(),r[n]=i[19===n?3&o|8:o])}return(t?t:"")+r.join("")}e.exports=i},{}],311:[function(t,e,n){"use strict";e.exports=function(){console.warn.apply(console,arguments)}},{}]},{},[5]);